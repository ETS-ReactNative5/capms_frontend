{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\charts\\\\HighCharts.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport exporting from 'highcharts/modules/exporting';\nimport exportData from 'highcharts/modules/export-data';\nimport accessibility from 'highcharts/modules/accessibility';\nimport highchartsGantt from \"highcharts/modules/gantt\";\nimport { useCookies } from 'react-cookie';\nimport Widget from '../../components/Widget/Widget';\nimport axios from 'axios';\nexporting(Highcharts);\nexportData(Highcharts);\naccessibility(Highcharts);\nhighchartsGantt(Highcharts);\n\nvar HighChartsPage = function HighChartsPage() {\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var parseData = function parseData() {\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n    axios.all([axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/wbs/resources?id=172&year=2021\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/wbs/sub\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/wbs/events\"))]).then(axios.spread(function (res1, res2, res3) {\n      var rawResources = res1.data;\n      var rawSub = res2.data;\n      var rawEvents = res3.data;\n      var data = [];\n      var y_count = 0;\n\n      var _loop = function _loop(i_resource) {\n        data.push({\n          resource: rawResources[i_resource].name,\n          pointWidth: 0,\n          y: y_count++\n        });\n        var sub = rawSub.filter(function (item) {\n          return rawResources[i_resource].id === item.resource_id;\n        });\n\n        var _loop2 = function _loop2(i_sub) {\n          var events = rawEvents.filter(function (item) {\n            return sub[i_sub].id === item.sub_id;\n          });\n\n          for (var i_event = 0; i_event < events.length; i_event++) {\n            data.push({\n              name: sub[i_sub].name,\n              start: Date.UTC(events[i_event].start.split('-')[0], events[i_event].start.split('-')[1] - 1, events[i_event].start.split('-')[2]),\n              end: Date.UTC(events[i_event].end.split('-')[0], events[i_event].end.split('-')[1] - 1, events[i_event].end.split('-')[2]),\n              담당자: sub[i_sub].담당자,\n              color: rawResources[i_resource].color,\n              y: y_count\n            });\n          }\n\n          y_count++;\n        };\n\n        for (var i_sub = 0; i_sub < sub.length; i_sub++) {\n          _loop2(i_sub);\n        }\n      };\n\n      for (var i_resource = 0; i_resource < rawResources.length; i_resource++) {\n        _loop(i_resource);\n      }\n\n      console.log(data);\n      setData(data);\n    })).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n  };\n\n  useEffect(function () {\n    return parseData();\n  }, []);\n  var _options = {\n    title: {\n      text: '프로젝트 명'\n    },\n    yAxis: {\n      type: 'category',\n      grid: {\n        cellHeight: 300,\n        columns: [{\n          title: {\n            text: '구분'\n          },\n          labels: {\n            format: '{point.resource}'\n          }\n        }, {\n          title: {\n            text: '작업'\n          },\n          labels: {\n            format: '{point.name}'\n          }\n        }, {\n          title: {\n            text: '담당자'\n          },\n          labels: {\n            format: '{point.담당자}'\n          }\n        }]\n      }\n    },\n    series: [{\n      data: data\n    }],\n    navigator: {\n      enabled: true,\n      liveRedraw: true,\n      series: {\n        type: 'gantt',\n        pointPlacement: 0.5,\n        pointPadding: 0.25\n      }\n    },\n    rangeSelector: {\n      //1개월, 3개월, 6개월, 1년 바꿀수 있음\n      enabled: true,\n      inputDateFormat: '%Y-%m-%d',\n      buttons: [{\n        type: 'month',\n        count: 1,\n        text: '1m',\n        title: '1개월 보기'\n      }, {\n        type: 'month',\n        count: 3,\n        text: '3m',\n        title: '3개월 보기'\n      }, {\n        type: 'month',\n        count: 6,\n        text: '6m',\n        title: '6개월 보기'\n      }, {\n        type: 'ytd',\n        text: 'YTD',\n        title: '연초부터 현재까지'\n      }, {\n        type: 'year',\n        count: 1,\n        text: '1y',\n        title: '1년 보기'\n      }, {\n        type: 'all',\n        text: 'All',\n        title: '전체보기'\n      }]\n    }\n  };\n  var options = {\n    title: {\n      text: 'Gantt Chart with Navigation'\n    },\n    // yAxis: {\n    //   uniqueNames: true\n    // },\n    xAxis: {\n      currentDateIndicator: {\n        enabled: true,\n        color: '#ff0000',\n        label: {\n          format: '%Y-%m-%d',\n          style: {\n            color: '#ff0000'\n          }\n        }\n      }\n    },\n    navigator: {\n      enabled: true,\n      liveRedraw: true,\n      series: {\n        type: 'gantt',\n        pointPlacement: 0.5,\n        pointPadding: 0.25\n      },\n      yAxis: {\n        min: 0,\n        max: 3,\n        reversed: true,\n        categories: []\n      }\n    },\n    scrollbar: {\n      enabled: true\n    },\n    rangeSelector: {\n      enabled: true,\n      selected: 0\n    },\n    yAxis: {\n      type: 'category',\n      grid: {\n        cellHeight: 300,\n        columns: [{\n          title: {\n            text: '구분'\n          },\n          labels: {\n            format: '{point.resource}'\n          }\n        }, {\n          title: {\n            text: '작업'\n          },\n          labels: {\n            format: '{point.name}'\n          }\n        }, {\n          title: {\n            text: '담당자'\n          },\n          labels: {\n            format: '{point.담당자}'\n          }\n        }]\n      }\n    },\n    // series: [{\n    //   data: data,\n    // }],\n    series: [{\n      name: 'Project 1',\n      data: [{\n        start: Date.UTC(2017, 11, 1),\n        end: Date.UTC(2018, 1, 2),\n        completed: 0.95,\n        name: 'Prototyping'\n      }, {\n        start: Date.UTC(2018, 1, 2),\n        end: Date.UTC(2018, 11, 5),\n        completed: 0.5,\n        name: 'Development'\n      }, {\n        start: Date.UTC(2018, 11, 8),\n        end: Date.UTC(2018, 11, 9),\n        completed: 0.15,\n        name: 'Testing'\n      }, {\n        start: Date.UTC(2018, 11, 9),\n        end: Date.UTC(2018, 11, 19),\n        completed: {\n          amount: 0.3,\n          fill: '#fa0'\n        },\n        name: 'Development'\n      }, {\n        start: Date.UTC(2018, 11, 10),\n        end: Date.UTC(2018, 11, 23),\n        name: 'Testing'\n      }, {\n        start: Date.UTC(2018, 11, 25, 8),\n        end: Date.UTC(2021, 11, 25, 16),\n        name: 'Release'\n      }]\n    }]\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 30,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 22\n      }\n    }, \"WBS\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(HighchartsReact, {\n    highcharts: Highcharts,\n    constructorType: \"ganttChart\",\n    options: options,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default HighChartsPage;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/charts/HighCharts.js"],"names":["React","useState","useEffect","Highcharts","HighchartsReact","exporting","exportData","accessibility","highchartsGantt","useCookies","Widget","axios","HighChartsPage","cookies","removeCookie","data","setData","parseData","defaults","headers","common","token","all","get","process","env","REACT_APP_API_URL","then","spread","res1","res2","res3","rawResources","rawSub","rawEvents","y_count","i_resource","push","resource","name","pointWidth","y","sub","filter","item","id","resource_id","i_sub","events","sub_id","i_event","length","start","Date","UTC","split","end","담당자","color","console","log","catch","err","alert","window","location","href","_options","title","text","yAxis","type","grid","cellHeight","columns","labels","format","series","navigator","enabled","liveRedraw","pointPlacement","pointPadding","rangeSelector","inputDateFormat","buttons","count","options","xAxis","currentDateIndicator","label","style","min","max","reversed","categories","scrollbar","selected","completed","amount","fill","fontSize","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official'\r\nimport exporting from 'highcharts/modules/exporting';\r\nimport exportData from 'highcharts/modules/export-data';\r\nimport accessibility from 'highcharts/modules/accessibility';\r\nimport highchartsGantt from \"highcharts/modules/gantt\";\r\nimport { useCookies } from 'react-cookie';\r\nimport Widget from '../../components/Widget/Widget';\r\nimport axios from 'axios';\r\n\r\nexporting(Highcharts);\r\nexportData(Highcharts);\r\naccessibility(Highcharts);\r\nhighchartsGantt(Highcharts);\r\n\r\nconst HighChartsPage = () => {\r\n  const [cookies, removeCookie ] = useCookies(['token']);\r\n  const [data, setData] = useState([]);\r\n\r\n  const parseData = () => {\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    axios\r\n    .all([\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/wbs/resources?id=172&year=2021`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/wbs/sub`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/wbs/events`),\r\n    ])\r\n    .then(axios.spread((res1, res2, res3) => {\r\n      const rawResources = res1.data;\r\n      const rawSub = res2.data;\r\n      const rawEvents = res3.data;\r\n      const data = [];\r\n      let y_count = 0;\r\n      for (let i_resource = 0; i_resource < rawResources.length; i_resource++) {\r\n        data.push({\r\n          resource: rawResources[i_resource].name,\r\n          pointWidth: 0,\r\n          y: y_count++\r\n        });\r\n        const sub = rawSub.filter((item) => rawResources[i_resource].id === item.resource_id);\r\n        for (let i_sub = 0; i_sub < sub.length; i_sub++) {\r\n          const events = rawEvents.filter((item) => sub[i_sub].id === item.sub_id);\r\n          for (let i_event = 0; i_event < events.length; i_event++) {\r\n            data.push({\r\n              name: sub[i_sub].name,\r\n              start: Date.UTC(events[i_event].start.split('-')[0], events[i_event].start.split('-')[1] - 1, events[i_event].start.split('-')[2]),\r\n              end: Date.UTC(events[i_event].end.split('-')[0], events[i_event].end.split('-')[1] - 1, events[i_event].end.split('-')[2]),\r\n              담당자: sub[i_sub].담당자,\r\n              color: rawResources[i_resource].color,\r\n              y: y_count})\r\n          }\r\n          y_count++;\r\n        }\r\n      }\r\n      console.log(data);\r\n      setData(data);\r\n    }))\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n  }\r\n  useEffect(() => parseData(), []);\r\n\r\n  const _options = {\r\n    title: {\r\n      text: '프로젝트 명'\r\n    },\r\n    yAxis: {\r\n      type: 'category',\r\n      grid: {\r\n        cellHeight: 300,\r\n        columns: [{\r\n          title: {\r\n            text: '구분',\r\n          },\r\n          labels: {\r\n            format: '{point.resource}'\r\n          }\r\n        }, {\r\n          title: {\r\n            text: '작업',\r\n          },\r\n          labels: {\r\n            format: '{point.name}'\r\n          }\r\n        }, {\r\n          title: {\r\n            text: '담당자',\r\n          },\r\n          labels: {\r\n            format: '{point.담당자}'\r\n          }\r\n        }]\r\n      }\r\n    },\r\n    series: [{\r\n      data: data,\r\n    }],\r\n    navigator: {\r\n      enabled: true,\r\n      liveRedraw: true,\r\n      series: {\r\n        type: 'gantt',\r\n        pointPlacement: 0.5,\r\n        pointPadding: 0.25\r\n      },\r\n    },\r\n    rangeSelector: { //1개월, 3개월, 6개월, 1년 바꿀수 있음\r\n      enabled: true,\r\n      inputDateFormat: '%Y-%m-%d',\r\n      buttons: [{\r\n        type: 'month',\r\n        count: 1,\r\n        text: '1m',\r\n        title: '1개월 보기'\r\n      }, {\r\n        type: 'month',\r\n        count: 3,\r\n        text: '3m',\r\n        title: '3개월 보기'\r\n      }, {\r\n        type: 'month',\r\n        count: 6,\r\n        text: '6m',\r\n        title: '6개월 보기'\r\n      }, {\r\n        type: 'ytd',\r\n        text: 'YTD',\r\n        title: '연초부터 현재까지'\r\n      }, {\r\n        type: 'year',\r\n        count: 1,\r\n        text: '1y',\r\n        title: '1년 보기'\r\n      }, {\r\n        type: 'all',\r\n        text: 'All',\r\n        title: '전체보기'\r\n      }]\r\n    },\r\n  }\r\n\r\n  const options = {\r\n\r\n    title: {\r\n      text: 'Gantt Chart with Navigation'\r\n    },\r\n  \r\n    // yAxis: {\r\n    //   uniqueNames: true\r\n    // },\r\n    xAxis: {\r\n      currentDateIndicator: {\r\n        enabled: true,\r\n        color: '#ff0000',\r\n        label: {\r\n          format: '%Y-%m-%d',\r\n          style: {\r\n            color: '#ff0000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    navigator: {\r\n      enabled: true,\r\n      liveRedraw: true,\r\n      series: {\r\n        type: 'gantt',\r\n        pointPlacement: 0.5,\r\n        pointPadding: 0.25\r\n      },\r\n      yAxis: {\r\n        min: 0,\r\n        max: 3,\r\n        reversed: true,\r\n        categories: []\r\n      }\r\n    },\r\n    scrollbar: {\r\n      enabled: true\r\n    },\r\n    rangeSelector: {\r\n      enabled: true,\r\n      selected: 0\r\n    },\r\n    yAxis: {\r\n      type: 'category',\r\n      grid: {\r\n        cellHeight: 300,\r\n        columns: [{\r\n          title: {\r\n            text: '구분',\r\n          },\r\n          labels: {\r\n            format: '{point.resource}'\r\n          }\r\n        }, {\r\n          title: {\r\n            text: '작업',\r\n          },\r\n          labels: {\r\n            format: '{point.name}'\r\n          }\r\n        }, {\r\n          title: {\r\n            text: '담당자',\r\n          },\r\n          labels: {\r\n            format: '{point.담당자}'\r\n          }\r\n        }]\r\n      }\r\n    },\r\n    // series: [{\r\n    //   data: data,\r\n    // }],\r\n    series: [{\r\n      name: 'Project 1',\r\n      data: [{\r\n        start: Date.UTC(2017, 11, 1),\r\n        end: Date.UTC(2018, 1, 2),\r\n        completed: 0.95,\r\n        name: 'Prototyping'\r\n      }, {\r\n        start: Date.UTC(2018, 1, 2),\r\n        end: Date.UTC(2018, 11, 5),\r\n        completed: 0.5,\r\n        name: 'Development'\r\n      }, {\r\n        start: Date.UTC(2018, 11, 8),\r\n        end: Date.UTC(2018, 11, 9),\r\n        completed: 0.15,\r\n        name: 'Testing'\r\n      }, {\r\n        start: Date.UTC(2018, 11, 9),\r\n        end: Date.UTC(2018, 11, 19),\r\n        completed: {\r\n          amount: 0.3,\r\n          fill: '#fa0'\r\n        },\r\n        name: 'Development'\r\n      }, {\r\n        start: Date.UTC(2018, 11, 10),\r\n        end: Date.UTC(2018, 11, 23),\r\n        name: 'Testing'\r\n      }, {\r\n        start: Date.UTC(2018, 11, 25, 8),\r\n        end: Date.UTC(2021, 11, 25, 16),\r\n        name: 'Release'\r\n      }]\r\n    }]\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Widget title={<p style={{ fontSize:30, fontWeight: 700 }}>WBS</p>}>\r\n          <HighchartsReact\r\n          highcharts={Highcharts}\r\n          constructorType={\"ganttChart\"}\r\n          options={options} />\r\n      </Widget>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HighChartsPage;\r\n"]},"metadata":{},"sourceType":"module"}