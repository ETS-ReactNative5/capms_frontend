{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\reportList\\\\ReportList.js\";\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Table, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport Button from 'reactstrap/lib/Button';\nimport Widget from '../../components/Widget/Widget';\nimport './ReportList.scss';\nimport moment from 'moment';\n\nvar weekTemp = _toConsumableArray(Array(moment(new Date()).format('YYYY') - 2019).keys()).map(function (i) {\n  return {\n    year: 2020 + i,\n    date: new Date(new Date(2020, 0, 1).setDate(new Date(2020, 0, 1).getDate() + i * 365))\n  };\n});\n\nvar weekNumInfo = [{\n  year: 2020,\n  date: new Date(2020, 0, 1),\n  weekNum: 52\n}, {\n  year: 2021,\n  date: new Date(2020, 11, 30),\n  weekNum: 52\n}, {\n  year: 2022,\n  date: new Date(2021, 11, 29),\n  weekNum: 53\n}, {\n  year: 2023,\n  date: new Date(2023, 0, 4),\n  weekNum: 52\n}]; // weeknum 구하는 메서드 정의\n\nDate.prototype.getWeek = function (dowOffset) {\n  /*getWeek() was developed by Nick Baicoianu at MeanFreePath: http://www.meanfreepath.com */\n  dowOffset = typeof dowOffset == 'number' ? dowOffset : 0; // dowOffset이 숫자면 넣고 아니면 0\n\n  var newYear = new Date(this.getFullYear(), 0, 1);\n  var day = newYear.getDay() - dowOffset; //the day of week the year begins on\n\n  day = day >= 0 ? day : day + 7;\n  var daynum = Math.floor((this.getTime() - newYear.getTime() - (this.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) / 86400000) + 1;\n  var weeknum; //if the year starts before the middle of a week\n\n  if (day < 4) {\n    weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n\n    if (weeknum > 52) {\n      var nYear = new Date(this.getFullYear() + 1, 0, 1);\n      var nday = nYear.getDay() - dowOffset;\n      nday = nday >= 0 ? nday : nday + 7;\n      /*if the next year starts before the middle of\r\n        the week, it is week #1 of that year*/\n\n      weeknum = nday < 4 ? 1 : 53;\n    }\n  } else {\n    weeknum = Math.floor((daynum + day - 1) / 7);\n  }\n\n  if (weeknum === 0) {\n    var tempWeeknum = new Date(this.setDate(new Date(this).getDate() - 7)).getWeek(3);\n    weeknum = tempWeeknum + 1;\n  }\n\n  return weeknum;\n};\n\nvar ReportList = function ReportList() {\n  var _useState = useState(new Date().getFullYear()),\n      _useState2 = _slicedToArray(_useState, 2),\n      termYear = _useState2[0],\n      setTermYear = _useState2[1];\n\n  var _useState3 = useState(new Date().getWeek(3)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      termWeek = _useState4[0],\n      setTermWeek = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      projects = _useState6[0],\n      setProjects = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      reports = _useState8[0],\n      setReports = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      thisReport = _useState10[0],\n      setThisReport = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      thisProjects = _useState12[0],\n      setThisProjects = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      members = _useState14[0],\n      setMembers = _useState14[1];\n\n  var onChangeTerm = function onChangeTerm(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n\n    switch (name) {\n      case \"termYear\":\n        return setTermYear(value);\n\n      case \"termWeek\":\n        return setTermWeek(value);\n    }\n  };\n\n  var weekNumOptions = function weekNumOptions() {\n    // 주차 옵션\n    var weekNum = [];\n    var targetYear = weekNumInfo.find(function (info) {\n      return info.year == termYear;\n    });\n    var maxWeekNum = targetYear.weekNum;\n    var startDate = new Date(targetYear.date);\n    var endDate = new Date(targetYear.date);\n    endDate.setDate(endDate.getDate() + 6);\n\n    for (var i = 1; endDate.getWeek() != 0 || endDate.getWeek() != 1; i++) {\n      weekNum.push( /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: i,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 20\n        }\n      }, i, \"\\uC8FC\\uCC28 (\", startDate.toLocaleDateString(), \"~\", endDate.toLocaleDateString(), \")\"));\n      startDate.setDate(startDate.getDate() + 7);\n      endDate.setDate(endDate.getDate() + 7);\n    }\n\n    return weekNum;\n  };\n\n  useEffect(function () {\n    return findAllInfos();\n  }, []);\n\n  var findAllInfos = function findAllInfos() {\n    axios.all([axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/projects\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/members\"))]).then(axios.spread(function (res1, res2, res3) {\n      var _projects = res1.data.filter(function (project) {\n        return project.주간보고서 == \"1\" && project.year == termYear && project.상태 != \"8.Dropped\";\n      });\n\n      setProjects(res1.data);\n      setThisProjects(_projects);\n      setReports(res2.data);\n      var thisReport = res2.data.filter(function (report) {\n        return new Date(report.최종수정시간).getFullYear() == termYear && new Date(report.최종수정시간).getWeek(3) == termWeek || new Date(report.최종수정시간.substring(0, 10)).getFullYear() == termYear && new Date(report.최종수정시간.substring(0, 10)).getWeek(3) == termWeek;\n      });\n      setThisReport(thisReport);\n      setMembers(res3.data);\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: function onClick() {\n      return console.log(weekTemp);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, \"\\uD14C\\uC2A4\\uD2B8\"), /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: 100 + '%',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 30,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, \"\\uC8FC\\uAC04\\uBCF4\\uACE0\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: termYear,\n      name: \"termYear\",\n      onChange: onChangeTerm,\n      style: {\n        width: 'auto',\n        marginRight: 1 + 'rem'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, _toConsumableArray(Array(moment(new Date()).format('YYYY') - 2019).keys()).map(function (i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: moment(new Date()).format('YYYY') - i,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 28\n        }\n      }, moment(new Date()).format('YYYY') - i);\n    })), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: termWeek,\n      name: \"termWeek\",\n      onChange: onChangeTerm,\n      style: {\n        width: 'auto',\n        marginRight: 1 + 'rem'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, weekNumOptions()), /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      onClick: function onClick() {\n        return setTermWeek(new Date().getWeek(3)) && setTermYear(new Date().getFullYear());\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, \"\\uC774\\uBC88\\uC8FC\\uBCF4\\uAE30\"))),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      marginBottom: 1 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UncontrolledButtonDropdown, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    color: \"info\",\n    style: {\n      borderRadius: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, \"\\uBBF8\\uB4F1\\uB85D \\uD504\\uB85C\\uC81D\\uD2B8\", ' ', thisProjects.length - thisReport.length, \"/\", thisProjects.length), /*#__PURE__*/React.createElement(DropdownMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, thisProjects.filter(function (project) {\n    return !thisReport.find(function (report) {\n      return report.project_id == project.id;\n    });\n  }).map(function (data, index) {\n    return /*#__PURE__*/React.createElement(DropdownItem, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 23\n      }\n    }, data.프로젝트명);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/projects/reports/new\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, \"\\uC8FC\\uAC04 \\uBCF4\\uACE0\\uC11C \\uC791\\uC131\")))), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"report-list__tr\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"col-md-4 report-list__th\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, \"\\uD504\\uB85C\\uC81D\\uD2B8\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"col-md-2 report-list__th\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }, \"\\uACE0\\uAC1D\\uC0AC\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"col-md-2 report-list__th\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, \"PM\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"col-md-2 report-list__th\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, \"\\uCD5C\\uC885\\uC218\\uC815\\uC2DC\\uAC04\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"col-md-1 report-list__th\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }, \"\\uCD5C\\uC885\\uD655\\uC778\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, reports.filter(function (report) {\n    return new Date(report.최종수정시간).getFullYear() == termYear && new Date(report.최종수정시간).getWeek(3) == termWeek || new Date(report.최종수정시간.substring(0, 10)).getFullYear() == termYear && new Date(report.최종수정시간.substring(0, 10)).getWeek(3) == termWeek;\n  }).map(function (report) {\n    var _project = projects.find(function (project) {\n      return project.id === report.project_id && project.year == termYear;\n    });\n\n    var member = members.find(function (_ref) {\n      var id = _ref.id;\n      return id === _project.PM;\n    });\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: report.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"col-md-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"reports/\".concat(_project.id, \"/\").concat(report.id, \"/\").concat(_project.year)\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, _project.프로젝트명)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"col-md-2 report-list__td\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 23\n      }\n    }, _project ? _project.고객사 : \"\"), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"col-md-2 report-list__td\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }\n    }, member ? member.name : \"\"), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"col-md-2 report-list__td\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }\n    }, new Date(report.최종수정시간) == 'Invalid Date' ? report.최종수정시간 : new Date(report.최종수정시간).toLocaleString()), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"col-md-1 report-list__td\",\n      style: report.최종확인 == \"1\" ? {\n        backgroundColor: 'orange'\n      } : {},\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 23\n      }\n    }));\n  })))))));\n};\n\nexport default ReportList;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/reportList/ReportList.js"],"names":["axios","React","useState","useEffect","Link","Row","Col","Table","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Button","Widget","moment","weekTemp","Array","Date","format","keys","map","i","year","date","setDate","getDate","weekNumInfo","weekNum","prototype","getWeek","dowOffset","newYear","getFullYear","day","getDay","daynum","Math","floor","getTime","getTimezoneOffset","weeknum","nYear","nday","tempWeeknum","ReportList","termYear","setTermYear","termWeek","setTermWeek","projects","setProjects","reports","setReports","thisReport","setThisReport","thisProjects","setThisProjects","members","setMembers","onChangeTerm","e","target","name","value","weekNumOptions","targetYear","find","info","maxWeekNum","startDate","endDate","push","toLocaleDateString","findAllInfos","all","get","process","env","REACT_APP_API_URL","then","spread","res1","res2","res3","_projects","data","filter","project","주간보고서","상태","report","최종수정시간","substring","console","log","width","display","flexDirection","justifyContent","alignItems","fontSize","fontWeight","marginRight","marginBottom","borderRadius","length","project_id","id","index","프로젝트명","_project","member","PM","pathname","고객사","toLocaleString","최종확인","backgroundColor"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Row, Col, Table, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem} from 'reactstrap';\r\nimport Button from 'reactstrap/lib/Button';\r\nimport Widget from '../../components/Widget/Widget';\r\nimport './ReportList.scss';\r\nimport moment from 'moment';\r\n\r\nconst weekTemp =  [\r\n  ...Array(moment(new Date()).format('YYYY') - 2019).keys()\r\n].map(i => {\r\n  return {\r\n    year: 2020 + i,\r\n    date: new Date(new Date(2020, 0, 1).setDate(new Date(2020, 0, 1).getDate() + (i * 365))),\r\n  }\r\n}\r\n);\r\n\r\nconst weekNumInfo = [\r\n  {\r\n    year: 2020,\r\n    date: new Date(2020, 0, 1),\r\n    weekNum: 52,\r\n  },\r\n  {\r\n    year: 2021,\r\n    date: new Date(2020, 11, 30),\r\n    weekNum: 52,\r\n  },\r\n  {\r\n    year: 2022,\r\n    date: new Date(2021, 11, 29),\r\n    weekNum: 53,\r\n  },\r\n  {\r\n    year: 2023,\r\n    date: new Date(2023, 0, 4),\r\n    weekNum: 52,\r\n  }\r\n]\r\n\r\n// weeknum 구하는 메서드 정의\r\nDate.prototype.getWeek = function (dowOffset) {\r\n  /*getWeek() was developed by Nick Baicoianu at MeanFreePath: http://www.meanfreepath.com */\r\n\r\n  dowOffset = typeof(dowOffset) == 'number' ? dowOffset : 0; // dowOffset이 숫자면 넣고 아니면 0\r\n  const newYear = new Date(this.getFullYear(),0,1);\r\n  let day = newYear.getDay() - dowOffset; //the day of week the year begins on\r\n  day = (day >= 0 ? day : day + 7);\r\n  const daynum = Math.floor((this.getTime() - newYear.getTime() -\r\n    (this.getTimezoneOffset()-newYear.getTimezoneOffset())*60000)/86400000) + 1;\r\n  let weeknum;\r\n  //if the year starts before the middle of a week\r\n  if(day < 4) {\r\n    weeknum = Math.floor((daynum+day-1)/7) + 1;\r\n    if(weeknum > 52) {\r\n      let nYear = new Date(this.getFullYear() + 1,0,1);\r\n      let nday = nYear.getDay() - dowOffset;\r\n      nday = nday >= 0 ? nday : nday + 7;\r\n      /*if the next year starts before the middle of\r\n        the week, it is week #1 of that year*/\r\n      weeknum = nday < 4 ? 1 : 53;\r\n    }\r\n  }\r\n  else {\r\n    weeknum = Math.floor((daynum+day-1)/7);\r\n  }\r\n  if (weeknum === 0) {\r\n    let tempWeeknum = new Date(this.setDate(new Date(this).getDate() - 7)).getWeek(3);\r\n    weeknum = tempWeeknum + 1;\r\n  }\r\n  return weeknum;\r\n};\r\n\r\nconst ReportList = () => {\r\n  const [termYear, setTermYear] = useState(new Date().getFullYear());\r\n  const [termWeek, setTermWeek] = useState(new Date().getWeek(3));\r\n  const [projects, setProjects] = useState([]);\r\n  const [reports, setReports] = useState([]);\r\n  const [thisReport, setThisReport] = useState([]);\r\n  const [thisProjects, setThisProjects] = useState([]);\r\n  const [members, setMembers] = useState([]);\r\n\r\n\r\n  const onChangeTerm = (e) => {\r\n    const { name, value } = e.target;\r\n    switch (name) {\r\n      case \"termYear\":\r\n        return (setTermYear(value));\r\n      case \"termWeek\":\r\n        return (setTermWeek(value));\r\n    }\r\n  };\r\n\r\n  const weekNumOptions = () => { // 주차 옵션\r\n    const weekNum = [];\r\n    const targetYear = weekNumInfo.find(info => info.year == termYear);\r\n    const maxWeekNum = targetYear.weekNum;\r\n    let startDate = new Date(targetYear.date);\r\n    let endDate = new Date(targetYear.date);\r\n    endDate.setDate(endDate.getDate() + 6);\r\n    for (let i = 1; endDate.getWeek() != 0 || endDate.getWeek() != 1; i++) {\r\n      weekNum.push(<option key={i} value={i}>{i}주차 ({startDate.toLocaleDateString()}~{endDate.toLocaleDateString()})</option>);\r\n      startDate.setDate(startDate.getDate() + 7);\r\n      endDate.setDate(endDate.getDate() + 7);\r\n    }\r\n    return weekNum;\r\n  }\r\n\r\n  useEffect(()=> findAllInfos(), []);\r\n\r\n  const findAllInfos = () => {\r\n    axios\r\n    .all([\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/projects`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/reports`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/members`)])\r\n    .then(axios.spread((res1,res2, res3)=>{\r\n      const _projects = res1.data.filter((project) => project.주간보고서 == \"1\" && project.year == termYear && project.상태 != \"8.Dropped\")\r\n      setProjects(res1.data);\r\n      setThisProjects(_projects);\r\n      setReports(res2.data);\r\n      const thisReport = res2.data.filter(report =>\r\n        (new Date(report.최종수정시간).getFullYear() == termYear && new Date(report.최종수정시간).getWeek(3) == termWeek)\r\n        || (new Date(report.최종수정시간.substring(0,10)).getFullYear() == termYear && new Date(report.최종수정시간.substring(0,10)).getWeek(3) == termWeek));\r\n      setThisReport(thisReport);\r\n      setMembers(res3.data);\r\n    })\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Button color=\"primary\" onClick={() => console.log(weekTemp)}>테스트</Button>\r\n          <Widget title={\r\n            <div style={{width: 100+'%', display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center'}}>\r\n              <p style={{ fontSize:30, fontWeight: 700 }}>주간보고</p>\r\n              <div style={{display: 'flex', flexDirection: 'row'}}>\r\n                <select className=\"form-control\" value={termYear} name=\"termYear\" onChange={onChangeTerm} style={{width: 'auto', marginRight: 1 + 'rem'}}>\r\n                  {[...Array(moment(new Date()).format('YYYY') - 2019).keys()]\r\n                  .map((i)=>{\r\n                    return <option key={i} value={moment(new Date()).format('YYYY') - i}>{moment(new Date()).format('YYYY') - i}</option>\r\n                  })}\r\n                  {/* {yearOptions.map(year => <option key={year} value={year}>{year}</option>)} */}\r\n                </select>\r\n                <select className=\"form-control\" value={termWeek} name=\"termWeek\" onChange={onChangeTerm} style={{width: 'auto', marginRight: 1 + 'rem'}}>\r\n                  {weekNumOptions()}\r\n                </select>\r\n                <Button color=\"primary\" onClick={() => setTermWeek(new Date().getWeek(3)) && setTermYear(new Date().getFullYear())}>이번주보기</Button>\r\n              </div>\r\n            </div>}>\r\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 1+'rem'}}>\r\n              <UncontrolledButtonDropdown>\r\n                <DropdownToggle color={\"info\"} style={{borderRadius: 0}} >\r\n                미등록 프로젝트{' '}\r\n                {thisProjects.length - thisReport.length}/{thisProjects.length}\r\n                </DropdownToggle>\r\n                <DropdownMenu>\r\n                  {thisProjects\r\n                  .filter(project => !thisReport.find(report => report.project_id == project.id))\r\n                  .map((data, index) => {\r\n                    return (\r\n                      <DropdownItem key={index}>\r\n                        {data.프로젝트명}\r\n                      </DropdownItem>\r\n                    );\r\n                  })}\r\n                </DropdownMenu>\r\n              </UncontrolledButtonDropdown>\r\n              <div>\r\n                <Link to=\"/app/projects/reports/new\">\r\n                    <button className=\"btn btn-primary\">주간 보고서 작성</button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <Table>\r\n              <thead>\r\n                <tr className=\"report-list__tr\">\r\n                  <th className=\"col-md-4 report-list__th\">프로젝트</th>\r\n                  <th className=\"col-md-2 report-list__th\">고객사</th>\r\n                  <th className=\"col-md-2 report-list__th\">PM</th>\r\n                  <th className=\"col-md-2 report-list__th\">최종수정시간</th>\r\n                  <th className=\"col-md-1 report-list__th\">최종확인</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {reports\r\n                .filter(report => (new Date(report.최종수정시간).getFullYear() == termYear && new Date(report.최종수정시간).getWeek(3) == termWeek) \r\n                || (new Date(report.최종수정시간.substring(0,10)).getFullYear() == termYear && new Date(report.최종수정시간.substring(0,10)).getWeek(3) == termWeek))\r\n                .map(report => {\r\n                  const _project = projects.find(project => project.id === report.project_id && project.year == termYear)\r\n                  const member = members.find(({id}) => id === _project.PM);\r\n                  return (\r\n                    <tr key={report.id}>\r\n                      <td className=\"col-md-4\">\r\n                        <Link to={{pathname: `reports/${_project.id}/${report.id}/${_project.year}`}}>\r\n                          {_project.프로젝트명}\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"col-md-2 report-list__td\">{_project ? _project.고객사: \"\"}</td>\r\n                      <td className=\"col-md-2 report-list__td\">{member ? member.name : \"\"}</td>\r\n                      <td className=\"col-md-2 report-list__td\">{new Date(report.최종수정시간) == 'Invalid Date' ? report.최종수정시간 : new Date(report.최종수정시간).toLocaleString()}</td>\r\n                      <td className=\"col-md-1 report-list__td\" style={report.최종확인 == \"1\" ? {backgroundColor: 'orange'}:{}}></td>\r\n                    </tr>\r\n                )}\r\n                )}\r\n              </tbody>\r\n            </Table>\r\n          </Widget>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ReportList;"]},"metadata":{},"sourceType":"module"}