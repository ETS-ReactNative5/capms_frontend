{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\orderssales\\\\orderssales.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Col, Row, Table } from 'reactstrap';\nimport Widget from '../../components/Widget/Widget';\nimport moment from 'moment';\nimport { useCookies } from 'react-cookie';\n\nvar ProjectList = function ProjectList() {\n  var authority = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).authority : \"\";\n\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState(moment(new Date()).format(\"YYYY\")),\n      _useState2 = _slicedToArray(_useState, 2),\n      saveDate = _useState2[0],\n      setSaveDate = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projects = _useState4[0],\n      setProjects = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      teams = _useState6[0],\n      setTeams = _useState6[1];\n\n  useEffect(function () {\n    return findAllorders();\n  }, []);\n\n  var findAllorders = function findAllorders() {\n    if (authority == 0 || authority == 1) {\n      axios.defaults.headers.common['Authorization'] = cookies.token;\n      axios.all([axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/projects\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/teams\"))]).then(axios.spread(function (res1, res2) {\n        setProjects(res1.data);\n        res2.data.sort(function (a, b) {\n          return a.num - b.num;\n        });\n        setTeams(res2.data);\n      })).catch(function (err) {\n        if (cookies.token) {\n          removeCookie('token');\n        }\n\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n        window.location.href = \"/\";\n      });\n    }\n  };\n\n  var getGoals = function getGoals(term, type) {\n    var _teams = teams.filter(function (team) {\n      return team.year == saveDate;\n    });\n\n    var data = [];\n    var sum = 0;\n\n    if (term) {\n      _teams.map(function (team, idx) {\n        sum += team[\"first\" + type];\n        data.push( /*#__PURE__*/React.createElement(\"td\", {\n          key: idx,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 19\n          }\n        }, team[\"first\" + type].toFixed(2)));\n      });\n    } else {\n      _teams.map(function (team, idx) {\n        sum = sum + team[\"first\" + type] + team[\"last\" + type];\n        data.push( /*#__PURE__*/React.createElement(\"td\", {\n          key: idx,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 19\n          }\n        }, (team[\"first\" + type] + team[\"last\" + type]).toFixed(2)));\n      });\n    }\n\n    data.unshift( /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 18\n      }\n    }, sum.toFixed(2)));\n    return data;\n  };\n\n  var getResult = function getResult(term, expect, type) {\n    var _teams = teams.filter(function (team) {\n      return team.year == saveDate;\n    });\n\n    var data = [];\n    var totalsum = 0;\n\n    if (term) {\n      _teams.map(function (team, idx) {\n        var teamsum = projects.filter(function (project) {\n          return team.teamname == project[\"팀\" + type] && saveDate == project.year;\n        }).reduce(function (acc, cur) {\n          return acc + cur[\"상반기\" + expect + type];\n        }, 0);\n        totalsum += teamsum;\n        data.push( /*#__PURE__*/React.createElement(\"td\", {\n          key: idx,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 19\n          }\n        }, teamsum.toFixed(2)));\n      });\n    } else {\n      _teams.map(function (team, idx) {\n        var teamsum = projects.filter(function (project) {\n          return team.teamname == project[\"팀\" + type] && saveDate == project.year;\n        }).reduce(function (acc, cur) {\n          return acc + cur[\"상반기\" + expect + type] + cur[\"하반기\" + expect + type];\n        }, 0);\n        totalsum += teamsum;\n        data.push( /*#__PURE__*/React.createElement(\"td\", {\n          key: idx,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 19\n          }\n        }, teamsum.toFixed(2)));\n      });\n    }\n\n    data.unshift( /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 18\n      }\n    }, totalsum.toFixed(2)));\n    return data;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, authority == 0 || authority == 1 ? /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 30,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 28\n      }\n    }, \"\\uC218\\uC8FC\\uB9E4\\uCD9C\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    id: \"Year\",\n    value: saveDate,\n    onChange: function onChange(e) {\n      return setSaveDate(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, _toConsumableArray(Array(moment(new Date()).format('YYYY') - 2018).keys()).map(function (i) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: moment(new Date()).format('YYYY') - i + 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, moment(new Date()).format('YYYY') - i + 1);\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    hover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    colSpan: teams.filter(function (team) {\n      return team.year == saveDate;\n    }).length + 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"\\uC0C1\\uC138\\uB0B4\\uC5ED\\uB2E8\\uC704 (\\uBC31\\uB9CC)\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"\\uAD6C\\uBD84\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"\\uD56D\\uBAA9\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"TOTAL\"), teams.filter(function (team) {\n    return team.teamname !== \"미래차검증전략실\";\n  }).map(function (team, idx) {\n    if (team.year == saveDate) {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        key: idx,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 27\n        }\n      }, team.teamname);\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    rowSpan: \"6\",\n    style: {\n      color: \"orange\",\n      fontWeight: \"bold\",\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, \" \\uC0C1\\uBC18\\uAE30 \"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \"\\uBAA9\\uD45C\\uC218\\uC8FC\"), getGoals(true, \"order\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, \"\\uC608\\uC0C1\\uC218\\uC8FC\"), getResult(true, \"예상\", \"수주\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, \"\\uC218\\uC8FC\\uB2EC\\uC131\"), getResult(true, \"\", \"수주\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, \"\\uBAA9\\uD45C\\uB9E4\\uCD9C\"), getGoals(true, \"sale\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, \"\\uC608\\uC0C1\\uB9E4\\uCD9C\"), getResult(true, \"예상\", \"매출\")), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      color: \"red\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, \"\\uB9E4\\uCD9C\\uB2EC\\uC131\"), getResult(true, \"\", \"매출\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    rowSpan: \"6\",\n    style: {\n      color: \"orange\",\n      fontWeight: \"bold\",\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, \" \\uC5F0\\uAC04 \"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, \"\\uBAA9\\uD45C\\uC218\\uC8FC\"), getGoals(false, \"order\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"\\uC608\\uC0C1\\uC218\\uC8FC\"), getResult(false, \"예상\", \"수주\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \"\\uC218\\uC8FC\\uB2EC\\uC131\"), getResult(false, \"\", \"수주\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, \"\\uBAA9\\uD45C\\uB9E4\\uCD9C\"), getGoals(false, \"sale\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, \"\\uC608\\uC0C1\\uB9E4\\uCD9C\"), getResult(false, \"예상\", \"매출\")), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      color: \"red\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, \"\\uB9E4\\uCD9C\\uB2EC\\uC131\"), getResult(false, \"\", \"매출\"))))) : /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 30,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, \"\\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default ProjectList;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/orderssales/orderssales.js"],"names":["React","useState","useEffect","axios","Col","Row","Table","Widget","moment","useCookies","ProjectList","authority","JSON","parse","localStorage","getItem","cookies","removeCookie","Date","format","saveDate","setSaveDate","projects","setProjects","teams","setTeams","findAllorders","defaults","headers","common","token","all","get","process","env","REACT_APP_API_URL","then","spread","res1","res2","data","sort","a","b","num","catch","err","alert","window","location","href","getGoals","term","type","_teams","filter","team","year","sum","map","idx","push","toFixed","unshift","fontWeight","getResult","expect","totalsum","teamsum","project","teamname","reduce","acc","cur","fontSize","e","target","value","Array","keys","i","length","color","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Col, Row, Table } from 'reactstrap';\r\nimport Widget from '../../components/Widget/Widget';\r\nimport moment from 'moment';\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst ProjectList = () => {\r\n  const authority = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).authority : \"\";\r\n  const [cookies, removeCookie ] = useCookies(['token']);\r\n  const [saveDate , setSaveDate] = useState(moment(new Date()).format(\"YYYY\"));\r\n  const [projects , setProjects] = useState([]);\r\n  const [teams , setTeams] = useState([]);\r\n\r\n  useEffect(()=> findAllorders(), []);\r\n\r\n  const findAllorders = () => {\r\n    if(authority == 0 || authority == 1){\r\n      axios.defaults.headers.common['Authorization'] = cookies.token;\r\n      axios\r\n      .all([axios.get(`http://${process.env.REACT_APP_API_URL}/projects`),axios.get(`http://${process.env.REACT_APP_API_URL}/teams`) ])\r\n      .then(axios.spread((res1,res2)=>{\r\n        setProjects(res1.data);\r\n        res2.data.sort((a,b)=>a.num - b.num);\r\n        setTeams(res2.data);\r\n        })\r\n      )\r\n      .catch(err => {\r\n        if (cookies.token) {\r\n          removeCookie('token');\r\n        }\r\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n        window.location.href = \"/\";\r\n      });\r\n    }\r\n  }\r\n\r\n  const getGoals = (term, type) => {\r\n    const _teams = teams.filter(team => team.year == saveDate)\r\n    let data = [];\r\n    let sum = 0;\r\n    if(term){\r\n      _teams.map((team, idx) => {\r\n        sum += team[\"first\" + type];\r\n        data.push(<td key={idx}>{team[\"first\" + type].toFixed(2)}</td>);\r\n      })\r\n    }else{\r\n      _teams.map((team, idx) => {\r\n        sum = sum + team[\"first\" + type] + team[\"last\" + type]\r\n        data.push(<td key={idx}>{(team[\"first\" + type] + team[\"last\" + type]).toFixed(2)}</td>);\r\n      })\r\n    }\r\n    data.unshift(<td style={{fontWeight: 'bold'}}>{sum.toFixed(2)}</td>)\r\n    return data;\r\n  };\r\n\r\n  const getResult = (term, expect, type) => {\r\n    const _teams = teams.filter(team => team.year == saveDate)\r\n    let data = [];\r\n    let totalsum = 0;\r\n    if(term){\r\n      _teams.map((team, idx) => {\r\n        const teamsum = projects.filter(project => team.teamname == project[\"팀\"+type] && saveDate==project.year)\r\n        .reduce((acc, cur) => acc + cur[\"상반기\"+expect+type], 0)\r\n        totalsum += teamsum;\r\n        data.push(<td key={idx}>{teamsum.toFixed(2)}</td>);\r\n      })\r\n    }else{\r\n      _teams.map((team, idx) => {\r\n        const teamsum = projects.filter(project => team.teamname == project[\"팀\"+type] && saveDate==project.year)\r\n        .reduce((acc, cur) => acc + cur[\"상반기\"+expect+type] + cur[\"하반기\"+expect+type], 0)\r\n        totalsum += teamsum;\r\n        data.push(<td key={idx}>{teamsum.toFixed(2)}</td>);\r\n      })\r\n    }\r\n    data.unshift(<td style={{fontWeight: 'bold'}}>{totalsum.toFixed(2)}</td>)\r\n    return data;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          {authority == 0 || authority == 1 ?\r\n            <Widget title={<p style={{ fontSize:30, fontWeight: 700 }}>수주매출</p>}>\r\n            <select className=\"form-control\"  id=\"Year\" value={saveDate} onChange={(e) => setSaveDate(e.target.value)}>\r\n              {[...Array(moment(new Date()).format('YYYY') - 2018).keys()].map((i) => (\r\n                <option key={i} value={moment(new Date()).format('YYYY') - i + 1}>{moment(new Date()).format('YYYY') - i + 1}</option>\r\n              ))}\r\n            </select>\r\n            <br />\r\n              <Table striped hover>\r\n                <thead>\r\n                  <tr>\r\n                    <th colSpan={teams.filter(team => team.year == saveDate).length+4}>상세내역단위 (백만)</th>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>구분</th>\r\n                    <th>항목</th>\r\n                    <th>TOTAL</th>\r\n                    {teams.filter(team => team.teamname !== \"미래차검증전략실\").map((team, idx) => {\r\n                      if(team.year == saveDate){\r\n                        return(\r\n                          <th key={idx}>{team.teamname}</th> \r\n                    )}})}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {/* 상반기 부분 */}\r\n                  <tr>\r\n                    <td rowSpan='6' style={{ color: \"orange\" , fontWeight:\"bold\", textAlign: \"center\" }} > 상반기 </td>\r\n                    <td>목표수주</td>\r\n                    {getGoals(true, \"order\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>예상수주</td>\r\n                    {getResult(true, \"예상\", \"수주\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>수주달성</td>\r\n                    {getResult(true, \"\", \"수주\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>목표매출</td>\r\n                    {getGoals(true, \"sale\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>예상매출</td>\r\n                    {getResult(true, \"예상\", \"매출\")}\r\n                  </tr>\r\n                  <tr style={{ color: \"red\" , fontWeight:\"bold\" }}>\r\n                    <td>매출달성</td>\r\n                    {getResult(true, \"\", \"매출\")}\r\n                  </tr>\r\n                  {/* 하반기 부분 */}\r\n                  <tr>\r\n                    <td rowSpan='6' style={{ color: \"orange\" , fontWeight:\"bold\", textAlign: \"center\" }}> 연간 </td>\r\n                    <td>목표수주</td>\r\n                    {getGoals(false, \"order\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>예상수주</td>\r\n                    {getResult(false, \"예상\", \"수주\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>수주달성</td>\r\n                    {getResult(false, \"\", \"수주\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>목표매출</td>\r\n                    {getGoals(false, \"sale\")}\r\n                  </tr>\r\n                  <tr>\r\n                    <td>예상매출</td>\r\n                    {getResult(false, \"예상\", \"매출\")}\r\n                  </tr>\r\n                  <tr style={{ color: \"red\" , fontWeight:\"bold\" }}>\r\n                    <td>매출달성</td>\r\n                    {getResult(false, \"\", \"매출\")}\r\n                  </tr>\r\n                </tbody>\r\n              </Table>\r\n            </Widget>\r\n          :\r\n            <Widget title={\r\n              <p style={{ fontSize:30, fontWeight: 700 }}>권한이 없습니다</p>\r\n            }>\r\n            </Widget>\r\n          }\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectList;"]},"metadata":{},"sourceType":"module"}