{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\register\\\\Register.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Alert, Button, Label, FormGroup, Input } from \"reactstrap\";\nimport Widget from \"../../components/Widget\";\nimport { registerUser, registerError } from \"../../actions/register\";\nimport { loginUser } from \"../../actions/user\";\nimport Login from \"../login\";\nimport signupImg from \"../../images/signupImg.svg\";\nimport s from './Register.module.scss';\nimport img1 from \"../../images/Vector-1.svg\";\nimport img2 from \"../../images/Vector-2.svg\";\nimport img3 from \"../../images/Vector-3.svg\";\nimport img4 from \"../../images/Vector-4.svg\";\nimport axios from 'axios';\n\nvar bcrypt = require('bcrypt'); // const saltRounds = 10;\n\n\nvar Register = /*#__PURE__*/function (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  var _super = _createSuper(Register);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      id: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      name: \"\"\n    };\n    _this.doRegister = _this.doRegister.bind(_assertThisInitialized(_this));\n    _this.changeId = _this.changeId.bind(_assertThisInitialized(_this));\n    _this.changePassword = _this.changePassword.bind(_assertThisInitialized(_this));\n    _this.changeConfirmPassword = _this.changeConfirmPassword.bind(_assertThisInitialized(_this));\n    _this.changeName = _this.changeName.bind(_assertThisInitialized(_this));\n    _this.checkPassword = _this.checkPassword.bind(_assertThisInitialized(_this));\n    _this.isPasswordValid = _this.isPasswordValid.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"changeId\",\n    value: function changeId(event) {\n      // 이메일 값을 construcor state에 넣음\n      this.setState({\n        id: event.target.value\n      });\n    }\n  }, {\n    key: \"changePassword\",\n    value: function changePassword(event) {\n      // 암호 값을 construcor state에 넣음\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"changeConfirmPassword\",\n    value: function changeConfirmPassword(event) {\n      // 재입력 값을 construcor state에 넣음\n      this.setState({\n        confirmPassword: event.target.value\n      });\n    }\n  }, {\n    key: \"changeName\",\n    value: function changeName(event) {\n      // 이름 값을 construcor state에 넣음\n      this.setState({\n        name: event.target.value\n      });\n    }\n  }, {\n    key: \"checkPassword\",\n    value: function checkPassword() {\n      var _this2 = this;\n\n      // Password 값이 없을땐 if문 둘이 같지않을때는 else문 출력\n      if (!this.isPasswordValid()) {\n        if (!this.state.password) {\n          this.props.dispatch(registerError(\"Password field is empty\"));\n        } else {\n          this.props.dispatch(registerError(\"Passwords are not equal\"));\n        }\n\n        setTimeout(function () {\n          _this2.props.dispatch(registerError());\n        }, 3 * 1000);\n      }\n    }\n  }, {\n    key: \"isPasswordValid\",\n    value: function isPasswordValid() {\n      // 암호가 존재하고 그 암호와 재입력 암호가 같으면 1 아니면 0 반환\n      return this.state.password && this.state.password === this.state.confirmPassword;\n    }\n  }, {\n    key: \"confirmPasswordClassName\",\n    value: function confirmPasswordClassName() {\n      var confirmPassword = this.state.confirmPassword;\n\n      if (confirmPassword) {\n        return this.isPasswordValid() ? 'is-valid' : 'is-invalid';\n      }\n    }\n  }, {\n    key: \"renderFeedbackMessage\",\n    value: function renderFeedbackMessage() {\n      var confirmPassword = this.state.confirmPassword;\n\n      if (confirmPassword) {\n        if (!this.isPasswordValid()) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"invalid-feedback\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 11\n            }\n          }, \"\\uD328\\uC2A4\\uC6CC\\uB4DC\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4\");\n        }\n      }\n    }\n  }, {\n    key: \"doRegister\",\n    value: function doRegister(e) {\n      e.preventDefault(); // 새로고침 안됨\n      // bcrypt.hash(this.state.password, 10, function(err, hash) {\n      //   axios.post(`http://${process.env.REACT_APP_API_URL}/register`, //DB연동\n      //   {id: this.state.id, password: hash, name: this.state.name}).then((response)=>{\n      //     console.log(response);\n      //   });        \n      // });\n\n      this.props.dispatch( //rgisterUser에 값 삽입\n      registerUser({\n        creds: {\n          id: this.state.id,\n          password: this.state.password\n        },\n        history: this.props.history\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _ref = this.props.location.state || {\n        from: {\n          pathname: \"/app\"\n        }\n      },\n          from = _ref.from; // eslint-disable-line\n      // cant access login page while logged in\n\n\n      if (Login.isAuthenticated(localStorage.getItem(\"authenticated\"))) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: from,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth-page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Widget, {\n        className: \"widget-auth my-auto\",\n        title: /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"mt-0 mb-2\",\n          style: {\n            fontSize: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }\n        }, \"Sign up\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"widget-auth-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, \"Welcome! Please create your account\"), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"mt\",\n        onSubmit: this.doLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }, this.props.errorMessage && /*#__PURE__*/React.createElement(Alert, {\n        className: \"alert-sm\",\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      }, this.props.errorMessage), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }\n      }, \"ID\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        defaultValue: \"\",\n        onChange: this.changeId,\n        required: true,\n        name: \"id\",\n        placeholder: \"ID\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }, \"\\uBE44\\uBC00\\uBC88\\uD638\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        defaultValue: \"\",\n        onChange: this.changePassword,\n        type: \"password\",\n        required: true,\n        name: \"password\",\n        placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }\n      }, \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control \".concat(this.confirmPasswordClassName()),\n        defaultValue: \"\",\n        onChange: this.changeConfirmPassword,\n        type: \"password\",\n        required: true,\n        name: \"password\",\n        placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC7AC\\uC785\\uB825\\uD558\\uC138\\uC694\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }), this.renderFeedbackMessage()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      }, \"\\uC774\\uB984\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        defaultValue: \"\",\n        onChange: this.changeName,\n        required: true,\n        name: \"name\",\n        placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        color: \"warning\",\n        className: \"auth-btn mb-3\",\n        size: \"sm\",\n        onClick: function onClick(e) {\n          return _this3.doRegister(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }\n      }, this.props.isFetching ? \"Loading...\" : \"Signup\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"widget-auth-info text-center mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }\n      }, \"Or\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      }, \"Have an account?\", \" \", /*#__PURE__*/React.createElement(Link, {\n        to: \"login\",\n        className: \"ml-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }, \"Login here\")))), /*#__PURE__*/React.createElement(\"img\", {\n        src: signupImg,\n        alt: \"signin\",\n        className: \"backImg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\n_defineProperty(Register, \"propTypes\", {\n  dispatch: PropTypes.func.isRequired\n});\n\nfunction mapStateToProps(state) {\n  return {\n    isFetching: state.register.isFetching,\n    errorMessage: state.register.errorMessage\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Register));","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/register/Register.js"],"names":["React","PropTypes","withRouter","Redirect","Link","connect","Alert","Button","Label","FormGroup","Input","Widget","registerUser","registerError","loginUser","Login","s","axios","bcrypt","require","Register","props","state","id","password","confirmPassword","name","doRegister","bind","changeId","changePassword","changeConfirmPassword","changeName","checkPassword","isPasswordValid","event","setState","target","value","dispatch","setTimeout","e","preventDefault","creds","history","location","from","pathname","isAuthenticated","localStorage","getItem","fontSize","doLogin","errorMessage","confirmPasswordClassName","renderFeedbackMessage","isFetching","signupImg","Component","func","isRequired","mapStateToProps","register"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Alert, Button, Label, FormGroup, Input } from \"reactstrap\";\r\nimport Widget from \"../../components/Widget\";\r\nimport { registerUser, registerError } from \"../../actions/register\";\r\nimport { loginUser } from \"../../actions/user\";\r\nimport Login from \"../login\";\r\nimport signupImg from \"../../images/signupImg.svg\";\r\nimport s from './Register.module.scss';\r\n\r\nimport img1 from \"../../images/Vector-1.svg\";\r\nimport img2 from \"../../images/Vector-2.svg\";\r\nimport img3 from \"../../images/Vector-3.svg\";\r\nimport img4 from \"../../images/Vector-4.svg\";\r\n\r\nimport axios from 'axios';\r\nconst bcrypt = require('bcrypt');\r\n// const saltRounds = 10;\r\n\r\nclass Register extends React.Component {\r\n  static propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      id: \"\", \r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      name: \"\",\r\n    };\r\n\r\n    this.doRegister = this.doRegister.bind(this);\r\n    this.changeId = this.changeId.bind(this);\r\n    this.changePassword = this.changePassword.bind(this);\r\n    this.changeConfirmPassword = this.changeConfirmPassword.bind(this);\r\n    this.changeName = this.changeName.bind(this);\r\n    this.checkPassword = this.checkPassword.bind(this);\r\n    this.isPasswordValid = this.isPasswordValid.bind(this);\r\n  }\r\n\r\n  changeId(event) { // 이메일 값을 construcor state에 넣음\r\n    this.setState({ id: event.target.value });\r\n  }\r\n\r\n  changePassword(event) { // 암호 값을 construcor state에 넣음\r\n    this.setState({ password: event.target.value });\r\n  }\r\n\r\n  changeConfirmPassword(event) { // 재입력 값을 construcor state에 넣음\r\n    this.setState({ confirmPassword: event.target.value });\r\n  }\r\n  changeName(event) { // 이름 값을 construcor state에 넣음\r\n    this.setState({ name: event.target.value });\r\n  }\r\n\r\n  checkPassword() { // Password 값이 없을땐 if문 둘이 같지않을때는 else문 출력\r\n    if (!this.isPasswordValid()) {\r\n      if (!this.state.password) {\r\n        this.props.dispatch(registerError(\"Password field is empty\"));\r\n      } else {\r\n        this.props.dispatch(registerError(\"Passwords are not equal\"));\r\n      }\r\n      setTimeout(() => {\r\n        this.props.dispatch(registerError());\r\n      }, 3 * 1000);\r\n    }\r\n  }\r\n\r\n  isPasswordValid() { // 암호가 존재하고 그 암호와 재입력 암호가 같으면 1 아니면 0 반환\r\n    return (\r\n      this.state.password && this.state.password === this.state.confirmPassword\r\n    );\r\n  }\r\n\r\n  confirmPasswordClassName() {\r\n    const { confirmPassword } = this.state;\r\n  \r\n    if (confirmPassword) {\r\n      return this.isPasswordValid() ? 'is-valid' : 'is-invalid';\r\n    }\r\n  }\r\n  renderFeedbackMessage() {\r\n    const { confirmPassword } = this.state;\r\n  \r\n    if (confirmPassword) {\r\n      if (!this.isPasswordValid()) {\r\n        return (\r\n          <div className=\"invalid-feedback\">패스워드가 일치하지 않습니다</div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  doRegister(e) {\r\n    e.preventDefault();// 새로고침 안됨\r\n    \r\n    // bcrypt.hash(this.state.password, 10, function(err, hash) {\r\n    //   axios.post(`http://${process.env.REACT_APP_API_URL}/register`, //DB연동\r\n    //   {id: this.state.id, password: hash, name: this.state.name}).then((response)=>{\r\n    //     console.log(response);\r\n    //   });        \r\n    // });\r\n\r\n    this.props.dispatch( //rgisterUser에 값 삽입\r\n      registerUser({\r\n        creds: {\r\n          id: this.state.id,\r\n          password: this.state.password,\r\n        },\r\n        history: this.props.history,\r\n      })\r\n    );\r\n  }\r\n \r\n  \r\n\r\n  render() {\r\n    const { from } = this.props.location.state || {\r\n      from: { pathname: \"/app\" },\r\n    }; // eslint-disable-line\r\n\r\n    // cant access login page while logged in\r\n    if (Login.isAuthenticated(localStorage.getItem(\"authenticated\"))) {\r\n      return <Redirect to={from} />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"auth-page\">\r\n        <Widget\r\n          className=\"widget-auth my-auto\"\r\n          title={\r\n            <h3 className=\"mt-0 mb-2\" style={{ fontSize: 40 }}>\r\n              Sign up\r\n            </h3>\r\n          }\r\n        >\r\n          <p className=\"widget-auth-info\">\r\n            Welcome! Please create your account\r\n          </p>\r\n          <form className=\"mt\" onSubmit={this.doLogin}>\r\n            {this.props.errorMessage && (\r\n              <Alert className=\"alert-sm\" color=\"danger\">\r\n                {this.props.errorMessage}\r\n              </Alert>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <Label for=\"search-input1\">ID</Label>\r\n              <input\r\n                className=\"form-control\"\r\n                defaultValue={\"\"}\r\n                onChange={this.changeId}\r\n                required\r\n                name=\"id\"\r\n                placeholder=\"ID를 입력하세요\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group mb-2\">\r\n              <Label for=\"search-input1\">비밀번호</Label>\r\n              <input\r\n                className=\"form-control\"\r\n                defaultValue={\"\"}\r\n                onChange={this.changePassword}\r\n                type=\"password\"\r\n                required\r\n                name=\"password\"\r\n                placeholder=\"비밀번호를 입력하세요\"\r\n              />\r\n            </div>\r\n             <div className=\"form-group mb-3\">\r\n              <Label for=\"search-input1\">비밀번호 확인</Label>\r\n              <input\r\n                className={`form-control ${this.confirmPasswordClassName()}`}\r\n                defaultValue={\"\"}\r\n                onChange={this.changeConfirmPassword}\r\n                type=\"password\"\r\n                required\r\n                name=\"password\"\r\n                placeholder=\"비밀번호를 재입력하세요\"\r\n              />\r\n              {this.renderFeedbackMessage()}\r\n            </div> \r\n            \r\n            <div className=\"form-group mb-4\">\r\n              <Label for=\"search-input1\">이름</Label>\r\n              <input\r\n                className=\"form-control\"\r\n                defaultValue={\"\"}\r\n                onChange={this.changeName}\r\n                required\r\n                name=\"name\"\r\n                placeholder=\"이름을 입력하세요\"\r\n              />\r\n            </div> \r\n            <Button\r\n              type=\"submit\"\r\n              color=\"warning\"\r\n              className=\"auth-btn mb-3\"\r\n              size=\"sm\"\r\n              onClick={(e) => this.doRegister(e)}\r\n            >\r\n              {this.props.isFetching ? \"Loading...\" : \"Signup\"}\r\n            </Button>\r\n            <p className=\"widget-auth-info text-center mb-0\">Or</p>\r\n           \r\n            <div className={\"d-flex align-items-center\"}>\r\n              Have an account?{\" \"}\r\n              <Link to=\"login\" className={\"ml-1\"}>\r\n                Login here\r\n              </Link>\r\n            </div>\r\n          </form>\r\n        </Widget>\r\n        <img\r\n          src={signupImg}\r\n          alt=\"signin\"\r\n          className={\"backImg\"}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isFetching: state.register.isFetching,\r\n    errorMessage: state.register.errorMessage,\r\n  };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Register));\r\n"]},"metadata":{},"sourceType":"module"}