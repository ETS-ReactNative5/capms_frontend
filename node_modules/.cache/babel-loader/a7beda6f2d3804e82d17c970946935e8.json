{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\capms\\\\pmsproject\\\\capms_frontend\\\\src\\\\components\\\\Manage\\\\Tool.js\";\nimport React from 'react';\nimport { Table, Button, Input } from \"reactstrap\";\nimport axios from \"axios\";\nimport { Cookies } from \"react-cookie\";\nvar cookies = new Cookies();\n\nvar Tool = /*#__PURE__*/function (_React$Component) {\n  _inherits(Tool, _React$Component);\n\n  var _super = _createSuper(Tool);\n\n  function Tool(props) {\n    var _this;\n\n    _classCallCheck(this, Tool);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getRecord\", function (num) {\n      var product = _this.state.tools.find(function (item) {\n        return item.num === num;\n      });\n\n      return product;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEdit\", function (num) {\n      var tempProduct = _this.state.tools;\n      var index = tempProduct.indexOf(_this.getRecord(num));\n      var selectedRecord = tempProduct[index];\n\n      _this.setState({\n        num: selectedRecord['num'],\n        toolname: selectedRecord['toolname']\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateValue\", function (e, test) {\n      if (test === \"toolname\") {\n        _this.state.toolname = e.target.value;\n      }\n\n      var tempArr = [_this.state.toolname];\n\n      _this.setState({\n        updateEdit: tempArr\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSave\", function (num) {\n      if (num !== '') {\n        // Update 조건문\n        var SaveRecord = _this.state.tools;\n        var index = SaveRecord.indexOf(_this.getRecord(num));\n        var Record = SaveRecord[index];\n        Record['toolname'] = _this.state.updateEdit[0];\n\n        _this.setState({\n          tools: _toConsumableArray(_this.state.tools),\n          num: \"\",\n          toolname: \"\"\n        });\n\n        axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/tools/update\"), //DB연동\n        {\n          num: _this.state.num,\n          toolname: _this.state.toolname\n        }).then(function (response) {\n          console.log(response);\n        }).catch(function (err) {\n          if (cookies.get(\"token\")) {\n            cookies.remove(\"token\");\n          }\n\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n          window.location.href = \"/\";\n        });\n        window.location.reload();\n      } // Insert 조건문\n      else {\n          var MaxNum = Math.max.apply(Math, _toConsumableArray(_this.state.tools.map(function (item) {\n            return item.num;\n          })));\n          var newArr = [];\n          newArr['toolname'] = _this.state.updateEdit[0];\n\n          _this.setState({\n            tools: [].concat(_toConsumableArray(_this.state.tools), [newArr]),\n            num: \"\",\n            toolname: \"\"\n          });\n\n          axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/tools/add\"), //DB연동\n          {\n            num: MaxNum + 1,\n            toolname: _this.state.toolname\n          }).then(function (response) {\n            console.log(response);\n          }).catch(function (err) {\n            if (cookies.get(\"token\")) {\n              cookies.remove(\"token\");\n            }\n\n            alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n            window.location.href = \"/\";\n          });\n          window.location.reload();\n        }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDelete\", function (num) {\n      if (window.confirm(\"정말 삭제하시겠습니까??\")) {\n        //확인\n        var tempProduct = _this.state.tools.filter(function (item) {\n          return item.num !== num;\n        });\n\n        _this.setState({\n          members: tempProduct,\n          num: \"\",\n          toolname: \"\"\n        });\n\n        axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/tools/delete\"), //DB연동\n        {\n          num: num\n        }).then(function (response) {\n          console.log(response);\n        }).catch(function (err) {\n          if (cookies.get(\"token\")) {\n            cookies.remove(\"token\");\n          }\n\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n          window.location.href = \"/\";\n        });\n        window.location.reload();\n      } else {\n        //취소\n        return;\n      }\n    });\n\n    _this.state = {\n      tools: \"\",\n      num: \"\",\n      toolname: \"\",\n      updateEdit: [],\n      onEdit: _this.onEdit,\n      onDelete: _this.onDelete,\n      updateValue: _this.updateValue,\n      onSave: _this.onSave\n    };\n    return _this;\n  }\n\n  _createClass(Tool, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      axios.defaults.headers.common['Authorization'] = cookies.get(\"token\");\n      this.findAllTools();\n    }\n  }, {\n    key: \"findAllTools\",\n    value: function findAllTools() {\n      var _this2 = this;\n\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/tools\")).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        _this2.setState({\n          tools: data\n        });\n      }).catch(function (err) {\n        if (cookies.get(\"token\")) {\n          cookies.remove(\"token\");\n        }\n\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n        window.location.href = \"/\";\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tool\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: 700,\n          fontSize: 1.5 + 'rem'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      }, \"\\uB3C4\\uAD6C \\uAD00\\uB9AC\"), /*#__PURE__*/React.createElement(Table, {\n        className: \"manage__table table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"fs-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 19\n        }\n      }, \"NO\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 19\n        }\n      }, \"\\uB3C4\\uAD6C\\uBA85\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 26\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 32\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        value: this.state.toolname,\n        onChange: function onChange(e) {\n          _this3.state.updateValue(e, \"toolname\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 38\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 19\n        }\n      }, \"Action\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 35\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        color: \"info\",\n        size: \"sm\",\n        onClick: function onClick() {\n          _this3.state.onSave(_this3.state.num);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 41\n        }\n      }, this.state.num ? \"변경\" : \"추가\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }\n      }, this.state.tools ? this.state.tools.map(function (c) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: c.num,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            width: \"50px\",\n            textAlign: \"center\"\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 23\n          }\n        }, c.num), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 23\n          }\n        }, c.toolname), /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            width: \"20px\"\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          color: \"warning\",\n          className: \"UpdateBtn\",\n          size: \"sm\",\n          variant: \"primary\",\n          onClick: function onClick() {\n            _this3.state.onEdit(c.num);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }\n        }, \"\\uC218\\uC815\"), \"\\xA0\\xA0\", /*#__PURE__*/React.createElement(Button, {\n          color: \"default\",\n          className: \"UpdateBtn\",\n          size: \"sm\",\n          variant: \"danger\",\n          onClick: function onClick() {\n            _this3.state.onDelete(c.num);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }\n        }, \"\\uC0AD\\uC81C\")));\n      }) : /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 26\n        }\n      }, \"\\uB370\\uC774\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"))))));\n    }\n  }]);\n\n  return Tool;\n}(React.Component);\n\nexport default Tool;","map":{"version":3,"sources":["C:/Users/hlshi/Desktop/capms/pmsproject/capms_frontend/src/components/Manage/Tool.js"],"names":["React","Table","Button","Input","axios","Cookies","cookies","Tool","props","num","product","state","tools","find","item","tempProduct","index","indexOf","getRecord","selectedRecord","setState","toolname","e","test","target","value","tempArr","updateEdit","SaveRecord","Record","post","process","env","REACT_APP_API_URL","then","response","console","log","catch","err","get","remove","alert","window","location","href","reload","MaxNum","Math","max","map","newArr","confirm","filter","members","onEdit","onDelete","updateValue","onSave","defaults","headers","common","findAllTools","res","data","fontWeight","fontSize","c","width","textAlign","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACIC,KADJ,EAEIC,MAFJ,EAGIC,KAHJ,QAIO,YAJP;AAKA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,IAAMC,OAAO,GAAG,IAAID,OAAJ,EAAhB;;IAEME,I;;;;;AAEF,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;;AADgB,gEAgBN,UAACC,GAAD,EAAS;AACnB,UAAMC,OAAO,GAAG,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,IAAjB,CAAsB,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACL,GAAL,KAAaA,GAAjB;AAAA,OAA1B,CAAhB;;AACA,aAAOC,OAAP;AACD,KAnBiB;;AAAA,6DAqBT,UAACD,GAAD,EAAQ;AACf,UAAMM,WAAW,GAAG,MAAKJ,KAAL,CAAWC,KAA/B;AACA,UAAMI,KAAK,GAAID,WAAW,CAACE,OAAZ,CAAoB,MAAKC,SAAL,CAAeT,GAAf,CAApB,CAAf;AACA,UAAMU,cAAc,GAAGJ,WAAW,CAACC,KAAD,CAAlC;;AACA,YAAKI,QAAL,CAAc;AACZX,QAAAA,GAAG,EAAGU,cAAc,CAAC,KAAD,CADR;AAEZE,QAAAA,QAAQ,EAAGF,cAAc,CAAC,UAAD;AAFb,OAAd;AAID,KA7BiB;;AAAA,kEA+BL,UAACG,CAAD,EAAGC,IAAH,EAAW;AACtB,UAAGA,IAAI,KAAK,UAAZ,EAAuB;AACrB,cAAKZ,KAAL,CAAWU,QAAX,GAAsBC,CAAC,CAACE,MAAF,CAASC,KAA/B;AACD;;AACD,UAAMC,OAAO,GAAG,CAAC,MAAKf,KAAL,CAAWU,QAAZ,CAAhB;;AACA,YAAKD,QAAL,CAAc;AACZO,QAAAA,UAAU,EAAGD;AADD,OAAd;AAGD,KAvCiB;;AAAA,6DAyCT,UAACjB,GAAD,EAAQ;AACf,UAAGA,GAAG,KAAG,EAAT,EAAY;AAAE;AACZ,YAAMmB,UAAU,GAAG,MAAKjB,KAAL,CAAWC,KAA9B;AACA,YAAMI,KAAK,GAAGY,UAAU,CAACX,OAAX,CAAmB,MAAKC,SAAL,CAAeT,GAAf,CAAnB,CAAd;AACA,YAAMoB,MAAM,GAAGD,UAAU,CAACZ,KAAD,CAAzB;AACAa,QAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,MAAKlB,KAAL,CAAWgB,UAAX,CAAsB,CAAtB,CAArB;;AACA,cAAKP,QAAL,CAAc;AACZR,UAAAA,KAAK,qBAAO,MAAKD,KAAL,CAAWC,KAAlB,CADO;AAEZH,UAAAA,GAAG,EAAE,EAFO;AAEFY,UAAAA,QAAQ,EAAC;AAFP,SAAd;;AAIAjB,QAAAA,KAAK,CAAC0B,IAAN,kBAAqBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,oBAAmE;AACnE;AAACxB,UAAAA,GAAG,EAAE,MAAKE,KAAL,CAAWF,GAAjB;AAAsBY,UAAAA,QAAQ,EAAE,MAAKV,KAAL,CAAWU;AAA3C,SADA,EAECa,IAFD,CAEM,UAACC,QAAD,EAAY;AAClBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACC,SAJD,EAKCG,KALD,CAKO,UAAAC,GAAG,EAAI;AACZ,cAAIjC,OAAO,CAACkC,GAAR,CAAY,OAAZ,CAAJ,EAA0B;AACxBlC,YAAAA,OAAO,CAACmC,MAAR,CAAe,OAAf;AACD;;AACDC,UAAAA,KAAK,CAAC,0BAAD,CAAL;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,SAXD;AAYAF,QAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB;AACD,OAtBD,CAuBA;AAvBA,WAwBI;AACF,cAAMC,MAAM,GAAGC,IAAI,CAACC,GAAL,OAAAD,IAAI,qBAAQ,MAAKrC,KAAL,CAAWC,KAAX,CAAiBsC,GAAjB,CAAqB,UAAApC,IAAI;AAAA,mBAAEA,IAAI,CAACL,GAAP;AAAA,WAAzB,CAAR,EAAnB;AACA,cAAM0C,MAAM,GAAG,EAAf;AACAA,UAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,MAAKxC,KAAL,CAAWgB,UAAX,CAAsB,CAAtB,CAArB;;AAEA,gBAAKP,QAAL,CAAc;AACZR,YAAAA,KAAK,+BAAO,MAAKD,KAAL,CAAWC,KAAlB,IAAyBuC,MAAzB,EADO;AAEZ1C,YAAAA,GAAG,EAAE,EAFO;AAEFY,YAAAA,QAAQ,EAAC;AAFP,WAAd;;AAKAjB,UAAAA,KAAK,CAAC0B,IAAN,kBAAqBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,iBAAgE;AAChE;AAACxB,YAAAA,GAAG,EAAEsC,MAAM,GAAC,CAAb;AAAgB1B,YAAAA,QAAQ,EAAE,MAAKV,KAAL,CAAWU;AAArC,WADA,EAECa,IAFD,CAEM,UAACC,QAAD,EAAY;AAChBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACD,WAJD,EAKCG,KALD,CAKO,UAAAC,GAAG,EAAI;AACZ,gBAAIjC,OAAO,CAACkC,GAAR,CAAY,OAAZ,CAAJ,EAA0B;AACxBlC,cAAAA,OAAO,CAACmC,MAAR,CAAe,OAAf;AACD;;AACDC,YAAAA,KAAK,CAAC,0BAAD,CAAL;AACAC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,WAXD;AAYAF,UAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB;AACD;AACF,KA1FiB;;AAAA,+DA6FP,UAACrC,GAAD,EAAS;AAClB,UAAIkC,MAAM,CAACS,OAAP,CAAe,eAAf,CAAJ,EAAoC;AAAK;AACvC,YAAMrC,WAAW,GAAG,MAAKJ,KAAL,CAAWC,KAAX,CAAiByC,MAAjB,CAAwB,UAAAvC,IAAI;AAAA,iBAAGA,IAAI,CAACL,GAAL,KAAaA,GAAhB;AAAA,SAA5B,CAApB;;AACA,cAAKW,QAAL,CAAc;AACZkC,UAAAA,OAAO,EAAGvC,WADE;AAEZN,UAAAA,GAAG,EAAE,EAFO;AAEFY,UAAAA,QAAQ,EAAC;AAFP,SAAd;;AAIAjB,QAAAA,KAAK,CAAC0B,IAAN,kBAAqBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,oBAAmE;AACjE;AAACxB,UAAAA,GAAG,EAAEA;AAAN,SADF,EAECyB,IAFD,CAEM,UAACC,QAAD,EAAY;AAChBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACD,SAJD,EAKCG,KALD,CAKO,UAAAC,GAAG,EAAI;AACZ,cAAIjC,OAAO,CAACkC,GAAR,CAAY,OAAZ,CAAJ,EAA0B;AACxBlC,YAAAA,OAAO,CAACmC,MAAR,CAAe,OAAf;AACD;;AACDC,UAAAA,KAAK,CAAC,0BAAD,CAAL;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,SAXD;AAYAF,QAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB;AACD,OAnBD,MAmBK;AAAI;AACP;AACD;AACF,KApHiB;;AAGhB,UAAKnC,KAAL,GAAW;AACTC,MAAAA,KAAK,EAAC,EADG;AAETH,MAAAA,GAAG,EAAC,EAFK;AAGTY,MAAAA,QAAQ,EAAC,EAHA;AAITM,MAAAA,UAAU,EAAE,EAJH;AAKT4B,MAAAA,MAAM,EAAG,MAAKA,MALL;AAMTC,MAAAA,QAAQ,EAAG,MAAKA,QANP;AAOTC,MAAAA,WAAW,EAAG,MAAKA,WAPV;AAQTC,MAAAA,MAAM,EAAG,MAAKA;AARL,KAAX;AAHgB;AAcjB;;;;WAuGD,6BAAmB;AACjBtD,MAAAA,KAAK,CAACuD,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDvD,OAAO,CAACkC,GAAR,CAAY,OAAZ,CAAjD;AACA,WAAKsB,YAAL;AACD;;;WAED,wBAAc;AAAA;;AACZ1D,MAAAA,KAAK,CAACoC,GAAN,kBAAoBT,OAAO,CAACC,GAAR,CAAYC,iBAAhC,aACCC,IADD,CACM,UAAA6B,GAAG;AAAA,eAAEA,GAAG,CAACC,IAAN;AAAA,OADT,EAEC9B,IAFD,CAEM,UAAC8B,IAAD,EAAQ;AACZ,QAAA,MAAI,CAAC5C,QAAL,CAAc;AAACR,UAAAA,KAAK,EAACoD;AAAP,SAAd;AACD,OAJD,EAKC1B,KALD,CAKO,UAAAC,GAAG,EAAI;AACZ,YAAIjC,OAAO,CAACkC,GAAR,CAAY,OAAZ,CAAJ,EAA0B;AACxBlC,UAAAA,OAAO,CAACmC,MAAR,CAAe,OAAf;AACD;;AACDC,QAAAA,KAAK,CAAC,0BAAD,CAAL;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,OAXD;AAYD;;;WAED,kBAAQ;AAAA;;AACJ,0BACE,uDACA;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,KAAK,EAAE;AAAEoB,UAAAA,UAAU,EAAE,GAAd;AAAmBC,UAAAA,QAAQ,EAAE,MAAI;AAAjC,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADF,eAEE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAN,eAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAZ,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP,eAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAb,eAAmB,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAE,KAAKvD,KAAL,CAAWU,QAArC;AAA+C,QAAA,QAAQ,EAAE,kBAACC,CAAD,EAAO;AAAC,UAAA,MAAI,CAACX,KAAL,CAAW8C,WAAX,CAAuBnC,CAAvB,EAAyB,UAAzB;AAAqC,SAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAnB,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAV,eAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhB,eAAsB,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAqB,QAAA,IAAI,EAAC,IAA1B;AAA+B,QAAA,OAAO,EAAE,mBAAI;AAAC,UAAA,MAAI,CAACX,KAAL,CAAW+C,MAAX,CAAkB,MAAI,CAAC/C,KAAL,CAAWF,GAA7B;AAAkC,SAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkF,KAAKE,KAAL,CAAWF,GAAX,GAAiB,IAAjB,GAAwB,IAA1G,CAAtB,CAHF,CADF,CADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKE,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBsC,GAAjB,CAAqB,UAAAiB,CAAC,EAAI;AAC5C,4BACE;AAAI,UAAA,GAAG,EAAEA,CAAC,CAAC1D,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAI,UAAA,KAAK,EAAE;AAAE2D,YAAAA,KAAK,EAAE,MAAT;AAAiBC,YAAAA,SAAS,EAAE;AAA5B,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmDF,CAAC,CAAC1D,GAArD,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAK0D,CAAC,CAAC9C,QAAP,CAFF,eAGE;AAAI,UAAA,KAAK,EAAE;AAAE+C,YAAAA,KAAK,EAAE;AAAT,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,MAAD;AAAQ,UAAA,KAAK,EAAE,SAAf;AAA0B,UAAA,SAAS,EAAC,WAApC;AAAgD,UAAA,IAAI,EAAC,IAArD;AAA0D,UAAA,OAAO,EAAC,SAAlE;AAA4E,UAAA,OAAO,EAAE,mBAAI;AAAC,YAAA,MAAI,CAACzD,KAAL,CAAW4C,MAAX,CAAkBY,CAAC,CAAC1D,GAApB;AAAyB,WAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,2BAEE,oBAAC,MAAD;AAAQ,UAAA,KAAK,EAAE,SAAf;AAA0B,UAAA,SAAS,EAAC,WAApC;AAAgD,UAAA,IAAI,EAAC,IAArD;AAA0D,UAAA,OAAO,EAAC,QAAlE;AAA0E,UAAA,OAAO,EAAE,mBAAI;AAAC,YAAA,MAAI,CAACE,KAAL,CAAW6C,QAAX,CAAoBW,CAAC,CAAC1D,GAAtB;AAA2B,WAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,CAHF,CADF;AASD,OAVmB,CAAnB,gBAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAI,QAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8DAAJ,CAXP,CARF,CAFF,CADA,CADF;AA6BH;;;;EAzKcT,KAAK,CAACsE,S;;AA4KzB,eAAe/D,IAAf","sourcesContent":["import React from 'react';\r\nimport {\r\n    Table,\r\n    Button,\r\n    Input\r\n} from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport { Cookies } from \"react-cookie\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nclass Tool extends React.Component{\r\n     \r\n    constructor(props){\r\n      super(props);\r\n\r\n      this.state={\r\n        tools:\"\", \r\n        num:\"\",\r\n        toolname:\"\",\r\n        updateEdit :[],\r\n        onEdit : this.onEdit,\r\n        onDelete : this.onDelete,\r\n        updateValue : this.updateValue,\r\n        onSave : this.onSave,\r\n\r\n      };\r\n    }\r\n\r\n    getRecord = (num) => {\r\n      const product = this.state.tools.find(item => item.num === num);\r\n      return product;\r\n    }\r\n\r\n    onEdit = (num) =>{\r\n      const tempProduct = this.state.tools;\r\n      const index  = tempProduct.indexOf(this.getRecord(num));\r\n      const selectedRecord = tempProduct[index];\r\n      this.setState({\r\n        num : selectedRecord['num'],\r\n        toolname : selectedRecord['toolname'],\r\n      })\r\n    }\r\n\r\n    updateValue= (e,test) =>{\r\n      if(test === \"toolname\"){\r\n        this.state.toolname = e.target.value;\r\n      }\r\n      const tempArr = [this.state.toolname];\r\n      this.setState({\r\n        updateEdit : tempArr\r\n      })\r\n    }\r\n\r\n    onSave = (num) =>{\r\n      if(num!==''){ // Update 조건문\r\n        const SaveRecord = this.state.tools;\r\n        const index = SaveRecord.indexOf(this.getRecord(num));\r\n        const Record = SaveRecord[index];\r\n        Record['toolname'] = this.state.updateEdit[0];\r\n        this.setState({\r\n          tools : [...this.state.tools],\r\n          num :\"\" , toolname:\"\",\r\n        })\r\n        axios.post(`http://${process.env.REACT_APP_API_URL}/tools/update`, //DB연동\r\n        {num: this.state.num, toolname: this.state.toolname})\r\n        .then((response)=>{\r\n        console.log(response);\r\n        })\r\n        .catch(err => {\r\n          if (cookies.get(\"token\")) {\r\n            cookies.remove(\"token\");\r\n          }\r\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n          window.location.href = \"/\";\r\n        });\r\n        window.location.reload();\r\n      }\r\n      // Insert 조건문\r\n      else{ \r\n        const MaxNum = Math.max(...this.state.tools.map(item=>item.num))\r\n        const newArr = [];\r\n        newArr['toolname'] = this.state.updateEdit[0];\r\n\r\n        this.setState({\r\n          tools : [...this.state.tools, newArr],\r\n          num :\"\" , toolname:\"\"\r\n        })\r\n\r\n        axios.post(`http://${process.env.REACT_APP_API_URL}/tools/add`, //DB연동\r\n        {num: MaxNum+1, toolname: this.state.toolname})\r\n        .then((response)=>{\r\n          console.log(response);\r\n        })\r\n        .catch(err => {\r\n          if (cookies.get(\"token\")) {\r\n            cookies.remove(\"token\");\r\n          }\r\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n          window.location.href = \"/\";\r\n        });\r\n        window.location.reload();\r\n      }\r\n    }\r\n\r\n    //DELETE 하기 \r\n    onDelete = (num) => {\r\n      if (window.confirm(\"정말 삭제하시겠습니까??\")){    //확인\r\n        const tempProduct = this.state.tools.filter(item=> item.num !== num);\r\n        this.setState({\r\n          members : tempProduct,\r\n          num :\"\" , toolname:\"\",\r\n        })\r\n        axios.post(`http://${process.env.REACT_APP_API_URL}/tools/delete`, //DB연동\r\n          {num: num})\r\n        .then((response)=>{\r\n          console.log(response);\r\n        })\r\n        .catch(err => {\r\n          if (cookies.get(\"token\")) {\r\n            cookies.remove(\"token\");\r\n          }\r\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n          window.location.href = \"/\";\r\n        });\r\n        window.location.reload();\r\n      }else{   //취소\r\n        return;\r\n      }\r\n    }\r\n    componentDidMount(){\r\n      axios.defaults.headers.common['Authorization'] = cookies.get(\"token\");\r\n      this.findAllTools();\r\n    }\r\n\r\n    findAllTools(){\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/tools`)\r\n      .then(res=>res.data)\r\n      .then((data)=>{\r\n        this.setState({tools:data});\r\n      })\r\n      .catch(err => {\r\n        if (cookies.get(\"token\")) {\r\n          cookies.remove(\"token\");\r\n        }\r\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n        window.location.href = \"/\";\r\n      });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n          <>\r\n          <div className=\"tool\">\r\n            <p style={{ fontWeight: 700, fontSize: 1.5+'rem' }}>도구 관리</p>\r\n            <Table className=\"manage__table table-sm\">\r\n              <thead>\r\n                <tr className=\"fs-sm\">\r\n                  <th>NO<br /><br /></th>\r\n                  <th>도구명<br /><br /><Input type=\"text\" value={this.state.toolname} onChange={(e) => {this.state.updateValue(e,\"toolname\")}}/></th>\r\n                  <th>Action<br /><br /><Button color=\"info\" size=\"sm\" onClick={()=>{this.state.onSave(this.state.num)}}>{this.state.num ? \"변경\" : \"추가\"}</Button></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>  \r\n                {this.state.tools ? this.state.tools.map(c => {\r\n                  return( \r\n                    <tr key={c.num}> \r\n                      <td style={{ width: \"50px\", textAlign: \"center\"}}>{c.num}</td>\r\n                      <td>{c.toolname}</td> \r\n                      <td style={{ width: \"20px\"}}>\r\n                        <Button color={\"warning\"} className=\"UpdateBtn\" size=\"sm\" variant=\"primary\" onClick={()=>{this.state.onEdit(c.num)}}>수정</Button>&nbsp;&nbsp;\r\n                        <Button color={\"default\"} className=\"UpdateBtn\" size=\"sm\" variant=\"danger\"onClick={()=>{this.state.onDelete(c.num)}}>삭제</Button></td>\r\n                    </tr>\r\n                  );\r\n                })  :<tr><td colSpan=\"3\">데이터가 없습니다.</td></tr>}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </>\r\n      )\r\n    }\r\n}\r\n\r\nexport default Tool;"]},"metadata":{},"sourceType":"module"}