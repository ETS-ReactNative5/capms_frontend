{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\hlshi\\\\Desktop\\\\pmsproject\\\\sure-frontend\\\\src\\\\pages\\\\Education\\\\Education.js\";\nimport React from \"react\";\nimport { Row, Col, Button, Input } from \"reactstrap\";\nimport { CSVLink } from \"react-csv\";\nimport Widget from \"../../components/Widget/Widget\";\nimport ApexChart from \"react-apexcharts\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport uuid from \"uuid/v4\";\nimport { Cookies } from \"react-cookie\";\nvar cookies = new Cookies();\n\nvar Education = /*#__PURE__*/function (_React$Component) {\n  _inherits(Education, _React$Component);\n\n  var _super = _createSuper(Education);\n\n  function Education(props) {\n    var _this;\n\n    _classCallCheck(this, Education);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"changeSelectedGoal\", function (e) {\n      var newSelectedYear = Number(e.target.value);\n\n      var newSelectedGoal = _this.state.goal.filter(function (g) {\n        return g.year === newSelectedYear;\n      });\n\n      newSelectedGoal = newSelectedGoal.length !== 0 ? newSelectedGoal[0].goal : 0;\n\n      _this.setState({\n        selectedGoal: newSelectedGoal\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeGoal\", function (e) {\n      var update_goal = Number(e.target.value);\n      var new_goal = _this.state.goal;\n      new_goal.map(function (g) {\n        if (g.year === _this.state.selectedYear) {\n          g.goal = update_goal;\n        }\n      });\n\n      _this.setState({\n        goal: new_goal,\n        selectedGoal: update_goal\n      });\n    });\n\n    _this.state = {\n      authority: JSON.parse(localStorage.getItem('userInfo')) ? JSON.parse(localStorage.getItem('userInfo')).authority : '',\n      educations: \"\",\n      teams: \"\",\n      fh_learn_time_sum: [],\n      sh_learn_time_sum: [],\n      fh_learn_time_percent: [],\n      sh_learn_time_percent: [],\n      total_fh_learn_time_percent: 0,\n      total_sh_learn_time_percent: 0,\n      cost_sum: [],\n      series: [],\n      options: {\n        chart: {\n          height: 350,\n          type: \"line\",\n          stacked: false\n        },\n        colors: [\"#2CA0BA\", \"#FF7769\", \"#FFBF69\"],\n        dataLabels: {\n          enabled: true,\n          style: {\n            fontSize: \"12px\"\n          },\n          offsetY: 0,\n          formatter: function formatter(value, _ref) {\n            var seriesIndex = _ref.seriesIndex,\n                dataPointIndex = _ref.dataPointIndex,\n                w = _ref.w;\n\n            if (seriesIndex === 2) {\n              return value.toLocaleString(\"ko-KR\") + \" 원\";\n            } else {\n              if (value === 0) {\n                return;\n              } else {\n                return value + \"%\";\n              }\n            }\n          }\n        },\n        stroke: {\n          show: true,\n          width: [1, 1, 5]\n        },\n        plotOptions: {\n          bar: {\n            columnWidth: \"40%\",\n            endingShape: \"rounded\"\n          }\n        },\n        tooltip: {},\n        xaxis: {\n          categories: []\n        },\n        yaxis: []\n      },\n      selectedYear: new Date().getFullYear(),\n      goal: [],\n      selectedGoal: 0,\n      team_list: [],\n      dropdownOpen: false,\n      headers: [{\n        label: \"팀\",\n        key: \"team\"\n      }, {\n        label: \"이름\",\n        key: \"stu_name\"\n      }, {\n        label: \"교육명\",\n        key: \"edu_name\"\n      }, {\n        label: \"이수시간 (단위: 시간)\",\n        key: \"learn_time\"\n      }, {\n        label: \"시작날짜\",\n        key: \"start_date\"\n      }, {\n        label: \"종료날짜\",\n        key: \"end_date\"\n      }, {\n        label: \"지출 (단위: 원)\",\n        key: \"cost\"\n      }],\n      data: [],\n      isLoading: true\n    };\n    return _this;\n  }\n\n  _createClass(Education, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.defaults.headers.common['Authorization'] = cookies.get(\"token\");\n      this.findTeam();\n      this.findGoal();\n      this.findAllData();\n      setTimeout(function () {\n        _this2.setState({\n          isLoading: false\n        });\n      }, 1000);\n    }\n  }, {\n    key: \"findTeam\",\n    value: function findTeam() {\n      var _this3 = this;\n\n      var result = [];\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/teams\")).then(function (res) {\n        return res.data.filter(function (t) {\n          return t.teamname !== \"커넥티드자율주행시스템실\";\n        }).sort(function (a, b) {\n          return a.num - b.num;\n        });\n      }).then(function (data) {\n        data.map(function (d, idx) {\n          axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/education/teams/count?team=\\\"\").concat(d.teamname, \"\\\"\")).then(function (res) {\n            return res.data;\n          }).then(function (count_data) {\n            result[idx] = {\n              num: d.num,\n              team: d.teamname,\n              count: count_data[0].count,\n              year: d.year\n            };\n\n            if (idx === data.length - 1) {\n              _this3.findAllEducationsByYear(_this3.state.selectedYear, result);\n            }\n          });\n        });\n\n        _this3.setState({\n          team_list: result\n        });\n      }).catch(function (err) {\n        if (cookies.get(\"token\")) {\n          cookies.remove(\"token\");\n        }\n\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n        window.location.href = \"/\";\n      });\n    }\n  }, {\n    key: \"findAllEducationsByYear\",\n    value: function findAllEducationsByYear(year, team_list) {\n      var _this4 = this;\n\n      var promises = [];\n      team_list = team_list.filter(function (tl) {\n        return Number(tl.year) === Number(year);\n      });\n      team_list.map(function (tl) {\n        promises.push(axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/education/teams/data?team=\\\"\").concat(tl.team, \"\\\"&year=\").concat(year)));\n      });\n      axios.all(promises).then(axios.spread(function () {\n        var fh_learn_time_sum = [];\n        var sh_learn_time_sum = [];\n        var fh_learn_time_percent = [];\n        var sh_learn_time_percent = [];\n        var cost_sum = [];\n        var total_fh_learn_time = 0;\n        var total_sh_learn_time = 0;\n        var total_count = 0;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        for (var i = 0; i < args.length; i++) {\n          var fh_learn_time_data = args[i].data[0].fh_learn_time_sum ? args[i].data[0].fh_learn_time_sum : 0;\n          var sh_learn_time_data = args[i].data[0].sh_learn_time_sum ? args[i].data[0].sh_learn_time_sum : 0;\n          total_fh_learn_time += fh_learn_time_data;\n          total_sh_learn_time += sh_learn_time_data;\n          total_count += team_list[i].count;\n          var cost_data = args[i].data[0].cost_sum ? args[i].data[0].cost_sum : 0;\n          _this4.state.selectedGoal === 0 || team_list[i].count === 0 ? fh_learn_time_percent.push(0) : fh_learn_time_percent.push((fh_learn_time_data / (_this4.state.selectedGoal * team_list[i].count) * 100).toFixed(2));\n          _this4.state.selectedGoal === 0 || team_list[i].count === 0 ? sh_learn_time_percent.push(0) : sh_learn_time_percent.push((sh_learn_time_data / (_this4.state.selectedGoal * team_list[i].count) * 100).toFixed(2));\n          fh_learn_time_sum.push(fh_learn_time_data);\n          sh_learn_time_sum.push(sh_learn_time_data);\n          cost_sum.push(cost_data);\n        }\n\n        total_count += 1;\n        var category = [];\n\n        _this4.state.team_list.map(function (team) {\n          if (team.year === year) {\n            category.push(team.team);\n          }\n        });\n\n        _this4.setState(function (prevState) {\n          return {\n            fh_learn_time_percent: fh_learn_time_percent,\n            sh_learn_time_percent: sh_learn_time_percent,\n            total_fh_learn_time_percent: (total_fh_learn_time / (_this4.state.selectedGoal * total_count) * 100).toFixed(2),\n            total_sh_learn_time_percent: (total_sh_learn_time / (_this4.state.selectedGoal * total_count) * 100).toFixed(2),\n            cost_sum: cost_sum,\n            series: [{\n              name: \"이수 시간 (상반기)\",\n              type: \"column\",\n              data: fh_learn_time_percent\n            }, {\n              name: \"이수 시간 (하반기)\",\n              type: \"column\",\n              data: sh_learn_time_percent\n            }, {\n              name: \"연간 사용 금액\",\n              type: \"line\",\n              data: cost_sum\n            }],\n            options: _objectSpread(_objectSpread({}, prevState.options), {}, {\n              tooltip: {\n                onDatasetHover: {\n                  highlightDataSeries: true\n                },\n                y: {\n                  formatter: function formatter(value, _ref2) {\n                    var seriesIndex = _ref2.seriesIndex,\n                        dataPointIndex = _ref2.dataPointIndex;\n\n                    if (seriesIndex === 2) {\n                      return value.toLocaleString(\"ko-KR\") + \" 원\";\n                    } else if (seriesIndex === 1) {\n                      return sh_learn_time_sum[dataPointIndex] + \" 시간\";\n                    } else {\n                      return fh_learn_time_sum[dataPointIndex] + \" 시간\";\n                    }\n                  }\n                }\n              },\n              xaxis: {\n                categories: category\n              },\n              yaxis: [{\n                title: {\n                  text: \"이수 시간 달성률 (%)\"\n                },\n                min: 0,\n                max: 120 // max: Math.max(Math.max(...fh_learn_time_sum), Math.max(...sh_learn_time_sum)) * 1.2,\n\n              }, {\n                show: false,\n                min: 0,\n                max: 120 // max: Math.max(Math.max(...fh_learn_time_sum), Math.max(...sh_learn_time_sum)) * 1.2,\n\n              }, {\n                opposite: true,\n                title: {\n                  text: \"연간 사용 금액 (원)\"\n                },\n                min: 0,\n                max: Math.max.apply(Math, cost_sum) * 1.2\n              }]\n            })\n          };\n        });\n      }));\n    }\n  }, {\n    key: \"findGoal\",\n    value: function findGoal() {\n      var _this5 = this;\n\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/education/goal\")).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        var selectedGoal = data.filter(function (g) {\n          return g.year === _this5.state.selectedYear;\n        });\n        selectedGoal = selectedGoal.length !== 0 ? selectedGoal[0].goal : 0;\n\n        _this5.setState({\n          goal: data,\n          selectedGoal: selectedGoal\n        });\n      });\n    }\n  }, {\n    key: \"findAllData\",\n    value: function findAllData() {\n      var _this6 = this;\n\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/education/excel\")).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        _this6.setState({\n          data: data\n        });\n      });\n    }\n  }, {\n    key: \"updateGoal\",\n    value: function updateGoal() {\n      var _this7 = this;\n\n      this.state.goal.map(function (g) {\n        if (_this7.state.selectedYear === Number(g.year)) {\n          axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/education/goal/update\"), {\n            goal: _this7.state.selectedGoal,\n            year: _this7.state.selectedYear\n          }).then(function (response) {\n            console.log(response);\n          }).catch(function (err) {\n            if (cookies.get(\"token\")) {\n              cookies.remove(\"token\");\n            }\n\n            alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n            window.location.href = \"/\";\n          });\n        } else {}\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          padding: 0,\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          padding: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: \"bold\",\n          textAlign: \"center\",\n          margin: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }\n      }, \"\\uCEE4\\uB125\\uD2F0\\uB4DC\\uC790\\uC728\\uC8FC\\uD589\\uC2DC\\uC2A4\\uD15C\\uC2E4 \\uAD50\\uC721 \\uD604\\uD669\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"left\",\n          alignItems: \"center\",\n          padding: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        style: {\n          width: \"auto\"\n        },\n        className: \"form-control\",\n        id: \"Year\",\n        value: this.state.selectedYear,\n        onChange: function onChange(e) {\n          _this8.changeSelectedGoal(e);\n\n          _this8.findAllEducationsByYear(Number(e.target.value), _this8.state.team_list);\n\n          _this8.setState({\n            selectedYear: Number(e.target.value)\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 15\n        }\n      }, _toConsumableArray(Array(moment(new Date()).format('YYYY') - 2018).keys()).map(function (i) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: i,\n          value: moment(new Date()).format('YYYY') - i + 1,\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 17\n          }\n        }, moment(new Date()).format('YYYY') - i + 1);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }\n      }), this.state.authority === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"left\",\n          alignItems: \"center\",\n          padding: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"right\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: \"bold\",\n          textAlign: \"center\",\n          margin: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }\n      }, \"\\uBAA9\\uD45C \\uC2DC\\uAC04: \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"left\",\n          alignItems: \"center\",\n          padding: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"number\",\n        value: this.state.selectedGoal,\n        onChange: function onChange(e) {\n          _this8.changeGoal(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"left\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"warning\",\n        size: \"sm\",\n        variant: \"primary\",\n        onClick: function onClick() {\n          _this8.updateGoal();\n\n          _this8.findAllEducationsByYear(_this8.state.selectedYear, _this8.state.team_list);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 15\n        }\n      }, \"\\uBCC0\\uACBD\"))) : null), /*#__PURE__*/React.createElement(Row, {\n        style: {\n          padding: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Widget, {\n        title: /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          style: {\n            fontWeight: 700\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 17\n          }\n        }, \"\\uD300\\uBCC4 \\uAD50\\uC721 \\uB2EC\\uC131\\uB960\"), /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            fontSize: 1 + 'rem'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 19\n          }\n        }, \"\\uC2E4 \\uB2EC\\uC131\\uB960 \"), \"\\uC0C1\\uBC18\\uAE30: \", this.state.total_fh_learn_time_percent, \"% \\uD558\\uBC18\\uAE30: \", this.state.total_sh_learn_time_percent, \"%\")) // customDropDown\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }\n      }, this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 44\n        }\n      }, \"Loading...\")) : /*#__PURE__*/React.createElement(ApexChart, {\n        className: \"sparkline-chart\",\n        height: 350,\n        series: this.state.series,\n        options: this.state.options // type={\"line\"}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 18\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingRight: \"50px\",\n          paddingLeft: \"50px\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 9\n        }\n      }, this.state.team_list.map(function (tl, idx) {\n        if (tl.year === _this8.state.selectedYear) {\n          var link = \"/app/education/\" + tl.team;\n          return /*#__PURE__*/React.createElement(\"div\", {\n            key: idx,\n            className: \"col-2\",\n            style: {\n              paddingRight: \"15px\",\n              paddingLeft: \"15px\"\n            },\n            __self: _this8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(Link, {\n            key: idx,\n            to: link,\n            __self: _this8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(Button, {\n            style: {\n              width: \"100%\",\n              height: \"50px\",\n              fontSize: \"15px\"\n            },\n            color: \"warning\",\n            __self: _this8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 21\n            }\n          }, tl.team)));\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        style: {\n          paddingRight: \"15px\",\n          paddingLeft: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        style: {\n          width: \"100%\",\n          height: \"50px\"\n        },\n        color: \"success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CSVLink, {\n        data: this.state.data,\n        headers: this.state.headers,\n        filename: \"커넥티드자율주행시스템실 교육현황.csv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 15\n        }\n      }, \"\\uC5D1\\uC140 \\uB2E4\\uC6B4\\uB85C\\uB4DC\")))));\n    }\n  }]);\n\n  return Education;\n}(React.Component);\n\nexport default Education;","map":{"version":3,"sources":["C:/Users/hlshi/Desktop/pmsproject/sure-frontend/src/pages/Education/Education.js"],"names":["React","Row","Col","Button","Input","CSVLink","Widget","ApexChart","Link","moment","axios","uuid","Cookies","cookies","Education","props","e","newSelectedYear","Number","target","value","newSelectedGoal","state","goal","filter","g","year","length","setState","selectedGoal","update_goal","new_goal","map","selectedYear","authority","JSON","parse","localStorage","getItem","educations","teams","fh_learn_time_sum","sh_learn_time_sum","fh_learn_time_percent","sh_learn_time_percent","total_fh_learn_time_percent","total_sh_learn_time_percent","cost_sum","series","options","chart","height","type","stacked","colors","dataLabels","enabled","style","fontSize","offsetY","formatter","seriesIndex","dataPointIndex","w","toLocaleString","stroke","show","width","plotOptions","bar","columnWidth","endingShape","tooltip","xaxis","categories","yaxis","Date","getFullYear","team_list","dropdownOpen","headers","label","key","data","isLoading","defaults","common","get","findTeam","findGoal","findAllData","setTimeout","result","process","env","REACT_APP_API_URL","then","res","t","teamname","sort","a","b","num","d","idx","count_data","team","count","findAllEducationsByYear","catch","err","remove","alert","window","location","href","promises","tl","push","all","spread","total_fh_learn_time","total_sh_learn_time","total_count","args","i","fh_learn_time_data","sh_learn_time_data","cost_data","toFixed","category","prevState","name","onDatasetHover","highlightDataSeries","y","title","text","min","max","opposite","Math","post","response","console","log","padding","display","justifyContent","alignItems","fontWeight","textAlign","margin","changeSelectedGoal","Array","format","keys","changeGoal","updateGoal","flexDirection","paddingRight","paddingLeft","link","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Input,\r\n} from \"reactstrap\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport ApexChart from \"react-apexcharts\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport axios from \"axios\";\r\nimport uuid from \"uuid/v4\";\r\nimport { Cookies } from \"react-cookie\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nclass Education extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      authority: JSON.parse(localStorage.getItem('userInfo')) ? JSON.parse(localStorage.getItem('userInfo')).authority : '',\r\n      educations: \"\",\r\n      teams: \"\",\r\n\r\n      fh_learn_time_sum: [],\r\n      sh_learn_time_sum: [],\r\n\r\n      fh_learn_time_percent: [],\r\n      sh_learn_time_percent: [],\r\n\r\n      total_fh_learn_time_percent: 0,\r\n      total_sh_learn_time_percent: 0,\r\n\r\n      cost_sum: [],\r\n\r\n      series: [],\r\n\r\n      options: {\r\n        chart: {\r\n          height: 350,\r\n          type: \"line\",\r\n          stacked: false,\r\n        },\r\n        colors: [\"#2CA0BA\", \"#FF7769\", \"#FFBF69\"],\r\n        dataLabels: {\r\n          enabled: true,\r\n          style: {\r\n            fontSize: \"12px\"\r\n          },\r\n          offsetY: 0,\r\n          formatter: function (value, { seriesIndex, dataPointIndex, w }) {\r\n            if (seriesIndex === 2) {\r\n              return value.toLocaleString(\"ko-KR\") + \" 원\";\r\n            } else {\r\n              if (value === 0) {\r\n                return;\r\n              } else {\r\n                return value + \"%\";\r\n              }\r\n            }\r\n          },\r\n        },\r\n        stroke: {\r\n          show: true,\r\n          width: [1, 1, 5],\r\n        },\r\n        plotOptions: {\r\n          bar: {\r\n            columnWidth: \"40%\",\r\n            endingShape: \"rounded\",\r\n          },\r\n        },\r\n        tooltip: {},\r\n        xaxis: {\r\n          categories: [],\r\n        },\r\n        yaxis: [],\r\n      },\r\n\r\n      selectedYear: new Date().getFullYear(),\r\n\r\n      goal: [],\r\n      selectedGoal: 0,\r\n\r\n      team_list: [],\r\n\r\n      dropdownOpen: false,\r\n\r\n      headers: [\r\n        { label: \"팀\", key: \"team\" },\r\n        { label: \"이름\", key: \"stu_name\" },\r\n        { label: \"교육명\", key: \"edu_name\" },\r\n        { label: \"이수시간 (단위: 시간)\", key: \"learn_time\" },\r\n        { label: \"시작날짜\", key: \"start_date\" },\r\n        { label: \"종료날짜\", key: \"end_date\" },\r\n        { label: \"지출 (단위: 원)\", key: \"cost\" },\r\n      ],\r\n      \r\n      data: [],\r\n\r\n      isLoading: true,\r\n\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.defaults.headers.common['Authorization'] = cookies.get(\"token\");\r\n    this.findTeam();\r\n    this.findGoal();\r\n    this.findAllData();\r\n    setTimeout(()=>{\r\n      this.setState({ isLoading : false });\r\n    },1000)\r\n  }\r\n\r\n  findTeam() {\r\n    let result = [];\r\n\r\n    axios\r\n      .get(`http://${process.env.REACT_APP_API_URL}/teams`)\r\n      .then((res) => res.data.filter((t) => t.teamname !== \"커넥티드자율주행시스템실\").sort((a, b) => a.num - b.num))\r\n      .then((data) => {\r\n        data.map((d, idx) => {\r\n          axios\r\n            .get(\r\n              `http://${process.env.REACT_APP_API_URL}/education/teams/count?team=\"${d.teamname}\"`\r\n            )\r\n            .then((res) => res.data)\r\n            .then((count_data) => {\r\n              result[idx] = { num: d.num, team: d.teamname, count: count_data[0].count, year: d.year };\r\n              if (idx === data.length - 1) {\r\n                this.findAllEducationsByYear(this.state.selectedYear, result);\r\n              }\r\n            })\r\n        });\r\n\r\n        this.setState({ team_list: result });\r\n      }).catch(err => {\r\n        if (cookies.get(\"token\")) {\r\n          cookies.remove(\"token\");\r\n        }\r\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n        window.location.href = \"/\";\r\n      });\r\n  }\r\n\r\n  findAllEducationsByYear(year, team_list) {\r\n    let promises = [];\r\n\r\n    team_list = team_list.filter((tl) => Number(tl.year) === Number(year));\r\n\r\n    team_list.map((tl) => {\r\n      promises.push(\r\n        axios.get(\r\n          `http://${process.env.REACT_APP_API_URL}/education/teams/data?team=\"${tl.team}\"&year=${year}`\r\n        )\r\n      );\r\n    });\r\n\r\n    axios.all(promises).then(\r\n      axios.spread((...args) => {\r\n        const fh_learn_time_sum = [];\r\n        const sh_learn_time_sum = [];\r\n\r\n        const fh_learn_time_percent = [];\r\n        const sh_learn_time_percent = [];\r\n\r\n        const cost_sum = [];\r\n\r\n        let total_fh_learn_time = 0;\r\n        let total_sh_learn_time = 0;\r\n        let total_count = 0;\r\n\r\n        for (let i = 0; i < args.length; i++) {\r\n          const fh_learn_time_data = args[i].data[0].fh_learn_time_sum ? args[i].data[0].fh_learn_time_sum: 0;\r\n          const sh_learn_time_data = args[i].data[0].sh_learn_time_sum ? args[i].data[0].sh_learn_time_sum: 0;\r\n          \r\n          total_fh_learn_time += fh_learn_time_data;\r\n          total_sh_learn_time += sh_learn_time_data;\r\n          total_count += team_list[i].count;\r\n\r\n          const cost_data = args[i].data[0].cost_sum ? args[i].data[0].cost_sum: 0;\r\n\r\n          (this.state.selectedGoal === 0 || team_list[i].count === 0) ? fh_learn_time_percent.push(0) : fh_learn_time_percent.push(((fh_learn_time_data / (this.state.selectedGoal * team_list[i].count)) * 100).toFixed(2));\r\n          (this.state.selectedGoal === 0 || team_list[i].count === 0) ? sh_learn_time_percent.push(0) : sh_learn_time_percent.push(((sh_learn_time_data / (this.state.selectedGoal * team_list[i].count)) * 100).toFixed(2));\r\n\r\n          fh_learn_time_sum.push(fh_learn_time_data);\r\n          sh_learn_time_sum.push(sh_learn_time_data);\r\n\r\n          cost_sum.push(cost_data);\r\n        }\r\n        total_count += 1;\r\n\r\n        const category = [];\r\n        this.state.team_list.map((team) => {\r\n          if(team.year === year) {\r\n            category.push(team.team);\r\n          }\r\n        });\r\n\r\n        this.setState((prevState) => ({\r\n          fh_learn_time_percent: fh_learn_time_percent,\r\n          sh_learn_time_percent: sh_learn_time_percent,\r\n\r\n          total_fh_learn_time_percent : ((total_fh_learn_time / (this.state.selectedGoal * total_count)) * 100).toFixed(2),\r\n          total_sh_learn_time_percent : ((total_sh_learn_time / (this.state.selectedGoal * total_count)) * 100).toFixed(2),\r\n\r\n          cost_sum: cost_sum,\r\n\r\n          series: [\r\n            {\r\n              name: \"이수 시간 (상반기)\",\r\n              type: \"column\",\r\n              data: fh_learn_time_percent,\r\n            },\r\n            {\r\n              name: \"이수 시간 (하반기)\",\r\n              type: \"column\",\r\n              data: sh_learn_time_percent,\r\n            },\r\n            {\r\n              name: \"연간 사용 금액\",\r\n              type: \"line\",\r\n              data: cost_sum,\r\n            },\r\n          ],\r\n\r\n          options: {\r\n            ...prevState.options,\r\n\r\n            tooltip: {\r\n              onDatasetHover: {\r\n                highlightDataSeries: true,\r\n              },\r\n              y: {\r\n                formatter: function (\r\n                  value,\r\n                  { seriesIndex, dataPointIndex }\r\n                ) {\r\n                  if (seriesIndex === 2) {\r\n                    return value.toLocaleString(\"ko-KR\") + \" 원\";\r\n                  } else if (seriesIndex === 1) {\r\n                    return sh_learn_time_sum[dataPointIndex] + \" 시간\";\r\n                  } else {\r\n                    return fh_learn_time_sum[dataPointIndex] + \" 시간\";\r\n                  }\r\n                },\r\n              },\r\n            },\r\n            xaxis: {\r\n              categories: category,\r\n            },\r\n            yaxis: [\r\n              {\r\n                title: {\r\n                  text: \"이수 시간 달성률 (%)\",\r\n                },\r\n\r\n                min: 0,\r\n                max: 120,\r\n                // max: Math.max(Math.max(...fh_learn_time_sum), Math.max(...sh_learn_time_sum)) * 1.2,\r\n              },\r\n\r\n              {\r\n                show: false,\r\n\r\n                min: 0,\r\n                max: 120,\r\n                // max: Math.max(Math.max(...fh_learn_time_sum), Math.max(...sh_learn_time_sum)) * 1.2,\r\n              },\r\n\r\n              {\r\n                opposite: true,\r\n                \r\n                title: {\r\n                  text: \"연간 사용 금액 (원)\",\r\n                },\r\n\r\n                min: 0,\r\n                max: Math.max(...cost_sum) * 1.2,\r\n              },\r\n            ],\r\n          },\r\n        }));\r\n      })\r\n    )\r\n  }\r\n\r\n  findGoal() {\r\n    axios\r\n      .get(`http://${process.env.REACT_APP_API_URL}/education/goal`)\r\n      .then((res) => res.data)\r\n      .then((data) => {\r\n        let selectedGoal = data.filter((g) => g.year === this.state.selectedYear);\r\n        selectedGoal = selectedGoal.length !== 0 ? selectedGoal[0].goal : 0;\r\n\r\n        this.setState({\r\n          goal: data,\r\n          selectedGoal: selectedGoal\r\n        })\r\n      });\r\n  }\r\n\r\n  findAllData() {\r\n    axios\r\n    .get(`http://${process.env.REACT_APP_API_URL}/education/excel`)\r\n    .then((res) => res.data)\r\n    .then((data) => {\r\n      this.setState({ data: data });\r\n    });\r\n  }\r\n\r\n  changeSelectedGoal = (e) => {\r\n    const newSelectedYear = Number(e.target.value);\r\n    let newSelectedGoal = this.state.goal.filter((g) => g.year === newSelectedYear);\r\n    newSelectedGoal = newSelectedGoal.length !== 0 ? newSelectedGoal[0].goal : 0;\r\n\r\n    this.setState({\r\n      selectedGoal: newSelectedGoal,\r\n    });\r\n  };\r\n\r\n  changeGoal = (e) => {\r\n    const update_goal = Number(e.target.value);\r\n    let new_goal = this.state.goal;\r\n\r\n    new_goal.map((g) => {\r\n      if(g.year === this.state.selectedYear) {\r\n        g.goal = update_goal;\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      goal: new_goal,\r\n      selectedGoal: update_goal\r\n    });\r\n  };\r\n\r\n  updateGoal() {\r\n    this.state.goal.map((g) => {\r\n      if(this.state.selectedYear === Number(g.year)) {\r\n        axios\r\n        .post(`http://${process.env.REACT_APP_API_URL}/education/goal/update`, {\r\n          goal: this.state.selectedGoal,\r\n          year: this.state.selectedYear,\r\n        })\r\n        .then((response) => {\r\n          console.log(response);\r\n        }).catch(err => {\r\n          if (cookies.get(\"token\")) {\r\n            cookies.remove(\"token\");\r\n          }\r\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n          window.location.href = \"/\";\r\n        });\r\n      } else {\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div>\r\n        <div style={{ padding: 0, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n          <div className=\"col-2\" style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", padding: 0 }}>\r\n            <p style={{ fontWeight: \"bold\", textAlign: \"center\", margin: 0 }}>커넥티드자율주행시스템실 교육 현황</p>\r\n          </div>\r\n          <div className=\"col-2\"  style={{ display: \"flex\", justifyContent: \"left\", alignItems: \"center\", padding: 0 }}>\r\n              <select style={{ width: \"auto\" }} className=\"form-control\"id=\"Year\" value={this.state.selectedYear}\r\n                onChange={(e) => {\r\n                  this.changeSelectedGoal(e);\r\n                  this.findAllEducationsByYear(Number(e.target.value),this.state.team_list);\r\n                  this.setState({ selectedYear: Number(e.target.value) });\r\n                }}>\r\n              {[...Array(moment(new Date()).format('YYYY') - 2018).keys()].map((i) => (\r\n                <option key={i} value={moment(new Date()).format('YYYY') - i + 1}>{moment(new Date()).format('YYYY') - i + 1}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"col-2\"></div>\r\n          <div className=\"col-2\"></div>\r\n            \r\n          {this.state.authority === 0 ?\r\n          <div className=\"col-4\"  style={{ display: \"flex\", justifyContent: \"left\", alignItems: \"center\", padding: 0 }}>\r\n            <div className=\"col-4\"  style={{ display: \"flex\", justifyContent: \"right\", alignItems: \"center\" }}>\r\n              <p style={{ fontWeight: \"bold\", textAlign: \"center\", margin: 0 }}>목표 시간: </p>\r\n            </div>\r\n            <div className=\"col-4\"  style={{ display: \"flex\", justifyContent: \"left\", alignItems: \"center\", padding: 0 }}>\r\n              <Input\r\n                type=\"number\"\r\n                value={this.state.selectedGoal}\r\n                onChange={(e) => {\r\n                  this.changeGoal(e);\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-4\"  style={{ display: \"flex\", justifyContent: \"left\", alignItems: \"center\" }}>\r\n              <Button\r\n                color={\"warning\"}\r\n                size=\"sm\"\r\n                variant=\"primary\"\r\n                onClick={() => {\r\n                  this.updateGoal();\r\n                  this.findAllEducationsByYear(this.state.selectedYear,this.state.team_list);\r\n                }}\r\n              >\r\n                변경\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          : null}\r\n\r\n        </div>\r\n\r\n        {/* 팀별 교육 차트 */}\r\n        \r\n        <Row style={{ padding: \"20px\" }}>\r\n          <Col>\r\n            <Widget\r\n              title={\r\n              <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\r\n                <p style={{ fontWeight: 700 }}>팀별 교육 달성률</p>\r\n                <div style={{fontSize: 1+'rem'}}>\r\n                  <strong>실 달성률 </strong>\r\n                  상반기: {this.state.total_fh_learn_time_percent}%\r\n                  하반기: {this.state.total_sh_learn_time_percent}%\r\n                </div>\r\n              </div>}\r\n              // customDropDown\r\n            >\r\n              {this.state.isLoading ? <div><h1 style={{ fontWeight: \"bold\" }}>Loading...</h1></div> : \r\n                (<ApexChart\r\n                  className=\"sparkline-chart\"\r\n                  height={350}\r\n                  series={this.state.series}\r\n                  options={this.state.options}\r\n                  // type={\"line\"}\r\n                >\r\n                </ApexChart>)\r\n              }\r\n            </Widget>\r\n          </Col>\r\n        </Row>\r\n\r\n        <div style={{ paddingRight: \"50px\", paddingLeft: \"50px\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n          {this.state.team_list.map((tl, idx) => {\r\n            if(tl.year === this.state.selectedYear) {\r\n              const link = \"/app/education/\" + tl.team;\r\n              return (\r\n                <div key={idx} className=\"col-2\" style={{ paddingRight: \"15px\", paddingLeft: \"15px\" }}>\r\n                  <Link key={idx} to={link}>\r\n                    <Button\r\n                      style={{ width: \"100%\", height: \"50px\", fontSize: \"15px\" }}\r\n                      color={\"warning\"}\r\n                    >\r\n                      {tl.team}\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              )\r\n            }\r\n          })}\r\n\r\n          <div className=\"col-2\" style={{ paddingRight: \"15px\", paddingLeft: \"15px\" }}>\r\n            <Button\r\n            style={{ width: \"100%\", height: \"50px\" }}\r\n              color={\"success\"}\r\n            >\r\n              <CSVLink \r\n                data={this.state.data} \r\n                headers={this.state.headers}\r\n                filename={\"커넥티드자율주행시스템실 교육현황.csv\"}\r\n                >\r\n                엑셀 다운로드\r\n              </CSVLink>\r\n            </Button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Education;\r\n"]},"metadata":{},"sourceType":"module"}