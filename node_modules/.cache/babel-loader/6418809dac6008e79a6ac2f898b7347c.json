{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\newScheduleWeek\\\\NewScheduleWeek.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport Widget from '../../components/Widget/Widget';\nimport moment from \"moment\";\nimport axios from 'axios';\nimport Button from 'reactstrap/lib/Button';\nimport './NewScheduleWeek.scss';\nimport { useCookies } from 'react-cookie';\n\nvar NewScheduleWeek = function NewScheduleWeek(props) {\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      places = _useState2[0],\n      setPlaces = _useState2[1];\n\n  var days = ['월요일', '화요일', '수요일', '목요일', '금요일'];\n  var dates = [];\n  var defaultDate = props.location.state ? moment(new Date(props.location.state.date)).format(\"YYYY-MM-DD\") : moment(new Date('2021-11-20')).format('YYYY-MM-DD');\n  var daynum = props.location.state ? new Date(props.location.state.date).getDay() : new Date().getDay();\n  console.log(props.location.state); // if (daynum === 0) {\n  //   defaultDate = moment(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + 1)).format('YYYY-MM-DD');\n  //   daynum = 1;\n  // }\n  // if (daynum === 6) {\n  //   defaultDate = moment(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + 2)).format('YYYY-MM-DD');\n  //   daynum = 1;\n  // }    \n\n  for (var i = 1; i < daynum; i++) {\n    dates.push(moment(new Date(new Date(defaultDate).setDate(new Date(defaultDate).getDate() - daynum + i))).format(\"YYYY-MM-DD\"));\n  }\n\n  for (var _i = 0; _i < 6 - daynum; _i++) {\n    dates.push(moment(new Date(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + _i))).format(\"YYYY-MM-DD\"));\n  }\n\n  var _useState3 = useState([false, false, false, false, false]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isEtcAM = _useState4[0],\n      setIsEtcAM = _useState4[1];\n\n  var _useState5 = useState([false, false, false, false, false]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isEtcPM = _useState6[0],\n      setIsEtcPM = _useState6[1];\n\n  var _useState7 = useState([{\n    이름: '',\n    날짜: dates[0],\n    오전: '휴무일',\n    오후: '휴무일'\n  }, {\n    이름: '',\n    날짜: dates[1],\n    오전: '휴무일',\n    오후: '휴무일'\n  }, {\n    이름: '',\n    날짜: dates[2],\n    오전: '휴무일',\n    오후: '휴무일'\n  }, {\n    이름: '',\n    날짜: dates[3],\n    오전: '휴무일',\n    오후: '휴무일'\n  }, {\n    이름: '',\n    날짜: dates[4],\n    오전: '휴무일',\n    오후: '휴무일'\n  }]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      schedule = _useState8[0],\n      setSchedule = _useState8[1];\n\n  var onClickSave = function onClickSave() {\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n\n    if (schedule.filter(function (item) {\n      return item.오전 == '' || item.오후 == '';\n    }).length > 0) {\n      alert('스케줄을 입력해주세요');\n      return;\n    }\n\n    axios.post('/schedule/add', {\n      schedule: schedule\n    }).then(function (res) {}).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n    window.location.href = \"#/app/schedule\";\n    window.location.reload();\n  };\n\n  useEffect(function () {\n    var _이름 = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\n\n    setSchedule(schedule.map(function (_ref) {\n      var 이름 = _ref.이름,\n          날짜 = _ref.날짜,\n          오전 = _ref.오전,\n          오후 = _ref.오후;\n      return {\n        이름: _이름,\n        날짜: 날짜,\n        오전: 오전,\n        오후: 오후\n      };\n    }));\n    findAllInfo();\n  }, []);\n\n  var findAllInfo = function findAllInfo() {\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n    axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/places\")).then(function (res) {\n      return setPlaces(res.data.sort(function (a, b) {\n        return a.num - b.num;\n      }).filter(function (place) {\n        return place.year == new Date().getFullYear();\n      }));\n    }).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 20,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 22\n      }\n    }, \"\\uC77C\\uC8FC\\uC77C \\uC77C\\uC815 \\uCD94\\uAC00\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"schedule__row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, dates.map(function (date, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 15,\n        fontWeight: 700,\n        borderBottom: 2 + 'px solid rgb(237, 125, 49)'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, days[index]), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 15,\n        marginBottom: 3\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, date)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row_top\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row__text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }, \"\\uC624\\uC804: \"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: schedule[index].오전,\n      onChange: function onChange(e) {\n        if (e.target.value == '') {\n          setIsEtcAM(isEtcAM.map(function (item, i) {\n            return index == i ? true : item;\n          }));\n        } else {\n          setIsEtcAM(isEtcAM.map(function (item, i) {\n            return index == i ? false : item;\n          }));\n        }\n\n        var _schedule = schedule.map(function (_schedule, _index) {\n          if (_index === index) {\n            return _objectSpread(_objectSpread({}, _schedule), {}, {\n              오전: e.target.value\n            });\n          }\n\n          return _schedule;\n        });\n\n        setSchedule(_schedule);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, \"\\uAE30\\uD0C0\"), places.map(function (place, index) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        value: place.name,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }\n      }, place.name);\n    }), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uD734\\uBB34\\uC77C\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, \"\\uD734\\uBB34\\uC77C\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uAD50\\uC721\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, \"\\uAD50\\uC721\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uC7AC\\uD0DD\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, \"\\uC7AC\\uD0DD\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uD734\\uAC00\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, \"\\uD734\\uAC00\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, isEtcAM[index] && /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      value: schedule[index].오전,\n      onChange: function onChange(e) {\n        var _schedule = schedule.map(function (_schedule, _index) {\n          if (_index === index) {\n            return _objectSpread(_objectSpread({}, _schedule), {}, {\n              오전: e.target.value\n            });\n          }\n\n          return _schedule;\n        });\n\n        setSchedule(_schedule);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row_top\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"schedule__card__row__text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, \"\\uC624\\uD6C4: \"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: schedule[index].오후,\n      onChange: function onChange(e) {\n        if (e.target.value == '') {\n          setIsEtcPM(isEtcPM.map(function (item, i) {\n            return i == index ? true : item;\n          }));\n        } else {\n          setIsEtcPM(isEtcPM.map(function (item, i) {\n            return i == index ? false : item;\n          }));\n        }\n\n        var _schedule = schedule.map(function (_schedule, _index) {\n          if (_index === index) {\n            return _objectSpread(_objectSpread({}, _schedule), {}, {\n              오후: e.target.value\n            });\n          }\n\n          return _schedule;\n        });\n\n        setSchedule(_schedule);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, \"\\uAE30\\uD0C0\"), places.map(function (place, index) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        value: place.name,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 23\n        }\n      }, place.name);\n    }), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uD734\\uBB34\\uC77C\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }, \"\\uD734\\uBB34\\uC77C\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uAD50\\uC721\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, \"\\uAD50\\uC721\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uC7AC\\uD0DD\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, \"\\uC7AC\\uD0DD\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uD734\\uAC00\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"\\uD734\\uAC00\"))), isEtcPM[index] && /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      value: schedule[index].오후,\n      onChange: function onChange(e) {\n        var _schedule = schedule.map(function (_schedule, _index) {\n          if (_index === index) {\n            return _objectSpread(_objectSpread({}, _schedule), {}, {\n              오후: e.target.value\n            });\n          }\n\n          return _schedule;\n        });\n\n        setSchedule(_schedule);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"schedule__all\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, \"\\uC544\\uB798\\uC5D0\\uC11C \\uAC12 \\uC120\\uD0DD \\uC2DC \\uD574\\uB2F9 \\uC8FC\\uC758 \\uBAA8\\uB4E0 \\uC77C\\uC815\\uC5D0 \\uC120\\uD0DD\\uD55C \\uAC12\\uC774 \\uC804\\uCCB4 \\uC801\\uC6A9\\uB429\\uB2C8\\uB2E4.\", /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      if (e.target.value == '') {\n        setIsEtcAM([true, true, true, true, true]);\n        setIsEtcPM([true, true, true, true, true]);\n      } else {\n        setIsEtcAM([false, false, false, false, false]);\n        setIsEtcPM([false, false, false, false, false]);\n      }\n\n      var _schedule = schedule.map(function (_schedule) {\n        return _objectSpread(_objectSpread({}, _schedule), {}, {\n          오전: e.target.value,\n          오후: e.target.value\n        });\n      });\n\n      setSchedule(_schedule);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, \"\\uAE30\\uD0C0\"), places.map(function (place, index) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: place.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }, place.name);\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uBB34\\uC77C\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, \"\\uD734\\uBB34\\uC77C\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uAD50\\uC721\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, \"\\uAD50\\uC721\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uC7AC\\uD0DD\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, \"\\uC7AC\\uD0DD\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uAC00\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, \"\\uD734\\uAC00\")), !isEtcAM.filter(function (item) {\n    return !item;\n  }).length && !isEtcPM.filter(function (item) {\n    return !item;\n  }).length && /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    value: schedule[0].오전,\n    onChange: function onChange(e) {\n      var _schedule = schedule.map(function (_schedule) {\n        return _objectSpread(_objectSpread({}, _schedule), {}, {\n          오전: e.target.value,\n          오후: e.target.value\n        });\n      });\n\n      setSchedule(_schedule);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: onClickSave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, \"\\uC800\\uC7A5\")));\n};\n\nexport default NewScheduleWeek;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/newScheduleWeek/NewScheduleWeek.js"],"names":["React","useState","useEffect","Widget","moment","axios","Button","useCookies","NewScheduleWeek","props","cookies","removeCookie","places","setPlaces","days","dates","defaultDate","location","state","Date","date","format","daynum","getDay","console","log","i","push","setDate","getDate","isEtcAM","setIsEtcAM","isEtcPM","setIsEtcPM","이름","날짜","오전","오후","schedule","setSchedule","onClickSave","defaults","headers","common","token","filter","item","length","alert","post","then","res","catch","err","window","href","reload","_이름","JSON","parse","localStorage","getItem","id","map","findAllInfo","get","process","env","REACT_APP_API_URL","data","sort","a","b","num","place","year","getFullYear","fontSize","fontWeight","index","borderBottom","marginBottom","e","target","value","_schedule","_index","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Widget from '../../components/Widget/Widget';\r\nimport moment from \"moment\";\r\nimport axios from 'axios';\r\nimport Button from 'reactstrap/lib/Button';\r\nimport './NewScheduleWeek.scss';\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst NewScheduleWeek = (props) => {\r\n  const [cookies, removeCookie ] = useCookies(['token']);\r\n  const [places, setPlaces] = useState([]);\r\n  const days = ['월요일', '화요일', '수요일', '목요일', '금요일'];\r\n  let dates = [];\r\n  let defaultDate = props.location.state ? moment(new Date(props.location.state.date)).format(\"YYYY-MM-DD\") : moment(new Date('2021-11-20')).format('YYYY-MM-DD');\r\n  let daynum = props.location.state ? new Date(props.location.state.date).getDay() : new Date().getDay();\r\n  console.log(props.location.state);\r\n  // if (daynum === 0) {\r\n  //   defaultDate = moment(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + 1)).format('YYYY-MM-DD');\r\n  //   daynum = 1;\r\n  // }\r\n  // if (daynum === 6) {\r\n  //   defaultDate = moment(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + 2)).format('YYYY-MM-DD');\r\n  //   daynum = 1;\r\n  // }    \r\n  for (let i = 1; i < daynum; i++) {\r\n    dates.push(moment(new Date(new Date(defaultDate).setDate(new Date(defaultDate).getDate() - daynum + i))).format(\"YYYY-MM-DD\"));\r\n  }\r\n  for (let i = 0; i < 6 - daynum; i++) {\r\n    dates.push(moment(new Date(new Date(defaultDate).setDate(new Date(defaultDate).getDate() + i))).format(\"YYYY-MM-DD\"));\r\n  }\r\n  const [isEtcAM, setIsEtcAM] = useState([false, false, false, false, false]);\r\n  const [isEtcPM, setIsEtcPM] = useState([false, false, false, false, false]);\r\n  const [schedule, setSchedule] = useState([\r\n    {\r\n      이름: '',\r\n      날짜: dates[0],\r\n      오전: '휴무일',\r\n      오후: '휴무일',\r\n    },\r\n    {\r\n      이름: '',\r\n      날짜: dates[1],\r\n      오전: '휴무일',\r\n      오후: '휴무일',\r\n    },\r\n    {\r\n      이름: '',\r\n      날짜: dates[2],\r\n      오전: '휴무일',\r\n      오후: '휴무일',\r\n    },\r\n    {\r\n      이름: '',\r\n      날짜: dates[3],\r\n      오전: '휴무일',\r\n      오후: '휴무일',\r\n    },\r\n    {\r\n      이름: '',\r\n      날짜: dates[4],\r\n      오전: '휴무일',\r\n      오후: '휴무일',\r\n    }\r\n  ]);\r\n\r\n  const onClickSave = () => {\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    if (schedule.filter(item => item.오전 == '' || item.오후 == '').length > 0) {\r\n      alert('스케줄을 입력해주세요');\r\n      return;\r\n    }\r\n    axios.post('/schedule/add', {schedule})\r\n    .then(res => {})\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n    window.location.href = \"#/app/schedule\";\r\n    window.location.reload();\r\n  }\r\n\r\n  useEffect(()=> {\r\n    const _이름 = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\r\n    setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => ({이름: _이름, 날짜, 오전, 오후})));\r\n    findAllInfo();\r\n  }, []);\r\n\r\n  const findAllInfo = () => {\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    axios.get(`http://${process.env.REACT_APP_API_URL}/places`)\r\n    .then(res => setPlaces(res.data.sort((a, b) => a.num - b.num).filter(place => place.year == new Date().getFullYear())))\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Widget title={<p style={{ fontSize:20, fontWeight: 700 }}>일주일 일정 추가</p>}>\r\n        <div className=\"schedule__row\">\r\n          {dates.map((date, index) => (\r\n            <div className=\"schedule__card\" key={index}>\r\n              <div>\r\n                <div style={{ fontSize: 15, fontWeight: 700, borderBottom: 2 + 'px solid rgb(237, 125, 49)'}}>{days[index]}</div>\r\n                <div style={{ fontSize: 15, marginBottom: 3}}>{date}</div>\r\n              </div>\r\n              <div className=\"schedule__card__row\">\r\n                <div className=\"schedule__card__row_top\">\r\n                  <div className=\"schedule__card__row__text\">오전: </div>\r\n                  <select className=\"form-control\" value={schedule[index].오전} onChange={(e) => {\r\n                    if(e.target.value == '') {\r\n                      setIsEtcAM(isEtcAM.map((item, i) => index == i ? true : item));\r\n                    } else {\r\n                      setIsEtcAM(isEtcAM.map((item, i) => index == i ? false : item));\r\n                    }\r\n                    const _schedule = schedule.map((_schedule, _index) => {\r\n                      if (_index === index) {\r\n                        return {\r\n                          ..._schedule,\r\n                          오전: e.target.value\r\n                        }\r\n                      }\r\n                      return _schedule;\r\n                    })\r\n                    setSchedule(_schedule);\r\n                  }}>\r\n                    <option value=\"\">기타</option>\r\n                    {places.map((place, index) => (\r\n                      <option key={index} value={place.name}>{place.name}</option>\r\n                    ))}\r\n                    <option value=\"휴무일\">휴무일</option>\r\n                    <option value=\"교육\">교육</option>\r\n                    <option value=\"재택\">재택</option>\r\n                    <option value=\"휴가\">휴가</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  {isEtcAM[index] && \r\n                    <input className=\"form-control\" value={schedule[index].오전} onChange={(e) => {\r\n                      const _schedule = schedule.map((_schedule, _index) => {\r\n                        if (_index === index) {\r\n                          return {\r\n                            ..._schedule,\r\n                            오전: e.target.value\r\n                          }\r\n                        }\r\n                        return _schedule;\r\n                      })\r\n                      setSchedule(_schedule);\r\n                    }}/>\r\n                  }\r\n                </div>\r\n              </div>\r\n              <div className=\"schedule__card__row\">\r\n                <div className=\"schedule__card__row_top\">\r\n                  <div className=\"schedule__card__row__text\">오후: </div>\r\n                  <select className=\"form-control\" value={schedule[index].오후} onChange={(e) => {\r\n                    if(e.target.value == '') {\r\n                      setIsEtcPM(isEtcPM.map((item, i) => i == index ? true : item));\r\n                    } else {\r\n                      setIsEtcPM(isEtcPM.map((item, i) => i == index ? false : item));\r\n                    }\r\n                    const _schedule = schedule.map((_schedule, _index) => {\r\n                      if (_index === index) {\r\n                        return {\r\n                          ..._schedule,\r\n                          오후: e.target.value\r\n                        }\r\n                      }\r\n                      return _schedule;\r\n                    })\r\n                    setSchedule(_schedule);\r\n                  }}>\r\n                    <option value=\"\">기타</option>\r\n                    {places.map((place, index) => (\r\n                      <option key={index} value={place.name}>{place.name}</option>\r\n                    ))}\r\n                    <option value=\"휴무일\">휴무일</option>\r\n                    <option value=\"교육\">교육</option>\r\n                    <option value=\"재택\">재택</option>\r\n                    <option value=\"휴가\">휴가</option>\r\n                  </select>\r\n                </div>\r\n                {isEtcPM[index] &&\r\n                  <input className=\"form-control\" value={schedule[index].오후} onChange={(e) => {\r\n                    const _schedule = schedule.map((_schedule, _index) => {\r\n                      if (_index === index) {\r\n                        return {\r\n                          ..._schedule,\r\n                          오후: e.target.value\r\n                        }\r\n                      }\r\n                      return _schedule;\r\n                    })\r\n                    setSchedule(_schedule);\r\n                  }}/>\r\n                }\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div class=\"schedule__all\">\r\n          아래에서 값 선택 시 해당 주의 모든 일정에 선택한 값이 전체 적용됩니다.\r\n          <select className=\"form-control\" onChange={(e) => {\r\n            if(e.target.value == '') {\r\n              setIsEtcAM([true, true, true, true, true]);\r\n              setIsEtcPM([true, true, true, true, true]);\r\n            } else {\r\n              setIsEtcAM([false, false, false, false, false]);\r\n              setIsEtcPM([false, false, false, false, false]);\r\n            }\r\n            const _schedule = schedule.map((_schedule) => {\r\n              return {\r\n                ..._schedule,\r\n                오전: e.target.value,\r\n                오후: e.target.value\r\n              }\r\n            })\r\n            setSchedule(_schedule);\r\n          }}>\r\n            <option>선택하세요</option>\r\n            <option value=\"\">기타</option>\r\n            {places.map((place, index) => (\r\n              <option key={index} value={place.name}>{place.name}</option>\r\n            ))}\r\n            <option value=\"휴무일\">휴무일</option>\r\n            <option value=\"교육\">교육</option>\r\n            <option value=\"재택\">재택</option>\r\n            <option value=\"휴가\">휴가</option>\r\n          </select>\r\n          {!isEtcAM.filter((item) => !item).length && \r\n          !isEtcPM.filter((item) => !item).length &&\r\n          <input className=\"form-control\" value={schedule[0].오전} onChange={(e) => {\r\n            const _schedule = schedule.map((_schedule) => {\r\n              return {\r\n                ..._schedule,\r\n                오전: e.target.value,\r\n                오후: e.target.value\r\n              }\r\n            })\r\n            setSchedule(_schedule);\r\n          }}/>\r\n          }\r\n        </div>\r\n        <Button color=\"primary\" onClick={onClickSave}>저장</Button>\r\n      </Widget>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NewScheduleWeek;"]},"metadata":{},"sourceType":"module"}