{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\report\\\\NewReport.js\";\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Row, Col } from \"reactstrap\";\nimport Table from \"reactstrap/lib/Table\";\nimport Widget from \"../../components/Widget/Widget\";\nimport './NewReport.scss';\nimport { useCookies } from 'react-cookie';\n\nvar NewReport = function NewReport() {\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      projects = _useState2[0],\n      setProjects = _useState2[1];\n\n  var _useState3 = useState({\n    project_id: '',\n    프로젝트: '',\n    작성자: '',\n    금주계획: '',\n    금주진행: '',\n    차주계획: '',\n    특이사항: '',\n    비고: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      report = _useState4[0],\n      setReport = _useState4[1];\n\n  var _useState5 = useState({\n    금주계획: '',\n    금주진행: '',\n    차주계획: '',\n    특이사항: '',\n    비고: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lastReport = _useState6[0],\n      setLastReport = _useState6[1];\n\n  var cssStart = \"<span style='background-color: #ffff00'>\";\n  var cssEnd = \"</span>\";\n\n  var adjustHeight = function adjustHeight(id) {\n    var textEle = document.getElementById(id);\n    return textEle ? textEle.scrollHeight : 30;\n  };\n\n  var onClickSubmit = function onClickSubmit() {\n    if (!report.project_id) {\n      alert(\"프로젝트를 선택해주세요.\");\n      return;\n    } else if (!report.작성자) {\n      alert(\"작성자를 적어주세요.\");\n      return;\n    }\n\n    var result = window.confirm(\"등록하시겠습니까?\");\n\n    if (result) {\n      axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports/add\"), {\n        report: _objectSpread(_objectSpread({}, report), {}, {\n          최종수정시간: new Date()\n        })\n      }).then(function (res) {\n        alert(\"등록되었습니다.\");\n      }).catch(function (err) {\n        if (cookies.token) {\n          removeCookie('token');\n        }\n\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n        window.location.href = \"/\";\n      });\n      window.location.href = \"#/app/projects/reports\";\n    }\n  };\n\n  var onChange = function onChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n\n    switch (name) {\n      case \"프로젝트\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          프로젝트: value\n        }));\n\n      case \"작성자\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          작성자: value\n        }));\n\n      case \"금주계획\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          금주계획: value\n        }));\n\n      case \"금주진행\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          금주진행: value\n        }));\n\n      case \"차주계획\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          차주계획: value\n        }));\n\n      case \"특이사항\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          특이사항: value\n        }));\n\n      case \"비고\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          비고: value\n        }));\n\n      default:\n        return;\n    }\n  };\n\n  useEffect(function () {\n    var tempProject = projects.find(function (_ref) {\n      var 프로젝트명 = _ref.프로젝트명;\n      return 프로젝트명 === report.프로젝트;\n    });\n\n    if (tempProject) {\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        project_id: tempProject.id\n      }));\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports/search/last?pid=\").concat(tempProject.id)).then(function (res) {\n        var _lastReport = res.data.find(function (_ref2) {\n          var 최종수정시간 = _ref2.최종수정시간;\n          return (new Date(최종수정시간).getWeek(3) === new Date().getWeek(3) - 1 || new Date(최종수정시간.substring(0, 10)).getWeek(3) === new Date().getWeek(3) - 1) && (new Date(최종수정시간).getFullYear() === new Date().getFullYear() || new Date(최종수정시간.substring(0, 10)).getFullYear() === new Date().getFullYear());\n        });\n\n        _lastReport ? setLastReport(_objectSpread({}, _lastReport)) : setLastReport({\n          금주계획: '',\n          금주진행: '',\n          차주계획: '',\n          특이사항: '',\n          비고: ''\n        });\n      }).catch(function (err) {\n        if (cookies.token) {\n          removeCookie('token');\n        }\n\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n        window.location.href = \"/\";\n      });\n    } else {\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        project_id: ''\n      }));\n    }\n  }, [report.프로젝트]);\n  useEffect(function () {\n    findAllInfos();\n  });\n\n  var findAllInfos = function findAllInfos() {\n    var id = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n    axios.all([axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/projects\")), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/members/search?id=\").concat(id)), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports\"))]).then(axios.spread(function (res, res2, res3) {\n      var thisReport = res3.data.filter(function (report) {\n        return new Date(report.최종수정시간).getFullYear() == new Date().getFullYear() && new Date(report.최종수정시간).getWeek(3) == new Date().getWeek(3) || new Date(report.최종수정시간.substring(0, 10)).getFullYear() == new Date().getFullYear() && new Date(report.최종수정시간.substring(0, 10)).getWeek(3) == new Date().getWeek(3);\n      });\n\n      var _projects = res.data.filter(function (project) {\n        return project.주간보고서 == \"1\" && project.year == new Date().getFullYear() && project.상태 != \"8.Dropped\" && (project.투입명단.includes(id) || project.PM == id || res2.data[0] && project.팀매출 == res2.data[0].team && res2.data[0].직책 == '팀장' || res2.data[0] && res2.data[0].직책 == '실장');\n      }).filter(function (project) {\n        return !thisReport.find(function (report) {\n          return report.project_id == project.id;\n        });\n      });\n\n      setProjects(_projects);\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        작성자: JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : ''\n      }));\n    })).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n  };\n\n  function highlightText() {\n    //강조버튼 클릭시 해당 내용을 강조하는 함수\n    var selection = \"\";\n\n    if (document.getSelection) {\n      //크롬\n      selection = document.getSelection();\n    } else if (document.selection) {\n      //익스\n      selection = document.selection.createRange().text;\n    }\n\n    try {\n      var selectionTextArea = selection.anchorNode.lastElementChild; //선택된 textArea\n\n      if (selectionTextArea.name === \"프로젝트\" || selectionTextArea.name === \"작성자\") return; //getCssIndex(selectionTextArea.value); //선택된 textArea에 css 태그 index 가져오기\n\n      var selectStartIndex = selectionTextArea.selectionStart; // 드래그 영역 selectStartIndex~selectEndIndex-1\n\n      var selectEndIndex = selectionTextArea.selectionEnd;\n      var content = selectionTextArea.value; // aaAAbb => aa AA bb\n\n      var dragBefore = selectionTextArea.value.substring(0, selectStartIndex);\n      var drag = selectionTextArea.value.substring(selectStartIndex, selectEndIndex); //강조할 부분\n\n      var dragAfter = selectionTextArea.value.substring(selectEndIndex, content.length); // aa<span>AA</span>bb -> AA만 드래그 했을 경우 고려해서 => aa <span>AA</span> bb\n\n      var includeDragBefore = selectionTextArea.value.substring(0, selectStartIndex - cssStart.length);\n      var includeDrag = selectionTextArea.value.substring(selectStartIndex - cssStart.length, selectEndIndex + cssEnd.length);\n      var includeDragAfter = selectionTextArea.value.substring(selectEndIndex + cssEnd.length, content.length); // <span></span> +- 과정에서 인덱스 벗어나는 경우 고려\n\n      if (selectStartIndex - cssStart.length < 0 && selectEndIndex + cssEnd.length >= content.length) {\n        includeDragBefore = dragBefore;\n        includeDrag = drag;\n        includeDragAfter = dragAfter;\n      } else if (selectStartIndex - cssStart.length < 0) {\n        includeDragBefore = \"\";\n        includeDrag = selectionTextArea.value.substring(0, selectEndIndex + cssEnd.length);\n      } else if (selectEndIndex + cssEnd.length >= content.length) {\n        selectionTextArea.value.substring(selectStartIndex - cssStart.length, content.length);\n        includeDragAfter = \"\";\n      }\n\n      if (hasHighlight(includeDrag)) {\n        // 강조 해제\n        includeDrag = includeDrag.replaceAll(cssStart, \"\");\n        includeDrag = includeDrag.replaceAll(cssEnd, \"\");\n        dragBefore = includeDragBefore;\n        drag = includeDrag;\n        dragAfter = includeDragAfter;\n      } else {\n        // 강조\n        drag = cssStart + drag + cssEnd;\n      }\n\n      selectionTextArea.value = dragBefore + drag + dragAfter;\n      var name = selectionTextArea.name;\n\n      switch (name) {\n        case \"금주계획\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            금주계획: selectionTextArea.value\n          }));\n\n        case \"금주진행\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            금주진행: selectionTextArea.value\n          }));\n\n        case \"차주계획\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            차주계획: selectionTextArea.value\n          }));\n\n        case \"특이사항\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            특이사항: selectionTextArea.value\n          }));\n\n        case \"비고\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            비고: selectionTextArea.value\n          }));\n\n        default:\n          return;\n      }\n    } catch (err) {}\n  }\n\n  function hasHighlight(content) {\n    //강조되어있는지 확인하는 함수\n    if (content.indexOf(cssStart, 0) != -1 || content.indexOf(cssEnd, 0) != -1) return true; //cssStart와 cssEnd 둘 중 하나라도 가지고 있으면 true\n\n    return false;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    style: {\n      paddingTop: 2 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }, \"\\uD504\\uB85C\\uC81D\\uD2B8\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    name: \"\\uD504\\uB85C\\uC81D\\uD2B8\",\n    value: report.프로젝트,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    disabled: true,\n    hidden: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 23\n    }\n  }), projects.map(function (_ref3, index) {\n    var 프로젝트명 = _ref3.프로젝트명;\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: 프로젝트명,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 27\n      }\n    }, 프로젝트명);\n  })))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 19\n    }\n  }, \"\\uC791\\uC131\\uC790\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"\\uC791\\uC131\\uC790\",\n    disabled: true,\n    value: JSON.parse(localStorage.getItem(\"userInfo\")).name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 23\n    }\n  })))))), /*#__PURE__*/React.createElement(Widget, {\n    style: {\n      paddingTop: 2 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-warning\",\n    onClick: highlightText,\n    style: {\n      zIndex: 10,\n      position: 'fixed',\n      right: 1 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, \"\\uAC15\\uC870\"), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"col-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 19\n    }\n  }, \"(\\uC804)\\uAE08\\uC8FC\\uACC4\\uD68D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"col-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 19\n    }\n  }, \"\\uAE08\\uC8FC\\uACC4\\uD68D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.금주계획\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uAE08\\uC8FC\\uACC4\\uD68D\",\n    maxLength: \"5000\",\n    value: report.금주계획,\n    id: \"thisplan\",\n    style: {\n      height: adjustHeight(\"thisplan\") + 'px'\n    },\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 19\n    }\n  }, \"(\\uC804)\\uAE08\\uC8FC\\uC9C4\\uD589\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 19\n    }\n  }, \"\\uAE08\\uC8FC\\uC9C4\\uD589\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.금주진행\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uAE08\\uC8FC\\uC9C4\\uD589\",\n    maxLength: \"10000\",\n    value: report.금주진행,\n    id: \"thisprogress\",\n    style: {\n      height: adjustHeight(\"thisprogress\") + 'px'\n    },\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, \"(\\uC804)\\uCC28\\uC8FC\\uACC4\\uD68D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 19\n    }\n  }, \"\\uCC28\\uC8FC\\uACC4\\uD68D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.차주계획\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uCC28\\uC8FC\\uACC4\\uD68D\",\n    maxLength: \"5000\",\n    value: report.차주계획,\n    id: \"nextplan\",\n    style: {\n      height: adjustHeight(\"nextplan\") + 'px'\n    },\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 19\n    }\n  }, \"(\\uC804)\\uD2B9\\uC774\\uC0AC\\uD56D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 19\n    }\n  }, \"\\uD2B9\\uC774\\uC0AC\\uD56D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.특이사항\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uD2B9\\uC774\\uC0AC\\uD56D\",\n    maxLength: \"5000\",\n    value: report.특이사항,\n    id: \"special\",\n    style: {\n      height: adjustHeight(\"special\") + 'px'\n    },\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 19\n    }\n  }, \"(\\uC804)\\uBE44\\uACE0\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }\n  }, \"\\uBE44\\uACE0\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.비고\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uBE44\\uACE0\",\n    maxLength: \"5000\",\n    value: report.비고,\n    id: \"etc\",\n    style: {\n      height: adjustHeight(\"etc\") + 'px'\n    },\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: onClickSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  }, \"\\uB4F1\\uB85D\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/projects/reports\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 46\n    }\n  }, \"\\uCDE8\\uC18C\"))))));\n};\n\nexport default NewReport;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/report/NewReport.js"],"names":["axios","React","useEffect","useState","Link","Row","Col","Table","Widget","useCookies","NewReport","cookies","removeCookie","projects","setProjects","project_id","프로젝트","작성자","금주계획","금주진행","차주계획","특이사항","비고","report","setReport","lastReport","setLastReport","cssStart","cssEnd","adjustHeight","id","textEle","document","getElementById","scrollHeight","onClickSubmit","alert","result","window","confirm","post","process","env","REACT_APP_API_URL","최종수정시간","Date","then","res","catch","err","token","location","href","onChange","e","target","name","value","tempProject","find","프로젝트명","get","_lastReport","data","getWeek","substring","getFullYear","findAllInfos","JSON","parse","localStorage","getItem","defaults","headers","common","all","spread","res2","res3","thisReport","filter","_projects","project","주간보고서","year","상태","투입명단","includes","PM","팀매출","team","직책","highlightText","selection","getSelection","createRange","text","selectionTextArea","anchorNode","lastElementChild","selectStartIndex","selectionStart","selectEndIndex","selectionEnd","content","dragBefore","drag","dragAfter","length","includeDragBefore","includeDrag","includeDragAfter","hasHighlight","replaceAll","indexOf","paddingTop","fontWeight","map","index","zIndex","position","right","__html","height"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Row, Col } from \"reactstrap\";\r\nimport Table from \"reactstrap/lib/Table\";\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport './NewReport.scss';\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst NewReport = () => {\r\n  const [cookies, removeCookie ] = useCookies(['token']);\r\n  const [projects , setProjects] = useState([]);\r\n  const [report, setReport] = useState({\r\n    project_id: '',\r\n    프로젝트: '',\r\n    작성자: '',\r\n    금주계획: '',\r\n    금주진행: '',\r\n    차주계획: '',\r\n    특이사항: '',\r\n    비고: '',\r\n  });\r\n  const [lastReport, setLastReport] = useState({\r\n    금주계획: '',\r\n    금주진행: '',\r\n    차주계획: '',\r\n    특이사항: '',\r\n    비고: ''\r\n  });\r\n  const cssStart = \"<span style='background-color: #ffff00'>\"\r\n  const cssEnd = \"</span>\";\r\n\r\n  const adjustHeight = (id) => {\r\n    const textEle = document.getElementById(id);\r\n    return(textEle ? textEle.scrollHeight : 30);\r\n  };\r\n\r\n  const onClickSubmit = () => {\r\n    if (!report.project_id) {\r\n      alert(\"프로젝트를 선택해주세요.\");\r\n      return;\r\n    } else if (!report.작성자) {\r\n      alert(\"작성자를 적어주세요.\");\r\n      return;\r\n    }\r\n    const result = window.confirm(\"등록하시겠습니까?\");\r\n    if (result) {\r\n      axios.post(`http://${process.env.REACT_APP_API_URL}/reports/add`, {report: {...report, 최종수정시간: new Date()}})\r\n      .then(res => {\r\n        alert(\"등록되었습니다.\");\r\n      })\r\n      .catch(err => {\r\n        if (cookies.token) {\r\n          removeCookie('token');\r\n        }\r\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n        window.location.href = \"/\";\r\n      });\r\n      window.location.href = \"#/app/projects/reports\";\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    switch (name) {\r\n      case \"프로젝트\":\r\n        return(setReport({ ...report, 프로젝트: value }));\r\n      case \"작성자\":\r\n        return(setReport({ ...report, 작성자: value }));\r\n      case \"금주계획\":\r\n        return(setReport({ ...report, 금주계획: value }));\r\n      case \"금주진행\":\r\n        return(setReport({ ...report, 금주진행: value }));\r\n      case \"차주계획\":\r\n        return(setReport({ ...report, 차주계획: value }));\r\n      case \"특이사항\":\r\n        return(setReport({ ...report, 특이사항: value }));\r\n      case \"비고\":\r\n        return(setReport({ ...report, 비고: value }));\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  useEffect(()=> {\r\n    const tempProject = projects.find(({프로젝트명}) => 프로젝트명 === report.프로젝트);\r\n    if (tempProject) {\r\n      setReport({ ...report, project_id: tempProject.id });\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/reports/search/last?pid=${tempProject.id}`)\r\n      .then((res) => {\r\n        const _lastReport = res.data.find(({최종수정시간}) => \r\n        ((new Date(최종수정시간).getWeek(3) === new Date().getWeek(3) - 1) || (new Date(최종수정시간.substring(0,10)).getWeek(3) === new Date().getWeek(3) - 1)) \r\n        && ((new Date(최종수정시간).getFullYear() === new Date().getFullYear()) || (new Date(최종수정시간.substring(0,10)).getFullYear() === new Date().getFullYear())));\r\n        _lastReport ? setLastReport({..._lastReport}) : setLastReport({금주계획: '', 금주진행: '', 차주계획: '', 특이사항: '', 비고: ''});\r\n      })\r\n      .catch(err => {\r\n        if (cookies.token) {\r\n          removeCookie('token');\r\n        }\r\n        alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n        window.location.href = \"/\";\r\n      });\r\n    } else {\r\n      setReport({ ...report, project_id: '' });\r\n    }\r\n  }, [report.프로젝트])\r\n\r\n  useEffect(()=> {\r\n    findAllInfos();\r\n  });\r\n\r\n  const findAllInfos = () => {\r\n    const id = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    axios.all([\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/projects`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/members/search?id=${id}`),\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/reports`)\r\n    ])\r\n    .then(\r\n      axios.spread((res, res2, res3) => {\r\n      const thisReport = res3.data.filter(report =>\r\n        (new Date(report.최종수정시간).getFullYear() == new Date().getFullYear() && new Date(report.최종수정시간).getWeek(3) == new Date().getWeek(3))\r\n        || (new Date(report.최종수정시간.substring(0,10)).getFullYear() == new Date().getFullYear() && new Date(report.최종수정시간.substring(0,10)).getWeek(3) == new Date().getWeek(3)));\r\n      const _projects = res.data.filter((project) => project.주간보고서 == \"1\" && project.year == new Date().getFullYear() && project.상태 != \"8.Dropped\"\r\n      && (project.투입명단.includes(id) || project.PM == id \r\n      || (res2.data[0] && project.팀매출 == res2.data[0].team && res2.data[0].직책 == '팀장')\r\n      || (res2.data[0] && res2.data[0].직책 == '실장')))\r\n      .filter(project => !thisReport.find(report => report.project_id == project.id));\r\n      setProjects(_projects);\r\n      setReport({ ...report, 작성자: JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '' });\r\n    }))\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n  }\r\n\r\n  function highlightText() { //강조버튼 클릭시 해당 내용을 강조하는 함수\r\n    let selection = \"\";\r\n    if (document.getSelection) { //크롬\r\n      selection = document.getSelection();\r\n    } else if (document.selection) { //익스\r\n      selection = document.selection.createRange().text;\r\n    }\r\n    try {\r\n      let selectionTextArea = selection.anchorNode.lastElementChild; //선택된 textArea\r\n      if (selectionTextArea.name === \"프로젝트\" || selectionTextArea.name === \"작성자\")\r\n        return;\r\n      //getCssIndex(selectionTextArea.value); //선택된 textArea에 css 태그 index 가져오기\r\n      let selectStartIndex = selectionTextArea.selectionStart; // 드래그 영역 selectStartIndex~selectEndIndex-1\r\n      let selectEndIndex = selectionTextArea.selectionEnd;\r\n      let content = selectionTextArea.value;\r\n\r\n      // aaAAbb => aa AA bb\r\n      let dragBefore = selectionTextArea.value.substring(0, selectStartIndex);\r\n      let drag = selectionTextArea.value.substring(selectStartIndex, selectEndIndex); //강조할 부분\r\n      let dragAfter = selectionTextArea.value.substring(selectEndIndex, content.length);\r\n\r\n      // aa<span>AA</span>bb -> AA만 드래그 했을 경우 고려해서 => aa <span>AA</span> bb\r\n      let includeDragBefore = selectionTextArea.value.substring(0, selectStartIndex-cssStart.length)\r\n      let includeDrag = selectionTextArea.value.substring(selectStartIndex-cssStart.length, selectEndIndex+cssEnd.length) \r\n      let includeDragAfter = selectionTextArea.value.substring(selectEndIndex+cssEnd.length, content.length);\r\n      \r\n      // <span></span> +- 과정에서 인덱스 벗어나는 경우 고려\r\n      if((selectStartIndex-cssStart.length < 0)&&(selectEndIndex+cssEnd.length>=content.length)){\r\n        includeDragBefore = dragBefore;\r\n        includeDrag = drag;\r\n        includeDragAfter = dragAfter;\r\n      }\r\n      else if(selectStartIndex-cssStart.length < 0){\r\n        includeDragBefore = \"\";\r\n        includeDrag = selectionTextArea.value.substring(0, selectEndIndex+cssEnd.length)\r\n      }\r\n      else if(selectEndIndex+cssEnd.length>=content.length){\r\n        selectionTextArea.value.substring(selectStartIndex-cssStart.length, content.length)\r\n        includeDragAfter = \"\";\r\n      }\r\n      \r\n      if(hasHighlight(includeDrag)){ // 강조 해제\r\n        includeDrag = includeDrag.replaceAll(cssStart,\"\");\r\n        includeDrag = includeDrag.replaceAll(cssEnd, \"\");\r\n        dragBefore = includeDragBefore;\r\n        drag = includeDrag;\r\n        dragAfter = includeDragAfter;\r\n      }\r\n      else{ // 강조\r\n        drag = cssStart + drag + cssEnd;\r\n      }\r\n      selectionTextArea.value = dragBefore + drag + dragAfter;\r\n      const { name } = selectionTextArea;\r\n      switch (name) {\r\n        case \"금주계획\":\r\n          return(setReport({ ...report, 금주계획: selectionTextArea.value }));\r\n        case \"금주진행\":\r\n          return(setReport({ ...report, 금주진행: selectionTextArea.value }));\r\n        case \"차주계획\":\r\n          return(setReport({ ...report, 차주계획: selectionTextArea.value }));\r\n        case \"특이사항\":\r\n          return(setReport({ ...report, 특이사항: selectionTextArea.value }));\r\n        case \"비고\":\r\n          return(setReport({ ...report, 비고: selectionTextArea.value }));\r\n        default:\r\n          return;\r\n      }\r\n    } catch (err) {\r\n    }\r\n  }\r\n\r\n  function hasHighlight(content){ //강조되어있는지 확인하는 함수\r\n    if(content.indexOf(cssStart,0)!=-1 || content.indexOf(cssEnd,0) != -1)\r\n      return true; //cssStart와 cssEnd 둘 중 하나라도 가지고 있으면 true\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Widget style={{paddingTop: 2+'rem'}}>\r\n            <Table>\r\n              <tbody>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td>프로젝트</td>\r\n                  <td>\r\n                    <select className=\"form-control\" name=\"프로젝트\" value={report.프로젝트} onChange={onChange}>\r\n                      <option value=\"\" disabled hidden></option>\r\n                      {projects\r\n                      .map(({프로젝트명}, index) => {\r\n                        return (\r\n                          <option value={프로젝트명} key={index}>{프로젝트명}</option>\r\n                        )\r\n                      })}\r\n                    </select>\r\n                  </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td>작성자</td>\r\n                  <td><input className=\"form-control\" type=\"text\" name=\"작성자\" disabled value={JSON.parse(localStorage.getItem(\"userInfo\")).name}/></td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n          </Widget>\r\n          <Widget style={{paddingTop: 2+'rem'}}>\r\n            <button className=\"btn btn-warning\" onClick={highlightText} style={{zIndex: 10, position: 'fixed', right:1+'rem' }}>강조</button>\r\n            <Table>\r\n              <tbody>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td className=\"col-1\">(전)금주계획</td>\r\n                  <td className=\"col-1\">금주계획</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"newReport__td\">\r\n                    <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.금주계획} }></p>\r\n                  </td>\r\n                  <td className=\"newReport__td\">\r\n                    <textarea \r\n                      type=\"text\" \r\n                      name=\"금주계획\"\r\n                      maxLength=\"5000\" \r\n                      value={report.금주계획}\r\n                      id=\"thisplan\"\r\n                      style={{height: adjustHeight(\"thisplan\")+'px'}}\r\n                      onChange={onChange}/>\r\n                    </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td className=\"newReport__td\">(전)금주진행</td>\r\n                  <td className=\"newReport__td\">금주진행</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"newReport__td\">\r\n                    <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.금주진행} }></p>\r\n                  </td>\r\n                  <td className=\"newReport__td\">\r\n                    <textarea\r\n                      type=\"text\" \r\n                      name=\"금주진행\" \r\n                      maxLength=\"10000\" \r\n                      value={report.금주진행}\r\n                      id=\"thisprogress\"\r\n                      style={{height: adjustHeight(\"thisprogress\")+'px'}}\r\n                      onChange={onChange}/>\r\n                    </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td className=\"newReport__td\">(전)차주계획</td>\r\n                  <td className=\"newReport__td\">차주계획</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"newReport__td\">\r\n                    <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.차주계획} }></p>\r\n                  </td>\r\n                  <td className=\"newReport__td\">\r\n                    <textarea\r\n                      type=\"text\" \r\n                      name=\"차주계획\" \r\n                      maxLength=\"5000\" \r\n                      value={report.차주계획}\r\n                      id=\"nextplan\"\r\n                      style={{height: adjustHeight(\"nextplan\")+'px'}}\r\n                      onChange={onChange}/>\r\n                    </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td className=\"newReport__td\">(전)특이사항</td>\r\n                  <td className=\"newReport__td\">특이사항</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"newReport__td\">\r\n                    <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.특이사항} }></p>\r\n                  </td>\r\n                  <td className=\"newReport__td\">\r\n                    <textarea\r\n                      type=\"text\" \r\n                      name=\"특이사항\" \r\n                      maxLength=\"5000\" \r\n                      value={report.특이사항}\r\n                      id=\"special\"\r\n                      style={{height: adjustHeight(\"special\")+'px'}}\r\n                      onChange={onChange}/>\r\n                    </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td className=\"newReport__td\">(전)비고</td>\r\n                  <td className=\"newReport__td\">비고</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"newReport__td\">\r\n                    <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.비고} }></p>\r\n                  </td>\r\n                  <td className=\"newReport__td\">\r\n                    <textarea\r\n                      type=\"text\" \r\n                      name=\"비고\" \r\n                      maxLength=\"5000\" \r\n                      value={report.비고}\r\n                      id=\"etc\"\r\n                      style={{height: adjustHeight(\"etc\")+'px'}}\r\n                      onChange={onChange}/>\r\n                    </td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n            <button className=\"btn btn-primary\" onClick={onClickSubmit}>등록</button>\r\n            <Link to=\"/app/projects/reports\"><button className=\"btn btn-primary\">취소</button></Link>\r\n          </Widget>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewReport;"]},"metadata":{},"sourceType":"module"}