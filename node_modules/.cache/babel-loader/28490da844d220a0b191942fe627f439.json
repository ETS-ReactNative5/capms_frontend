{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\login\\\\Login.js\";\nimport React from \"react\";\nimport { useHistory } from 'react-router';\nimport PropTypes from \"prop-types\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Alert, Button, Label, Input, FormGroup } from \"reactstrap\";\nimport Widget from \"../../components/Widget\";\nimport { loginUser } from \"../../actions/user\";\nimport s from './Login.module.scss';\nimport signinImg from \"../../images/signinImg.svg\";\nimport img1 from \"../../images/Vector-1.svg\";\nimport img2 from \"../../images/Vector-2.svg\";\nimport img3 from \"../../images/Vector-3.svg\";\nimport img4 from \"../../images/Vector-4.svg\";\nimport { request } from \"../../utils/axios\";\nimport Axios from \"axios\";\n\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      authority: \"\",\n      author: \"\",\n      loginStatus: \"\",\n      checked: false\n    };\n    _this.doLogin = _this.doLogin.bind(_assertThisInitialized(_this));\n    _this.changeEmail = _this.changeEmail.bind(_assertThisInitialized(_this));\n    _this.changePassword = _this.changePassword.bind(_assertThisInitialized(_this));\n    _this.signUp = _this.signUp.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"changeEmail\",\n    value: function changeEmail(event) {\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"changePassword\",\n    value: function changePassword(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"doLogin\",\n    value: function doLogin(e) {\n      var _this2 = this;\n\n      e.preventDefault(); // 새로고침 안됨\n\n      Axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/login/admin\"), //DB연동\n      {\n        email: this.state.email,\n        password: this.state.password\n      }).then(function (response) {\n        if (response.data.length > 0) {\n          localStorage.setItem(\"email\", _this2.state.email);\n          alert(\"관리자 로그인 성공!! 오늘 하루도 파이팅 하세요!\");\n          localStorage.setItem('authenticated', true);\n\n          _this2.props.history.push(\"/\");\n        } else {\n          Axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/login/guest\"), //DB연동\n          {\n            email: _this2.state.email,\n            password: _this2.state.password\n          }).then(function (response) {\n            if (response.data.length > 0) {\n              localStorage.setItem(\"email\", _this2.state.email);\n              alert(\"게스트 로그인 성공!! 오늘 하루도 파이팅 하세요!\");\n              localStorage.setItem('authenticated', true);\n\n              _this2.props.history.push(\"/\");\n            } else {\n              alert(\"아이디 / 비밀번호 오류!! 또는 접근 권한이 없습니다\");\n            }\n          });\n        }\n      });\n      /* this.props.dispatch( //rgisterUser에 값 삽입\r\n        loginUser({\r\n          creds: {\r\n            email: this.state.email,\r\n            password: this.state.password,\r\n          },\r\n          history: this.props.history,\r\n        })\r\n      ); */\n    }\n  }, {\n    key: \"signUp\",\n    value: function signUp() {\n      this.props.history.push(\"/Dashboard\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _ref = this.props.location.state || {\n        from: {\n          pathname: '/app'\n        }\n      },\n          from = _ref.from; // eslint-disable-line\n      // cant access login page while logged in\n\n\n      if (Login.isAuthenticated(JSON.parse(localStorage.getItem('authenticated')))) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: from,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 11\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth-page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Widget, {\n        className: \"widget-auth my-auto\",\n        title: /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"mt-0 mb-2\",\n          style: {\n            fontSize: 40\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }\n        }, \"Login\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"widget-auth-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, \"Welcome Back! Please login to your account\"), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"mt\",\n        onSubmit: this.doLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }, this.props.errorMessage && /*#__PURE__*/React.createElement(Alert, {\n        className: \"alert-sm\",\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      }, this.props.errorMessage), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }\n      }, \"ID\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        onChange: this.changeEmail,\n        required: true,\n        name: \"email\",\n        placeholder: \"Enter your username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"search-input1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        onChange: this.changePassword,\n        type: \"password\",\n        required: true,\n        name: \"password\",\n        placeholder: \"Enter your password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        color: \"warning\",\n        className: \"auth-btn mb-3\",\n        size: \"sm\",\n        onChange: this.changeAuthority,\n        onClick: function onClick(e) {\n          return _this3.doLogin(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, this.props.isFetching ? \"Loading...\" : \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"widget-auth-info text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      }, \"Or\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }, \"\\uD68C\\uC6D0\\uC774 \\uC5C6\\uC73C\\uC2E0\\uAC00\\uC694?\", \" \", /*#__PURE__*/React.createElement(Link, {\n        to: \"register\",\n        className: \"ml-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }\n      }, \"\\uD68C\\uC6D0\\uAC00\\uC785\")))), /*#__PURE__*/React.createElement(\"img\", {\n        src: signinImg,\n        alt: \"signin\",\n        className: \"backImg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }));\n    }\n  }], [{\n    key: \"isAuthenticated\",\n    value: function isAuthenticated(token) {\n      if (token) return true;\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\n_defineProperty(Login, \"propTypes\", {\n  dispatch: PropTypes.func.isRequired\n});\n\nfunction mapStateToProps(state) {\n  return {\n    isFetching: state.auth.isFetching,\n    isAuthenticated: state.auth.isAuthenticated,\n    errorMessage: state.auth.errorMessage\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Login));","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/login/Login.js"],"names":["React","useHistory","PropTypes","withRouter","Redirect","Link","connect","Alert","Button","Label","Input","FormGroup","Widget","loginUser","s","request","Axios","Login","props","state","email","password","authority","author","loginStatus","checked","doLogin","bind","changeEmail","changePassword","signUp","event","setState","target","value","e","preventDefault","post","process","env","REACT_APP_API_URL","then","response","data","length","localStorage","setItem","alert","history","push","location","from","pathname","isAuthenticated","JSON","parse","getItem","fontSize","errorMessage","changeAuthority","isFetching","signinImg","token","Component","dispatch","func","isRequired","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport  {useHistory} from 'react-router'; \r\nimport PropTypes from \"prop-types\";\r\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Alert, Button, Label, Input, FormGroup } from \"reactstrap\";\r\nimport Widget from \"../../components/Widget\";\r\nimport { loginUser } from \"../../actions/user\";\r\nimport s from './Login.module.scss';\r\nimport signinImg from \"../../images/signinImg.svg\";\r\nimport img1 from \"../../images/Vector-1.svg\";\r\nimport img2 from \"../../images/Vector-2.svg\";\r\nimport img3 from \"../../images/Vector-3.svg\";\r\nimport img4 from \"../../images/Vector-4.svg\";\r\nimport { request } from \"../../utils/axios\";\r\nimport Axios from \"axios\";\r\n\r\nclass Login extends React.Component {\r\n  static propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n  };\r\n\r\n\r\n  static isAuthenticated(token) {\r\n    if (token) return true;\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      authority: \"\",\r\n      author: \"\",\r\n      loginStatus: \"\",\r\n      checked: false,\r\n    };\r\n\r\n    this.doLogin = this.doLogin.bind(this);\r\n    this.changeEmail = this.changeEmail.bind(this);\r\n    this.changePassword = this.changePassword.bind(this);\r\n    this.signUp = this.signUp.bind(this);\r\n  }\r\n\r\n\r\n  changeEmail(event) {\r\n    this.setState({ email: event.target.value });\r\n  }\r\n\r\n  changePassword(event) {\r\n    this.setState({ password: event.target.value });\r\n  }\r\n\r\n \r\n\r\n\r\n\r\n  doLogin(e) {\r\n    e.preventDefault();// 새로고침 안됨\r\n\r\n    Axios.post(`http://${process.env.REACT_APP_API_URL}/login/admin`, //DB연동\r\n    {\r\n      email: this.state.email, password: this.state.password \r\n    }).then((response)=>{\r\n      if(response.data.length>0){\r\n        \r\n        localStorage.setItem(\"email\", this.state.email);\r\n        \r\n        alert(\"관리자 로그인 성공!! 오늘 하루도 파이팅 하세요!\");\r\n        localStorage.setItem('authenticated', true);\r\n        this.props.history.push(\"/\");\r\n      }\r\n      else{\r\n        Axios.post(`http://${process.env.REACT_APP_API_URL}/login/guest`, //DB연동\r\n        {\r\n        email: this.state.email, password: this.state.password \r\n        }).then((response)=>{\r\n          if(response.data.length>0){\r\n        \r\n          localStorage.setItem(\"email\", this.state.email);\r\n          alert(\"게스트 로그인 성공!! 오늘 하루도 파이팅 하세요!\");\r\n          localStorage.setItem('authenticated', true);\r\n          this.props.history.push(\"/\");\r\n          }\r\n          else{\r\n            alert(\"아이디 / 비밀번호 오류!! 또는 접근 권한이 없습니다\");\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n\r\n    /* this.props.dispatch( //rgisterUser에 값 삽입\r\n      loginUser({\r\n        creds: {\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n        },\r\n        history: this.props.history,\r\n      })\r\n    ); */\r\n  }\r\n  \r\n  signUp() {\r\n    this.props.history.push(\"/Dashboard\");\r\n  }\r\n\r\n  render() {\r\n    const { from } = this.props.location.state || { from: { pathname: '/app' } }; // eslint-disable-line\r\n\r\n    // cant access login page while logged in\r\n    if (Login.isAuthenticated(JSON.parse(localStorage.getItem('authenticated')))) {\r\n      return (\r\n          <Redirect to={from} />\r\n      );\r\n    }\r\n\r\n    return (\r\n     \r\n      <div className=\"auth-page\">\r\n        <Widget\r\n          className=\"widget-auth my-auto\"\r\n          title={\r\n            <h3 className=\"mt-0 mb-2\" style={{ fontSize: 40 }}>\r\n              Login\r\n            </h3>\r\n          }\r\n        >\r\n          <p className=\"widget-auth-info\">\r\n            Welcome Back! Please login to your account\r\n          </p>\r\n          <form className=\"mt\" onSubmit={this.doLogin}>\r\n            {this.props.errorMessage && (\r\n              <Alert className=\"alert-sm\" color=\"danger\">\r\n                {this.props.errorMessage}\r\n              </Alert>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <Label for=\"search-input1\">ID</Label>\r\n              <input\r\n                className=\"form-control\"\r\n                onChange={this.changeEmail}\r\n                required\r\n                name=\"email\"\r\n                placeholder=\"Enter your username\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group mb-2\">\r\n              <Label for=\"search-input1\">Password</Label>\r\n              <input\r\n                className=\"form-control\"\r\n                onChange={this.changePassword}\r\n                type=\"password\"\r\n                required\r\n                name=\"password\"\r\n                placeholder=\"Enter your password\"\r\n              />\r\n            </div>\r\n           \r\n            \r\n\r\n            <Button\r\n              type=\"submit\"\r\n              color=\"warning\"\r\n              className=\"auth-btn mb-3\"\r\n              size=\"sm\"\r\n              onChange={this.changeAuthority}\r\n              onClick={(e) => this.doLogin(e)}\r\n            >\r\n              {this.props.isFetching ? \"Loading...\" : \"Login\"}\r\n            </Button>\r\n            \r\n\r\n     \r\n\r\n            <p className=\"widget-auth-info text-center\">Or</p>\r\n              \r\n            \r\n\r\n            <div className={\"d-flex align-items-center\"}>\r\n              회원이 없으신가요?{\" \"}\r\n              <Link to=\"register\" className={\"ml-1\"}>\r\n                회원가입\r\n              </Link>\r\n              \r\n            </div>\r\n              \r\n          \r\n\r\n          </form>\r\n        </Widget>\r\n        <img src={signinImg} alt=\"signin\" className={\"backImg\"} />\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isFetching: state.auth.isFetching,\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    errorMessage: state.auth.errorMessage,\r\n  };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Login));\r\n"]},"metadata":{},"sourceType":"module"}