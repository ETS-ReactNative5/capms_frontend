{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\newReport\\\\NewReport.js\";\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Row, Col } from \"reactstrap\";\nimport Table from \"reactstrap/lib/Table\";\nimport Widget from \"../../components/Widget/Widget\";\nimport './NewReport.scss';\n\nvar NewReport = function NewReport() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      projects = _useState2[0],\n      setProjects = _useState2[1];\n\n  var _useState3 = useState({\n    project_id: '',\n    프로젝트: '',\n    작성자: '',\n    금주계획: '',\n    금주진행: '',\n    차주계획: '',\n    특이사항: '',\n    비고: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      report = _useState4[0],\n      setReport = _useState4[1];\n\n  var _useState5 = useState({\n    금주계획: '',\n    금주진행: '',\n    차주계획: '',\n    특이사항: '',\n    비고: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lastReport = _useState6[0],\n      setLastReport = _useState6[1];\n\n  var cssStart = \"<span style='background-color: #ffff00'>\";\n  var cssEnd = \"</span>\";\n\n  var onClickSubmit = function onClickSubmit() {\n    if (!report.project_id) {\n      alert(\"프로젝트를 선택해주세요.\");\n      return;\n    } else if (!report.작성자) {\n      alert(\"작성자를 적어주세요.\");\n      return;\n    }\n\n    var result = window.confirm(\"등록하시겠습니까?\");\n\n    if (result) {\n      axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports/add\"), {\n        report: _objectSpread(_objectSpread({}, report), {}, {\n          최종수정시간: new Date()\n        })\n      }).then(function (res) {\n        alert(\"등록되었습니다.\");\n      });\n      window.location.href = \"#/app/projects/reports\";\n    }\n  };\n\n  var onChange = function onChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n\n    switch (name) {\n      case \"프로젝트\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          프로젝트: value\n        }));\n\n      case \"작성자\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          작성자: value\n        }));\n\n      case \"금주계획\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          금주계획: value\n        }));\n\n      case \"금주진행\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          금주진행: value\n        }));\n\n      case \"차주계획\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          차주계획: value\n        }));\n\n      case \"특이사항\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          특이사항: value\n        }));\n\n      case \"비고\":\n        return setReport(_objectSpread(_objectSpread({}, report), {}, {\n          비고: value\n        }));\n\n      default:\n        return;\n    }\n  };\n\n  useEffect(function () {\n    var tempProject = projects.find(function (_ref) {\n      var 프로젝트명 = _ref.프로젝트명;\n      return 프로젝트명 === report.프로젝트;\n    });\n\n    if (tempProject) {\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        project_id: tempProject.id\n      }));\n      axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/reports/search/last?pid=\").concat(tempProject.id)).then(function (res) {\n        var _lastReport = res.data.find(function (_ref2) {\n          var 최종수정시간 = _ref2.최종수정시간;\n          return new Date(최종수정시간).getWeek(3) === new Date().getWeek(3) - 1 || new Date(최종수정시간.substring(0, 10)).getWeek(3) == new Date().getWeek(3) - 1;\n        });\n\n        _lastReport ? setLastReport(_objectSpread({}, _lastReport)) : setLastReport({\n          금주계획: '',\n          금주진행: '',\n          차주계획: '',\n          특이사항: '',\n          비고: ''\n        });\n      });\n    } else {\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        project_id: ''\n      }));\n    }\n  }, [report.프로젝트]);\n  useEffect(function () {\n    findAllInfos();\n  }, []);\n\n  var findAllInfos = function findAllInfos() {\n    axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/projects\")).then(function (res) {\n      var _projects = res.data.filter(function (project) {\n        return project.주간보고서 == \"1\";\n      });\n\n      setProjects(_projects);\n      setReport(_objectSpread(_objectSpread({}, report), {}, {\n        작성자: localStorage.getItem(\"id\")\n      }));\n    });\n  };\n\n  function highlightText() {\n    //강조버튼 클릭시 해당 내용을 강조하는 함수\n    var selection = \"\";\n\n    if (document.getSelection) {\n      //크롬\n      selection = document.getSelection();\n    } else if (document.selection) {\n      //익스\n      selection = document.selection.createRange().text;\n    }\n\n    try {\n      var selectionTextArea = selection.anchorNode.lastElementChild; //선택된 textArea\n\n      if (selectionTextArea.name === \"프로젝트\" || selectionTextArea.name === \"작성자\") return; //getCssIndex(selectionTextArea.value); //선택된 textArea에 css 태그 index 가져오기\n\n      var selectStartIndex = selectionTextArea.selectionStart; // 드래그 영역 selectStartIndex~selectEndIndex-1\n\n      var selectEndIndex = selectionTextArea.selectionEnd;\n      var content = selectionTextArea.value; // aaAAbb => aa AA bb\n\n      var dragBefore = selectionTextArea.value.substring(0, selectStartIndex);\n      var drag = selectionTextArea.value.substring(selectStartIndex, selectEndIndex); //강조할 부분\n\n      var dragAfter = selectionTextArea.value.substring(selectEndIndex, content.length); // aa<span>AA</span>bb -> AA만 드래그 했을 경우 고려해서 => aa <span>AA</span> bb\n\n      var includeDragBefore = selectionTextArea.value.substring(0, selectStartIndex - cssStart.length);\n      var includeDrag = selectionTextArea.value.substring(selectStartIndex - cssStart.length, selectEndIndex + cssEnd.length);\n      var includeDragAfter = selectionTextArea.value.substring(selectEndIndex + cssEnd.length, content.length); // <span></span> +- 과정에서 인덱스 벗어나는 경우 고려\n\n      if (selectStartIndex - cssStart.length < 0 && selectEndIndex + cssEnd.length >= content.length) {\n        includeDragBefore = dragBefore;\n        includeDrag = drag;\n        includeDragAfter = dragAfter;\n      } else if (selectStartIndex - cssStart.length < 0) {\n        includeDragBefore = \"\";\n        includeDrag = selectionTextArea.value.substring(0, selectEndIndex + cssEnd.length);\n      } else if (selectEndIndex + cssEnd.length >= content.length) {\n        selectionTextArea.value.substring(selectStartIndex - cssStart.length, content.length);\n        includeDragAfter = \"\";\n      }\n\n      if (hasHighlight(includeDrag)) {\n        // 강조 해제\n        includeDrag = includeDrag.replaceAll(cssStart, \"\");\n        includeDrag = includeDrag.replaceAll(cssEnd, \"\");\n        dragBefore = includeDragBefore;\n        drag = includeDrag;\n        dragAfter = includeDragAfter;\n      } else {\n        // 강조\n        drag = cssStart + drag + cssEnd;\n      }\n\n      selectionTextArea.value = dragBefore + drag + dragAfter;\n      var name = selectionTextArea.name;\n\n      switch (name) {\n        case \"금주계획\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            금주계획: selectionTextArea.value\n          }));\n\n        case \"금주진행\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            금주진행: selectionTextArea.value\n          }));\n\n        case \"차주계획\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            차주계획: selectionTextArea.value\n          }));\n\n        case \"특이사항\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            특이사항: selectionTextArea.value\n          }));\n\n        case \"비고\":\n          return setReport(_objectSpread(_objectSpread({}, report), {}, {\n            비고: selectionTextArea.value\n          }));\n\n        default:\n          return;\n      }\n    } catch (err) {}\n  }\n\n  function hasHighlight(content) {\n    //강조되어있는지 확인하는 함수\n    if (content.indexOf(cssStart, 0) != -1 || content.indexOf(cssEnd, 0) != -1) return true; //cssStart와 cssEnd 둘 중 하나라도 가지고 있으면 true\n\n    return false;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    style: {\n      paddingTop: 2 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, \"\\uD504\\uB85C\\uC81D\\uD2B8\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    name: \"\\uD504\\uB85C\\uC81D\\uD2B8\",\n    value: report.프로젝트,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    disabled: true,\n    hidden: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 23\n    }\n  }), projects.map(function (_ref3, index) {\n    var 프로젝트명 = _ref3.프로젝트명;\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: 프로젝트명,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 27\n      }\n    }, 프로젝트명);\n  })))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, \"\\uC791\\uC131\\uC790\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"\\uC791\\uC131\\uC790\",\n    disabled: true,\n    value: \"임시\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 23\n    }\n  })))))), /*#__PURE__*/React.createElement(Widget, {\n    style: {\n      paddingTop: 2 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-warning\",\n    onClick: highlightText,\n    style: {\n      zIndex: 10,\n      position: 'fixed',\n      right: 5 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"\\uAC15\\uC870\"), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"col-md-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, \"(\\uC804)\\uAE08\\uC8FC\\uACC4\\uD68D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"col-md-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, \"\\uAE08\\uC8FC\\uACC4\\uD68D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.금주계획\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uAE08\\uC8FC\\uACC4\\uD68D\",\n    maxLength: \"5000\",\n    value: report.금주계획,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"(\\uC804)\\uAE08\\uC8FC\\uC9C4\\uD589\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  }, \"\\uAE08\\uC8FC\\uC9C4\\uD589\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.금주진행\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uAE08\\uC8FC\\uC9C4\\uD589\",\n    maxLength: \"10000\",\n    value: report.금주진행,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, \"(\\uC804)\\uCC28\\uC8FC\\uACC4\\uD68D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, \"\\uCC28\\uC8FC\\uACC4\\uD68D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.차주계획\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uCC28\\uC8FC\\uACC4\\uD68D\",\n    maxLength: \"5000\",\n    value: report.차주계획,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }\n  }, \"(\\uC804)\\uD2B9\\uC774\\uC0AC\\uD56D\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }, \"\\uD2B9\\uC774\\uC0AC\\uD56D\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.특이사항\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uD2B9\\uC774\\uC0AC\\uD56D\",\n    maxLength: \"5000\",\n    value: report.특이사항,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, \"(\\uC804)\\uBE44\\uACE0\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, \"\\uBE44\\uACE0\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"newReport__p\",\n    dangerouslySetInnerHTML: {\n      __html: lastReport.비고\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"newReport__td\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"\\uBE44\\uACE0\",\n    maxLength: \"5000\",\n    value: report.비고,\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: onClickSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }\n  }, \"\\uB4F1\\uB85D\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/projects/reports\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 46\n    }\n  }, \"\\uCDE8\\uC18C\"))))));\n};\n\nexport default NewReport;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/newReport/NewReport.js"],"names":["axios","React","useEffect","useState","Link","Row","Col","Table","Widget","NewReport","projects","setProjects","project_id","프로젝트","작성자","금주계획","금주진행","차주계획","특이사항","비고","report","setReport","lastReport","setLastReport","cssStart","cssEnd","onClickSubmit","alert","result","window","confirm","post","process","env","REACT_APP_API_URL","최종수정시간","Date","then","res","location","href","onChange","e","target","name","value","tempProject","find","프로젝트명","id","get","_lastReport","data","getWeek","substring","findAllInfos","_projects","filter","project","주간보고서","localStorage","getItem","highlightText","selection","document","getSelection","createRange","text","selectionTextArea","anchorNode","lastElementChild","selectStartIndex","selectionStart","selectEndIndex","selectionEnd","content","dragBefore","drag","dragAfter","length","includeDragBefore","includeDrag","includeDragAfter","hasHighlight","replaceAll","err","indexOf","paddingTop","fontWeight","map","index","zIndex","position","right","__html"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Row, Col } from \"reactstrap\";\r\nimport Table from \"reactstrap/lib/Table\";\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport './NewReport.scss';\r\n\r\nconst NewReport = () => {\r\n  const [projects , setProjects] = useState([]);\r\n  const [report, setReport] = useState({\r\n    project_id: '',\r\n    프로젝트: '',\r\n    작성자: '',\r\n    금주계획: '',\r\n    금주진행: '',\r\n    차주계획: '',\r\n    특이사항: '',\r\n    비고: '',\r\n  });\r\n  const [lastReport, setLastReport] = useState({\r\n    금주계획: '',\r\n    금주진행: '',\r\n    차주계획: '',\r\n    특이사항: '',\r\n    비고: ''\r\n  });\r\n  const cssStart = \"<span style='background-color: #ffff00'>\"\r\n  const cssEnd = \"</span>\";\r\n\r\n  const onClickSubmit = () => {\r\n    if (!report.project_id) {\r\n      alert(\"프로젝트를 선택해주세요.\");\r\n      return;\r\n    } else if (!report.작성자) {\r\n      alert(\"작성자를 적어주세요.\");\r\n      return;\r\n    }\r\n    const result = window.confirm(\"등록하시겠습니까?\");\r\n    if (result) {\r\n      axios.post(`http://${process.env.REACT_APP_API_URL}/reports/add`, {report: {...report, 최종수정시간: new Date()}})\r\n      .then(res => {\r\n        alert(\"등록되었습니다.\");\r\n      })\r\n      window.location.href = \"#/app/projects/reports\";\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    switch (name) {\r\n      case \"프로젝트\":\r\n        return(setReport({ ...report, 프로젝트: value }));\r\n      case \"작성자\":\r\n        return(setReport({ ...report, 작성자: value }));\r\n      case \"금주계획\":\r\n        return(setReport({ ...report, 금주계획: value }));\r\n      case \"금주진행\":\r\n        return(setReport({ ...report, 금주진행: value }));\r\n      case \"차주계획\":\r\n        return(setReport({ ...report, 차주계획: value }));\r\n      case \"특이사항\":\r\n        return(setReport({ ...report, 특이사항: value }));\r\n      case \"비고\":\r\n        return(setReport({ ...report, 비고: value }));\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  useEffect(()=> {\r\n    const tempProject = projects.find(({프로젝트명}) => 프로젝트명 === report.프로젝트);\r\n    if (tempProject) {\r\n      setReport({ ...report, project_id: tempProject.id });\r\n      axios.get(`http://${process.env.REACT_APP_API_URL}/reports/search/last?pid=${tempProject.id}`)\r\n      .then((res) => {\r\n        const _lastReport = res.data.find(({최종수정시간}) => (new Date(최종수정시간).getWeek(3) === new Date().getWeek(3) - 1)\r\n        || (new Date(최종수정시간.substring(0,10)).getWeek(3) == new Date().getWeek(3) - 1));\r\n        _lastReport ? setLastReport({..._lastReport}) : setLastReport({금주계획: '', 금주진행: '', 차주계획: '', 특이사항: '', 비고: ''});\r\n      })\r\n    } else {\r\n      setReport({ ...report, project_id: '' });\r\n    }\r\n  }, [report.프로젝트])\r\n  useEffect(()=> {\r\n    findAllInfos();\r\n  }, []);\r\n\r\n  const findAllInfos = () => {\r\n    axios.get(`http://${process.env.REACT_APP_API_URL}/projects`)\r\n    .then(res =>{\r\n      const _projects = res.data.filter((project) => project.주간보고서 == \"1\")\r\n      setProjects(_projects);\r\n      setReport({ ...report, 작성자: localStorage.getItem(\"id\")})\r\n    })\r\n  }\r\n\r\n  function highlightText() { //강조버튼 클릭시 해당 내용을 강조하는 함수\r\n    let selection = \"\";\r\n    if (document.getSelection) { //크롬\r\n      selection = document.getSelection();\r\n    } else if (document.selection) { //익스\r\n      selection = document.selection.createRange().text;\r\n    }\r\n    try {\r\n      let selectionTextArea = selection.anchorNode.lastElementChild; //선택된 textArea\r\n      if (selectionTextArea.name === \"프로젝트\" || selectionTextArea.name === \"작성자\")\r\n        return;\r\n      //getCssIndex(selectionTextArea.value); //선택된 textArea에 css 태그 index 가져오기\r\n      let selectStartIndex = selectionTextArea.selectionStart; // 드래그 영역 selectStartIndex~selectEndIndex-1\r\n      let selectEndIndex = selectionTextArea.selectionEnd;\r\n      let content = selectionTextArea.value;\r\n\r\n      // aaAAbb => aa AA bb\r\n      let dragBefore = selectionTextArea.value.substring(0, selectStartIndex);\r\n      let drag = selectionTextArea.value.substring(selectStartIndex, selectEndIndex); //강조할 부분\r\n      let dragAfter = selectionTextArea.value.substring(selectEndIndex, content.length);\r\n\r\n      // aa<span>AA</span>bb -> AA만 드래그 했을 경우 고려해서 => aa <span>AA</span> bb\r\n      let includeDragBefore = selectionTextArea.value.substring(0, selectStartIndex-cssStart.length)\r\n      let includeDrag = selectionTextArea.value.substring(selectStartIndex-cssStart.length, selectEndIndex+cssEnd.length) \r\n      let includeDragAfter = selectionTextArea.value.substring(selectEndIndex+cssEnd.length, content.length);\r\n      \r\n      // <span></span> +- 과정에서 인덱스 벗어나는 경우 고려\r\n      if((selectStartIndex-cssStart.length < 0)&&(selectEndIndex+cssEnd.length>=content.length)){\r\n        includeDragBefore = dragBefore;\r\n        includeDrag = drag;\r\n        includeDragAfter = dragAfter;\r\n      }\r\n      else if(selectStartIndex-cssStart.length < 0){\r\n        includeDragBefore = \"\";\r\n        includeDrag = selectionTextArea.value.substring(0, selectEndIndex+cssEnd.length)\r\n      }\r\n      else if(selectEndIndex+cssEnd.length>=content.length){\r\n        selectionTextArea.value.substring(selectStartIndex-cssStart.length, content.length)\r\n        includeDragAfter = \"\";\r\n      }\r\n      \r\n      if(hasHighlight(includeDrag)){ // 강조 해제\r\n        includeDrag = includeDrag.replaceAll(cssStart,\"\");\r\n        includeDrag = includeDrag.replaceAll(cssEnd, \"\");\r\n        dragBefore = includeDragBefore;\r\n        drag = includeDrag;\r\n        dragAfter = includeDragAfter;\r\n      }\r\n      else{ // 강조\r\n        drag = cssStart + drag + cssEnd;\r\n      }\r\n      selectionTextArea.value = dragBefore + drag + dragAfter;\r\n      const { name } = selectionTextArea;\r\n      switch (name) {\r\n        case \"금주계획\":\r\n          return(setReport({ ...report, 금주계획: selectionTextArea.value }));\r\n        case \"금주진행\":\r\n          return(setReport({ ...report, 금주진행: selectionTextArea.value }));\r\n        case \"차주계획\":\r\n          return(setReport({ ...report, 차주계획: selectionTextArea.value }));\r\n        case \"특이사항\":\r\n          return(setReport({ ...report, 특이사항: selectionTextArea.value }));\r\n        case \"비고\":\r\n          return(setReport({ ...report, 비고: selectionTextArea.value }));\r\n        default:\r\n          return;\r\n      }\r\n    } catch (err) {\r\n    }\r\n  }\r\n\r\n  function hasHighlight(content){ //강조되어있는지 확인하는 함수\r\n    if(content.indexOf(cssStart,0)!=-1 || content.indexOf(cssEnd,0) != -1)\r\n      return true; //cssStart와 cssEnd 둘 중 하나라도 가지고 있으면 true\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Widget style={{paddingTop: 2+'rem'}}>\r\n            <Table>\r\n              <tbody>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td>프로젝트</td>\r\n                  <td>\r\n                    <select className=\"form-control\" name=\"프로젝트\" value={report.프로젝트} onChange={onChange}>\r\n                      <option value=\"\" disabled hidden></option>\r\n                      {projects\r\n                      .map(({프로젝트명}, index) => {\r\n                        return (\r\n                          <option value={프로젝트명} key={index}>{프로젝트명}</option>\r\n                        )\r\n                      })}\r\n                    </select>\r\n                  </td>\r\n                </tr>\r\n                <tr style={{fontWeight: 'bold'}}>\r\n                  <td>작성자</td>\r\n                  <td><input className=\"form-control\" type=\"text\" name=\"작성자\" disabled value={\"임시\"}/></td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n          </Widget>\r\n          <Widget style={{paddingTop: 2+'rem'}}>\r\n            <button className=\"btn btn-warning\" onClick={highlightText} style={{zIndex: 10, position: 'fixed', right:5+'rem' }}>강조</button>\r\n            <Table>\r\n              <tr style={{fontWeight: 'bold'}}>\r\n                <td className=\"col-md-1\">(전)금주계획</td>\r\n                <td className=\"col-md-1\">금주계획</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"newReport__td\">\r\n                  <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.금주계획} }></p>\r\n                </td>\r\n                <td className=\"newReport__td\">\r\n                  <textarea \r\n                    type=\"text\" \r\n                    name=\"금주계획\"\r\n                    maxLength=\"5000\" \r\n                    value={report.금주계획}\r\n                    onChange={onChange}/>\r\n                  </td>\r\n              </tr>\r\n              <tr style={{fontWeight: 'bold'}}>\r\n                <td className=\"newReport__td\">(전)금주진행</td>\r\n                <td className=\"newReport__td\">금주진행</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"newReport__td\">\r\n                  <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.금주진행} }></p>\r\n                </td>\r\n                <td className=\"newReport__td\">\r\n                  <textarea\r\n                    type=\"text\" \r\n                    name=\"금주진행\" \r\n                    maxLength=\"10000\" \r\n                    value={report.금주진행} \r\n                    onChange={onChange}/>\r\n                  </td>\r\n              </tr>\r\n              <tr style={{fontWeight: 'bold'}}>\r\n                <td className=\"newReport__td\">(전)차주계획</td>\r\n                <td className=\"newReport__td\">차주계획</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"newReport__td\">\r\n                  <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.차주계획} }></p>\r\n                </td>\r\n                <td className=\"newReport__td\">\r\n                  <textarea\r\n                    type=\"text\" \r\n                    name=\"차주계획\" \r\n                    maxLength=\"5000\" \r\n                    value={report.차주계획} \r\n                    onChange={onChange}/>\r\n                  </td>\r\n              </tr>\r\n              <tr style={{fontWeight: 'bold'}}>\r\n                <td className=\"newReport__td\">(전)특이사항</td>\r\n                <td className=\"newReport__td\">특이사항</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"newReport__td\">\r\n                  <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.특이사항} }></p>\r\n                </td>\r\n                <td className=\"newReport__td\">\r\n                  <textarea\r\n                    type=\"text\" \r\n                    name=\"특이사항\" \r\n                    maxLength=\"5000\" \r\n                    value={report.특이사항} \r\n                    onChange={onChange}/>\r\n                  </td>\r\n              </tr>\r\n              <tr style={{fontWeight: 'bold'}}>\r\n                <td className=\"newReport__td\">(전)비고</td>\r\n                <td className=\"newReport__td\">비고</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"newReport__td\">\r\n                  <p className=\"newReport__p\" dangerouslySetInnerHTML={ {__html: lastReport.비고} }></p>\r\n                </td>\r\n                <td className=\"newReport__td\">\r\n                  <textarea\r\n                    type=\"text\" \r\n                    name=\"비고\" \r\n                    maxLength=\"5000\" \r\n                    value={report.비고} \r\n                    onChange={onChange}/>\r\n                  </td>\r\n              </tr>\r\n            </Table>\r\n            <button className=\"btn btn-primary\" onClick={onClickSubmit}>등록</button>\r\n            <Link to=\"/app/projects/reports\"><button className=\"btn btn-primary\">취소</button></Link>\r\n          </Widget>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewReport;"]},"metadata":{},"sourceType":"module"}