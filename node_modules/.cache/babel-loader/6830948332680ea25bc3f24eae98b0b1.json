{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\myPage\\\\MyPage.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Table, Head, Body, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from \"reactstrap\";\nimport \"./MyPage.scss\";\nimport Widget from \"../../components/Widget/Widget\";\nimport axios from \"axios\";\nimport { useCookies } from 'react-cookie';\n\nvar MyPage = function MyPage() {\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState({\n    change: \"\",\n    confirm: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState({\n    num: \"\",\n    id: \"\",\n    name: \"\",\n    division: \"\",\n    team: \"\",\n    ranks: \"\",\n    position: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var onChangeInput = function onChangeInput(e) {\n    setPassword(_objectSpread(_objectSpread({}, password), {}, _defineProperty({}, e.target.id, e.target.value)));\n  };\n\n  useEffect(function () {\n    return findAllInfo();\n  }, []);\n\n  var findAllInfo = function findAllInfo() {\n    var id = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n    axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/members/search?id=\").concat(id)).then(function (res) {\n      setUser(res.data[0]);\n    }).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n  };\n\n  var onSubmit = function onSubmit(e) {\n    e.preventDefault();\n\n    if (password.change != password.confirm) {\n      alert(\"비밀번호가 일치하지 않습니다.\");\n      return;\n    } else {\n      var confirm = window.confirm(\"비밀번호를 바꾸시겠습니까?\");\n\n      if (confirm) {\n        axios.post(\"http://\".concat(process.env.REACT_APP_API_URL, \"/members/password\"), {\n          password: password.change,\n          num: user.num\n        }).then(function (response) {\n          console.log(response);\n        }).catch(function (err) {\n          if (cookies.token) {\n            removeCookie('token');\n          }\n\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n          window.location.href = \"/\";\n        });\n        window.location.reload();\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 30,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 26\n      }\n    }, \"My Page\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontWeight: 700,\n      fontSize: 1.5 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"\\uB0B4 \\uC815\\uBCF4\"), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }, \"\\uC544\\uC774\\uB514\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, \"\\uC774\\uB984\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, \"\\uC18C\\uC18D\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, \"\\uD300\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"\\uC9C1\\uAE09\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, \"\\uC9C1\\uCC45\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }\n  }, user.id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }, user.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, user.division), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, user.team), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, user.ranks), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, user.position)))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontWeight: 700,\n      fontSize: 1.5 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mypage__sub_wrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mypage__sub_title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"password\",\n    value: password.change,\n    id: \"change\",\n    onChange: onChangeInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mypage__sub_wrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mypage__sub_title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"password\",\n    value: password.confirm,\n    id: \"confirm\",\n    onChange: onChangeInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    style: {\n      marginTop: 0.5 + 'rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, \"\\uBCC0\\uACBD\")))));\n};\n\nexport default MyPage;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/myPage/MyPage.js"],"names":["React","useState","useEffect","Row","Col","Table","Head","Body","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","Widget","axios","useCookies","MyPage","cookies","removeCookie","change","confirm","password","setPassword","num","id","name","division","team","ranks","position","user","setUser","onChangeInput","e","target","value","findAllInfo","JSON","parse","localStorage","getItem","defaults","headers","common","token","get","process","env","REACT_APP_API_URL","then","res","data","catch","err","alert","window","location","href","onSubmit","preventDefault","post","response","console","log","reload","fontSize","fontWeight","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Table,\r\n  Head,\r\n  Body,\r\n  Progress,\r\n  Button,\r\n  UncontrolledButtonDropdown,\r\n  DropdownMenu,\r\n  DropdownToggle,\r\n  DropdownItem,\r\n  Input,\r\n  Label,\r\n  Badge\r\n} from \"reactstrap\";\r\nimport \"./MyPage.scss\"\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport axios from \"axios\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst MyPage = () => {\r\n  const [cookies, removeCookie ] = useCookies(['token']);\r\n  const [password, setPassword] = useState({\r\n    change: \"\",\r\n    confirm: \"\"\r\n  });\r\n  const [user, setUser] = useState({\r\n    num: \"\",\r\n    id: \"\",\r\n    name: \"\",\r\n    division: \"\",\r\n    team: \"\",\r\n    ranks: \"\",\r\n    position: \"\",\r\n  });\r\n\r\n  const onChangeInput = (e) => {\r\n    setPassword({\r\n      ...password,\r\n      [e.target.id]: e.target.value\r\n    });\r\n  };\r\n\r\n  useEffect(() => findAllInfo(), []);\r\n\r\n  const findAllInfo = () => {\r\n    const id = JSON.parse(localStorage.getItem(\"userInfo\")) ? JSON.parse(localStorage.getItem(\"userInfo\")).id : '';\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    axios.get(`http://${process.env.REACT_APP_API_URL}/members/search?id=${id}`)\r\n    .then((res) => {\r\n      setUser(res.data[0]);\r\n    })\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (password.change != password.confirm) {\r\n      alert(\"비밀번호가 일치하지 않습니다.\");\r\n      return;\r\n    } else {\r\n      const confirm = window.confirm(\"비밀번호를 바꾸시겠습니까?\");\r\n      if (confirm) {\r\n        axios.post(`http://${process.env.REACT_APP_API_URL}/members/password`, {password: password.change, num: user.num})\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch(err => {\r\n          if (cookies.token) {\r\n            removeCookie('token');\r\n          }\r\n          alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n          window.location.href = \"/\";\r\n        });\r\n        window.location.reload();\r\n      }\r\n    }\r\n  };\r\n    \r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Widget title={<p style={{ fontSize:30, fontWeight: 700 }}>My Page</p>}>\r\n            <p style={{ fontWeight: 700, fontSize: 1.5+'rem'}}>내 정보</p>\r\n            <Table>\r\n              <thead>\r\n                <tr>\r\n                  <th>아이디</th>\r\n                  <th>이름</th>\r\n                  <th>소속</th>\r\n                  <th>팀</th>\r\n                  <th>직급</th>\r\n                  <th>직책</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>{user.id}</td>\r\n                  <td>{user.name}</td>\r\n                  <td>{user.division}</td>\r\n                  <td>{user.team}</td>\r\n                  <td>{user.ranks}</td>\r\n                  <td>{user.position}</td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n            <p style={{ fontWeight: 700, fontSize: 1.5+'rem'}}>비밀번호 변경</p>\r\n            <div>\r\n              <div className=\"mypage__sub_wrap\">\r\n                <div className=\"mypage__sub_title\">새 비밀번호</div>\r\n                <input className=\"form-control\" type=\"password\" value={password.change} id=\"change\" onChange={onChangeInput}/>\r\n              </div>\r\n              <div className=\"mypage__sub_wrap\">\r\n                <div className=\"mypage__sub_title\">새 비밀번호 확인</div>\r\n                <input className=\"form-control\" type=\"password\" value={password.confirm} id=\"confirm\" onChange={onChangeInput}/>\r\n              </div>\r\n            </div>\r\n            <Button color=\"primary\" style={{marginTop: 0.5+'rem'}}>변경</Button>\r\n          </Widget>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MyPage;\r\n"]},"metadata":{},"sourceType":"module"}