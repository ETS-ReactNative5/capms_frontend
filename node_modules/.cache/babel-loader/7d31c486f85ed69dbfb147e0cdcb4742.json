{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\suresoft\\\\Desktop\\\\vomproject\\\\sure-frontend\\\\src\\\\pages\\\\managerSchedule\\\\DetailSchedule.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Table, Button } from 'reactstrap';\nimport Flatpickr from \"react-flatpickr\";\nimport Widget from '../../components/Widget/Widget';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\n\nvar DetailSchedule = function DetailSchedule(props) {\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      removeCookie = _useCookies2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      places = _useState2[0],\n      setPlaces = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isEtcAM = _useState4[0],\n      setIsEtcAM = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isEtcPM = _useState6[0],\n      setIsEtcPM = _useState6[1];\n\n  var id = props.match.params.id;\n\n  var _useState7 = useState([{\n    이름: '',\n    날짜: '',\n    오전: '',\n    오후: ''\n  }]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      schedule = _useState8[0],\n      setSchedule = _useState8[1];\n\n  var onClickUpdate = function onClickUpdate() {\n    if (schedule[0].오전 === '' || schedule[0].오후 === '') {\n      alert('스케줄을 입력해주세요');\n      return;\n    }\n\n    axios.post('/schedule/add', {\n      schedule: schedule\n    }).then(function (res) {}).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n    window.location.href = \"#/app/schedule\";\n    window.location.reload();\n  };\n\n  var onClickDelete = function onClickDelete() {\n    axios.post('/schedule/delete', {\n      id: id\n    }).then(function (res) {}).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n    window.location.href = \"#/app/schedule\";\n    window.location.reload();\n  };\n\n  useEffect(function () {\n    return findAllInfos();\n  }, []);\n\n  var findAllInfos = function findAllInfos() {\n    axios.defaults.headers.common['Authorization'] = cookies.token;\n    axios.all([axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/schedule/search?id=\").concat(props.match.params.id)), axios.get(\"http://\".concat(process.env.REACT_APP_API_URL, \"/places\"))]).then(axios.spread(function (res1, res2) {\n      var places = res2.data.sort(function (a, b) {\n        return a.num - b.num;\n      });\n      setPlaces(places);\n\n      if (res1.data.length > 0) {\n        setSchedule(res1.data);\n\n        if (!res2.data.filter(function (place) {\n          return Number(place.year) === new Date(res1.data[0].날짜).getFullYear();\n        }).find(function (_ref) {\n          var name = _ref.name;\n          return name === res1.data[0].오전;\n        }) && res1.data[0].오전 !== '휴무일' && res1.data[0].오전 !== '교육' && res1.data[0].오전 !== '재택' && res1.data[0].오전 !== '휴가') {\n          setIsEtcAM(true);\n        }\n\n        if (!res2.data.filter(function (place) {\n          return Number(place.year) === new Date(res1.data[0].날짜).getFullYear();\n        }).find(function (_ref2) {\n          var name = _ref2.name;\n          return name === res1.data[0].오후;\n        }) && res1.data[0].오후 !== '휴무일' && res1.data[0].오후 !== '교육' && res1.data[0].오후 !== '재택' && res1.data[0].오후 !== '휴가') {\n          setIsEtcPM(true);\n        }\n      }\n    })).catch(function (err) {\n      if (cookies.token) {\n        removeCookie('token');\n      }\n\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\n      window.location.href = \"/\";\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Widget, {\n    title: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 20,\n        fontWeight: 700\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 22\n      }\n    }, \"\\uC77C\\uC815 \\uC218\\uC815\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"\\uB0A0\\uC9DC\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Flatpickr, {\n    className: \"form-control\",\n    value: schedule[0].날짜,\n    onChange: function onChange(date) {\n      return setSchedule(schedule.map(function (_ref3) {\n        var 이름 = _ref3.이름,\n            날짜 = _ref3.날짜,\n            오전 = _ref3.오전,\n            오후 = _ref3.오후;\n        return {\n          이름: 이름,\n          날짜: moment(new Date(date)).format(\"YYYY-MM-DD\"),\n          오전: 오전,\n          오후: 오후\n        };\n      }));\n    },\n    options: {\n      dateFormat: \"Y-m-d\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"\\uC624\\uC804\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    value: schedule[0].오전,\n    onChange: function onChange(e) {\n      if (e.target.value === '') {\n        setIsEtcAM(true);\n      } else {\n        setIsEtcAM(false);\n      }\n\n      setSchedule(schedule.map(function (_ref4) {\n        var 이름 = _ref4.이름,\n            날짜 = _ref4.날짜,\n            오전 = _ref4.오전,\n            오후 = _ref4.오후;\n        return {\n          이름: 이름,\n          날짜: 날짜,\n          오전: e.target.value,\n          오후: 오후\n        };\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, \"\\uAE30\\uD0C0\"), places.filter(function (place) {\n    return Number(place.year) == new Date(schedule[0].날짜).getFullYear();\n  }).map(function (place, index) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: place.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, place.name);\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uBB34\\uC77C\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, \"\\uD734\\uBB34\\uC77C\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uAD50\\uC721\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, \"\\uAD50\\uC721\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uC7AC\\uD0DD\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"\\uC7AC\\uD0DD\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uAC00\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"\\uD734\\uAC00\")), isEtcAM && /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    value: schedule[0].오전,\n    onChange: function onChange(e) {\n      return setSchedule(schedule.map(function (_ref5) {\n        var 이름 = _ref5.이름,\n            날짜 = _ref5.날짜,\n            오전 = _ref5.오전,\n            오후 = _ref5.오후;\n        return {\n          이름: 이름,\n          날짜: 날짜,\n          오전: e.target.value,\n          오후: 오후\n        };\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, \"\\uC624\\uD6C4\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    value: schedule[0].오후,\n    onChange: function onChange(e) {\n      if (e.target.value === '') {\n        setIsEtcPM(true);\n      } else {\n        setIsEtcPM(false);\n      }\n\n      setSchedule(schedule.map(function (_ref6) {\n        var 이름 = _ref6.이름,\n            날짜 = _ref6.날짜,\n            오전 = _ref6.오전,\n            오후 = _ref6.오후;\n        return {\n          이름: 이름,\n          날짜: 날짜,\n          오전: 오전,\n          오후: e.target.value\n        };\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }, \"\\uAE30\\uD0C0\"), places.filter(function (place) {\n    return Number(place.year) === new Date(schedule[0].날짜).getFullYear();\n  }).map(function (place, index) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: place.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, place.name);\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uBB34\\uC77C\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"\\uD734\\uBB34\\uC77C\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uAD50\\uC721\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, \"\\uAD50\\uC721\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uC7AC\\uD0DD\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 19\n    }\n  }, \"\\uC7AC\\uD0DD\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\uD734\\uAC00\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, \"\\uD734\\uAC00\")), isEtcPM && /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    value: schedule[0].오후,\n    onChange: function onChange(e) {\n      return setSchedule(schedule.map(function (_ref7) {\n        var 이름 = _ref7.이름,\n            날짜 = _ref7.날짜,\n            오전 = _ref7.오전,\n            오후 = _ref7.오후;\n        return {\n          이름: 이름,\n          날짜: 날짜,\n          오전: 오전,\n          오후: e.target.value\n        };\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: onClickUpdate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, \"\\uC218\\uC815\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: onClickDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, \"\\uC0AD\\uC81C\")));\n};\n\nexport default DetailSchedule;","map":{"version":3,"sources":["C:/Users/suresoft/Desktop/vomproject/sure-frontend/src/pages/managerSchedule/DetailSchedule.js"],"names":["React","useState","useEffect","Table","Button","Flatpickr","Widget","moment","axios","useCookies","DetailSchedule","props","cookies","removeCookie","places","setPlaces","isEtcAM","setIsEtcAM","isEtcPM","setIsEtcPM","id","match","params","이름","날짜","오전","오후","schedule","setSchedule","onClickUpdate","alert","post","then","res","catch","err","token","window","location","href","reload","onClickDelete","findAllInfos","defaults","headers","common","all","get","process","env","REACT_APP_API_URL","spread","res1","res2","data","sort","a","b","num","length","filter","place","Number","year","Date","getFullYear","find","name","fontSize","fontWeight","date","map","format","dateFormat","e","target","value","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Button } from 'reactstrap';\r\nimport Flatpickr from \"react-flatpickr\";\r\nimport Widget from '../../components/Widget/Widget';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst DetailSchedule = (props) => {\r\n  const [cookies, removeCookie] = useCookies(['token']);\r\n  const [places, setPlaces] = useState([]);\r\n  const [isEtcAM, setIsEtcAM] = useState(false);\r\n  const [isEtcPM, setIsEtcPM] = useState(false);\r\n  const id = props.match.params.id;\r\n  const [schedule, setSchedule] = useState([\r\n    {\r\n      이름: '',\r\n      날짜: '',\r\n      오전: '',\r\n      오후: '',\r\n    }\r\n  ]);\r\n\r\n  const onClickUpdate = () => {\r\n    if(schedule[0].오전 === '' || schedule[0].오후 === '') {\r\n      alert('스케줄을 입력해주세요');\r\n      return;\r\n    }\r\n    axios\r\n    .post('/schedule/add', {schedule})\r\n    .then(res => {})\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n    window.location.href = \"#/app/schedule\";\r\n    window.location.reload();\r\n  }\r\n\r\n  const onClickDelete = () => {\r\n    axios\r\n    .post('/schedule/delete', {id})\r\n    .then(res => {})\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n    window.location.href = \"#/app/schedule\";\r\n    window.location.reload();\r\n  }\r\n\r\n  useEffect(()=> findAllInfos(), []);\r\n\r\n  const findAllInfos = () => {\r\n    axios.defaults.headers.common['Authorization'] = cookies.token;\r\n    axios\r\n    .all([axios.get(`http://${process.env.REACT_APP_API_URL}/schedule/search?id=${props.match.params.id}`),\r\n    axios.get(`http://${process.env.REACT_APP_API_URL}/places`)])\r\n    .then(axios.spread((res1, res2) => {\r\n      const places = res2.data.sort((a, b) => a.num - b.num)\r\n      setPlaces(places);\r\n      if (res1.data.length > 0) {\r\n        setSchedule(res1.data);\r\n        if (!res2.data.filter(place => Number(place.year) === new Date(res1.data[0].날짜).getFullYear()).find(({name}) => name === res1.data[0].오전)\r\n        && res1.data[0].오전 !== '휴무일'&& res1.data[0].오전 !== '교육' && res1.data[0].오전 !== '재택' && res1.data[0].오전 !== '휴가') {\r\n          setIsEtcAM(true);\r\n        }\r\n        if (!res2.data.filter(place => Number(place.year) === new Date(res1.data[0].날짜).getFullYear()).find(({name}) => name === res1.data[0].오후)\r\n        && res1.data[0].오후 !== '휴무일'&& res1.data[0].오후 !== '교육' && res1.data[0].오후 !== '재택' && res1.data[0].오후 !== '휴가') {\r\n          setIsEtcPM(true);\r\n        }\r\n      }\r\n    }))\r\n    .catch(err => {\r\n      if (cookies.token) {\r\n        removeCookie('token');\r\n      }\r\n      alert(\"세션이 만료되었습니다. 다시 로그인 해주세요\");\r\n      window.location.href = \"/\";\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Widget title={<p style={{ fontSize:20, fontWeight: 700 }}>일정 수정</p>}>\r\n        <Table>\r\n          <tbody>\r\n            <tr>\r\n              <td>날짜</td>\r\n              <td>\r\n                <Flatpickr\r\n                  className=\"form-control\"\r\n                  value={schedule[0].날짜}\r\n                  onChange={(date) =>\r\n                    setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => \r\n                    ({이름, 날짜: moment(new Date(date)).format(\"YYYY-MM-DD\"), 오전, 오후})))}\r\n                  options={\r\n                    {dateFormat: \"Y-m-d\"}\r\n                  }\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>오전</td>\r\n              <td>\r\n                <select \r\n                  className=\"form-control\" \r\n                  value={schedule[0].오전} \r\n                  onChange={(e) => {\r\n                    if(e.target.value === '') {\r\n                      setIsEtcAM(true);\r\n                    } else {\r\n                      setIsEtcAM(false);\r\n                    }\r\n                    setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => ({이름, 날짜, 오전: e.target.value, 오후})))\r\n                  }}\r\n                >\r\n                  <option value=\"\">기타</option>\r\n                  {places.filter(place => Number(place.year) == new Date(schedule[0].날짜).getFullYear()).map((place, index) => (\r\n                    <option key={index} value={place.name}>{place.name}</option>\r\n                  ))}\r\n                  <option value=\"휴무일\">휴무일</option>\r\n                  <option value=\"교육\">교육</option>\r\n                  <option value=\"재택\">재택</option>\r\n                  <option value=\"휴가\">휴가</option>\r\n                </select>\r\n                {isEtcAM &&\r\n                  <input className=\"form-control\" value={schedule[0].오전}\r\n                    onChange={(e) => setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => ({이름, 날짜, 오전: e.target.value, 오후})))}\r\n                  />\r\n                }\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>오후</td>\r\n              <td>\r\n              <select\r\n                  className=\"form-control\"\r\n                  value={schedule[0].오후}\r\n                  onChange={(e) => {\r\n                    if(e.target.value === '') {\r\n                      setIsEtcPM(true);\r\n                    } else {\r\n                      setIsEtcPM(false);\r\n                    }\r\n                    setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => ({이름, 날짜, 오전, 오후: e.target.value})))\r\n                  }}\r\n                >\r\n                  <option value=\"\">기타</option>\r\n                  {places.filter(place => Number(place.year) === new Date(schedule[0].날짜).getFullYear()).map((place, index) => (\r\n                    <option key={index} value={place.name}>{place.name}</option>\r\n                  ))}\r\n                  <option value=\"휴무일\">휴무일</option>\r\n                  <option value=\"교육\">교육</option>\r\n                  <option value=\"재택\">재택</option>\r\n                  <option value=\"휴가\">휴가</option>\r\n                </select>\r\n                {isEtcPM &&\r\n                  <input className=\"form-control\" value={schedule[0].오후}\r\n                    onChange={(e) => setSchedule(schedule.map(({이름, 날짜, 오전, 오후}) => ({이름, 날짜, 오전, 오후: e.target.value})))}\r\n                  />\r\n                }\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        <Button color=\"primary\" onClick={onClickUpdate}>수정</Button>\r\n        <Button color=\"primary\" onClick={onClickDelete}>삭제</Button>\r\n      </Widget>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DetailSchedule;"]},"metadata":{},"sourceType":"module"}